(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=r.parcelRequire1d24;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},r.parcelRequire1d24=i),i.register("ifysB",(function(e,t){i("5V6iE").register(JSON.parse('{"9pKF6":"ConnectHardwareMultichainFlow.ed98e413.js","98k3u":"bip32.f27ae5a8.js","9x3Iv":"Solana.95d9c53c.js","9eTlR":"Solana.f98d672f.js","hFDiN":"Eth.e923e106.js","3P9Hz":"main.488cbe0e.js","2UKlV":"semver.8ccfa2da.js","vQhtf":"ledgerSignerBitcoin.68759ed2.js","8ydDW":"english.6aeeb454.js","esIsT":"crypto-browserify.1c9b4a3e.js","h3t8x":"TransportWebHID.6ce3c950.js","9Dpy0":"popup.5cbd182e.css"}'))})),i.register("5V6iE",(function(t,r){var n,o;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};n=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("gMNJN",(function(t,r){e(t.exports,"transactionsSdk",(function(){return F})),e(t.exports,"fungiblesSdk",(function(){return K})),e(t.exports,"hooks",(function(){return j}));var n=i("6Tvfa");i("4ZT2Y");var o=i("iOfbc"),s=i("belzv"),a=i("cR6w7"),u=i("54qyi"),c=i("faYhk"),p=i("gYh0e");i("hsoDC");var f=i("cHdXl"),d=i("8NH57");i("W0Kfy");var l=i("8We9Q"),h=i("4QHep"),y=i("bUo8j"),g=i("iPvw0"),v=i("6oMdZ"),w=i("1uUV4"),m=i("a0t1u"),T=i("4raQz"),b=i("5Wbtn");i("fOc77");var S=i("jXZgH"),E=i("8Hh7g"),x=i("6Nxml"),A=i("5Z2YQ"),I=i("5ZL0s"),O=i("ibYAx"),P=i("5Doro"),k=i("5cqUH"),_=i("jPDaF"),N=i("hvlNY"),C=i("h5kyv"),D=i("d1qx3"),L=i("9hiP6");const B=new(0,_.LegacyIndexedDBProxy),R=new(0,T.PriorityFeeService),H=(0,I.getVaultProxy)(),U=(0,T.createUtxoManager)(new(0,T.UtxoStore)(B)),M=new(0,a.CollectiblesSdk),F=new(0,T.TransactionsSdk),K=new(0,p.FungiblesSdk),j=function(e){const{analytics:t,chainAvailabilityDeps:r,fungiblesSdk:i,legacyStorage:I,priorityFeeService:P,queryClient:_,storage:N,vaultProxy:B}=e,R=(0,s.createChainHooks)(B,r,_,[n.invalidateAllAccounts,g.invalidateAddressBookEntries,d.invalidateActionBanners]),H=(0,n.createAccountHooks)(B,N,I,_,R,(e=>e.invalidateQueries(["browser-ext/MultichainMockAccountsContext"])),t,(0,k.getLegacyMnemonicFetcher)()),F=(0,o.createAutoConfirmHooks)(B,N,R,t,_),K=(0,A.createClusterHooks)(I),j=(0,h.createPriceHooks)({queryClient:_,getApiEnvironment:x.getAPIEnvironment}),V=(0,g.createSettingsHooks)(B,N,I,_,R,t,O.BROWSER_ENV.browser.name===E.BROWSER_MAP.firefox||g.DEFAULT_IS_ANALYTICS_OPTED_OUT),W=(0,T.createTransactionHooks)(H,B,_,N,t,j,x.getAPIEnvironment,U),G=(0,v.createStakingHooks)(W,_,x.getAPIEnvironment,C.asyncStakeAnalytics),q=(0,w.createStorageHooks)(I,N,_),X=(0,b.createWalletScreenHooks)(x.getAPIEnvironment,t),z=(0,p.createFungibleHooks)({analytics:t,sdk:i,storage:N,legacyStorage:I,getApiEnvironment:x.getAPIEnvironment,queryClient:_,settingsHooks:V,transactionHooks:W,accountSigner:B,accountHooks:H,priorityFeeService:P,utxoManager:U,vaultProxy:B,chainHooks:R,priceHooks:j,walletScreenHooks:X}),$=(0,a.createCollectibleHooks)(B,N,x.getAPIEnvironment,_,P,H,t,W,z,U,M),Y=(0,m.createSwapperHooks)(B,N,x.getAPIEnvironment,_,t,C.asyncSwapAnalytics,j,z,H,V,W),Q=(0,c.createFiatRampHooks)(x.getAPIEnvironment),J=(0,L.getLedgerWebHIDDependencies)(),Z=(0,f.createHardwareWireHooks)((0,L.getLedgerWebHIDDependencies)(),_),ee=(0,l.createOnboardingHooks)(N,_,t,J,I),te=(0,d.createInterstitialHooks)(N,_,H,O.ENABLE_DEV_SETTINGS||(0,D.isDebugBuild)(),d.Platform.BrowserExt,t),re=(0,S.createShortcutHooks)(x.getAPIEnvironment,_),ne=(0,y.createQuestHooks)(x.getAPIEnvironment,_,H,V),oe=(0,u.createExploreHooks)(N,x.getAPIEnvironment,H,t.getDeviceId(),(()=>(0,C.isFeatureEnabled)("enable-bitcoin-explore")));return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},H),F),R),K),$),z),ee),j),V),G),q),Y),W),Z),Q),te),X),re),ne),oe)}({analytics:C.analytics,chainAvailabilityDeps:{storage:B},fungiblesSdk:K,legacyStorage:new(0,N.LocalStorage),priorityFeeService:R,queryClient:P.queryClient,storage:B,utxoManager:U,vaultProxy:H})})),i.register("4ZT2Y",(function(t,r){e(t.exports,"createAutoConfirmHooks",(function(){return i("iOfbc").createAutoConfirmHooks})),i("jXsMe");i("iOfbc"),i("aKET2"),i("6qtMD")})),i.register("jXsMe",(function(t,r){e(t.exports,"createAutoConfirmHooks",(function(){return i("iOfbc").createAutoConfirmHooks}));i("lvwZP"),i("74ky9"),i("3piFU"),i("auOYu"),i("iOfbc")})),i.register("lvwZP",(function(e,t){i("lBuGR"),i("lDSNw"),i("auOYu")})),i.register("auOYu",(function(t,r){e(t.exports,"useFetchEnabledNetworkIdsForDomain",(function(){return c}),(function(e){return c=e}));var n=i("lNRH9"),o=i("6Nxml"),s=i("gmVmN"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const u=e=>[`auto-confirm:${e}--enabled`];function c(e){return(0,n.useQuery)({queryKey:u((0,s.removeWebPrefixes)(e)),refetchOnMount:"always",cacheTime:3e5,queryFn(){return a(this,void 0,void 0,(function*(){return yield function(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(`${(0,o.getAPIEnvironment)()}/auto-confirm/v1/dapp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e})}),r=yield t.json();return(null==r?void 0:r.supportedChainIds)&&Array.isArray(r.supportedChainIds)?r.supportedChainIds:[]}))}((0,s.removeWebPrefixes)(e))}))}})}})),i.register("74ky9",(function(r,n){e(r.exports,"useAutoConfirmSettingsStore",(function(){return a}));var o=i("9xrNA");const s={settings:void 0,origin:void 0,accountIdentifier:void 0},a=t(o)((e=>Object.assign(Object.assign({},s),{setSettingsForDomain:(t,r,n)=>e({accountIdentifier:t,origin:r,settings:n}),reset:()=>e(s)})))})),i.register("3piFU",(function(r,n){e(r.exports,"useAutoConfirmSettingsProps",(function(){return h}),(function(e){return h=e}));var o=i("6Tvfa"),s=i("lBuGR"),a=i("iPvw0"),u=i("6nLCM"),c=i("lDSNw"),p=i("lQxWu"),f=i("74ky9"),d=i("auOYu"),l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const h=(e,r,n,i,h,y,{origin:g,autoSave:v=!1})=>{const{data:w}=(0,o.useSelectedMultiChainAccount)(e,r,n,!1,i),m=w?w.identifier:"",{get:{data:T},set:{mutateAsync:b}}=(0,a.useAutoConfirmSettings)(r,y,m,g),S=t(p)(T),E=(0,o.useSelectedNetworks)(e,r,n,i),{data:x=[],isLoading:A}=(0,d.useFetchEnabledNetworkIdsForDomain)(g),{data:[I,O]}=(0,s.useFeatureFlags)(["kill-automatic-approval","enable-automatic-approval-for-all-dapps"]),P=x.length>0,k=!I&&(O||P),{shadowSettings:_,setShadowSettings:N,reset:C,origin:D,accountIdentifier:L}=(0,f.useAutoConfirmSettingsStore)((e=>({shadowSettings:e.settings,setShadowSettings:e.setSettingsForDomain,origin:e.origin,accountIdentifier:e.accountIdentifier,reset:e.reset})));t(c).useEffect((()=>{g==D&&m==L||C()}),[g,D,C,m,L]),t(c).useEffect((()=>{k&&null!=T&&(null!=T&&null==_&&N(m,g,T),null==T||!v||(0,u.dequal)(T,_)||(0,u.dequal)(T,S)||N(m,g,T))}),[T,N,_,g,m,k,v,D,L,S]);const B=t(c).useMemo((()=>(0,o.isHardwareWalletAccountType)(null==w?void 0:w.type)),[w]),R=t(c).useMemo((()=>O?E:E.filter((e=>x.includes(e)))),[E,x,O]),H=t(c).useCallback((e=>{var t;return e?!!(null===(t=null==_?void 0:_.networks)||void 0===t?void 0:t[e]):R.some((e=>{var t;return!!(null===(t=null==_?void 0:_.networks)||void 0===t?void 0:t[e])}))}),[R,_]),U=t(c).useCallback((e=>{var t,r;if(!k||B)return;const n=JSON.parse(JSON.stringify(_));if((null==n?void 0:n.networks)&&null==(null===(t=null==n?void 0:n.networks)||void 0===t?void 0:t[e]))n.networks[e]=!0;else{if(!(null==n?void 0:n.networks))return!1;n.networks[e]=!n.networks[e]}n.sessionStartTime=Date.now(),n.maxSessionDuration=a.MAX_SESSION_DURATION,N(m,g,n),v&&b(n);const o=null!==(r=n.networks[e])&&void 0!==r&&r;return h.onAutoConfirmSettingsChanged({origin:g,networkID:e,enabled:o,sessionStartTime:o?null==n?void 0:n.sessionStartTime:void 0,maxSessionDuration:o?null==n?void 0:n.maxSessionDuration:void 0,view:v?"TRUSTED_APP":"NOTIFICATION"}),o}),[k,B,_,N,m,g,v,h,b]),M=t(c).useCallback((()=>{if(!k||null==_||B)return;const e=!H(),t=JSON.parse(JSON.stringify(_));for(const r of R)t.networks[r]=e;return t.sessionStartTime=Date.now(),t.maxSessionDuration=a.MAX_SESSION_DURATION,N(m,g,JSON.parse(JSON.stringify(t))),v&&b(t),h.onAutoConfirmSettingsChanged({origin:g,networkID:"all",enabled:e,sessionStartTime:e?null==t?void 0:t.sessionStartTime:void 0,maxSessionDuration:e?null==t?void 0:t.maxSessionDuration:void 0,view:v?"TRUSTED_APP":"NOTIFICATION"}),e}),[k,_,B,H,N,m,g,v,h,R,b]),F=t(c).useCallback((()=>l(void 0,void 0,void 0,(function*(){k&&null!=_&&!B&&(yield b(_))}))),[_,b,k,B]),K=t(c).useMemo((()=>{var e;return null!=(null==_?void 0:_.sessionStartTime)?new Date((null==_?void 0:_.sessionStartTime)+1e3*(null!==(e=null==_?void 0:_.maxSessionDuration)&&void 0!==e?e:0)):null}),[null==_?void 0:_.sessionStartTime,null==_?void 0:_.maxSessionDuration]),j=A;return t(c).useMemo((()=>({enabled:k,isHardwareAccount:B,showAutoConfirmRow:k&&!B,toggle:U,networkIDs:R,isActive:H,untilDate:K,settings:_,toggleAll:M,save:F,resetShadowSettings:C,loading:j,isAutoConfirmIsTouched:!(0,u.dequal)(_,T)})),[k,B,U,R,H,K,_,M,F,C,j,T])}})),i.register("lQxWu",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=i("lDSNw");e.exports.default=function(e){var t=r.useRef();return r.useEffect((function(){t.current=e})),t.current}})),i.register("iOfbc",(function(t,r){e(t.exports,"createAutoConfirmHooks",(function(){return a}));var n=i("6Tvfa"),o=i("6qtMD"),s=i("3piFU");function a(e,t,r,i,a){const u=new(0,n.AccountAnalytics)(i),c=new(0,o.AutoConfirmAnalytics)(i);return{useAutoConfirmSettingsProps:n=>(0,s.useAutoConfirmSettingsProps)(e,t,r,u,c,a,n)}}})),i.register("6qtMD",(function(t,r){e(t.exports,"AutoConfirmAnalytics",(function(){return u}),(function(e){return u=e}));var n,o=i("4yY1D"),s=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},a=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class u{onAutoConfirmSettingsChanged({origin:e,networkID:t,enabled:r,sessionStartTime:i,maxSessionDuration:s,view:u}){o.telemetry.addBreadcrumb(`Auto-Confirm: ${r?"Enabling":"Disabling"} network ID ${t}`,o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,n,"f").capture("autoConfirmSettingsChanged",{data:{origin:e,networkId:t,enabled:r,sessionStartTime:r?i:void 0,maxSessionDuration:r?s:void 0,view:u}})}transactionAutoConfirmed(e,t){var r;const i={type:"transaction",sequenceId:e,data:t};return(null===(r=t.autoConfirm.auditTrail)||void 0===r?void 0:r.length)&&t.autoConfirm.auditTrail.length<7&&(t.autoConfirm.suspectSettingsTamper=!0),o.telemetry.addBreadcrumb(`Auto-Confirm: transaction on origin ${t.origin} for network ${t.networkId} auto-confirmed`,o.FeatureTag.AutoConfirm,o.Severity.Info),t.autoConfirm.suspectSettingsTamper&&o.telemetry.addBreadcrumb("Auto-Confirm: suspected tampering with settings...",o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,n,"f").capture("transactionAutoConfirmed",i)}messageAutoConfirmed(e,t){var r;const i={type:"message",sequenceId:e,data:t};return(null===(r=t.autoConfirm.auditTrail)||void 0===r?void 0:r.length)&&t.autoConfirm.auditTrail.length<7&&(t.autoConfirm.suspectSettingsTamper=!0),o.telemetry.addBreadcrumb(`Auto-Confirm: message on origin ${t.origin} for network ${t.networkId} auto-confirmed`,o.FeatureTag.AutoConfirm,o.Severity.Info),t.autoConfirm.suspectSettingsTamper&&o.telemetry.addBreadcrumb("Auto-Confirm: suspected tampering with settings...",o.FeatureTag.AutoConfirm,o.Severity.Info),a(this,n,"f").capture("transactionAutoConfirmed",i)}constructor(e){n.set(this,void 0),s(this,n,e,"f")}}n=new WeakMap})),i.register("aKET2",(function(e,t){i("4chX7"),i("iPvw0"),i("4raQz"),i("gmVmN"),i("3YrMy")})),i.register("3YrMy",(function(t,r){e(t.exports,"isDappWhitelistedForTransaction",(function(){return u}),(function(e){return u=e})),e(t.exports,"isDappWhitelistedForMessage",(function(){return c}),(function(e){return c=e}));var n=i("belzv"),o=i("6Nxml"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a=e=>`${(0,o.getAPIEnvironment)()}/auto-confirm/v1/${e}`;function u(e){return s(this,void 0,void 0,(function*(){if(n.Chains.isEVMNetworkID(e.chainId)){const t=yield fetch(a("transaction"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({txObjects:e.txObjects,chainId:e.chainId,domain:e.domain})}),r=yield t.json();return!0===(null==r?void 0:r.isEligible)}if(n.Chains.isSolanaNetworkID(e.chainId)){const t=yield fetch(a("transaction"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactions:e.transactions,chainId:e.chainId,domain:e.domain})}),r=yield t.json();return!0===(null==r?void 0:r.isEligible)}return!1}))}function c(e){return s(this,void 0,void 0,(function*(){if(n.Chains.isEVMNetworkID(e.chainId)){const t=JSON.parse(JSON.stringify(e.data));delete t.message,delete t.primaryType,delete t.types;const r=yield fetch(a("message"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chainId:e.chainId,domain:e.domain,data:[t]})}),n=yield r.json();return!0===(null==n?void 0:n.isEligible)}return!1}))}})),i.register("hsoDC",(function(t,r){e(t.exports,"refetchLedgerAddresses",(function(){return i("7wUYG").refetchLedgerAddresses})),e(t.exports,"resetLedgerAddresses",(function(){return i("7wUYG").resetLedgerAddresses})),e(t.exports,"setLedgerTransportStateOverride",(function(){return i("7wUYG").setLedgerTransportStateOverride})),e(t.exports,"createHardwareWireHooks",(function(){return i("cHdXl").createHardwareWireHooks})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return i("lMux6").DEFAULT_LEDGER_TRANSPORT_STATE})),e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return i("lMux6").LEDGER_NOT_CONNECTED_STATE})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return i("lMux6").LEDGER_RECONNECTING_STATE})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return i("lMux6").LEDGER_WAITING_FOR_APPROVAL_STATE})),e(t.exports,"LedgerApp",(function(){return i("dPPBv").LedgerApp})),e(t.exports,"LedgerLockedError",(function(){return i("9JfiT").LedgerLockedError})),e(t.exports,"getLedgerTransportState",(function(){return i("7as68").getLedgerTransportState})),e(t.exports,"deriveLedgerAddresses",(function(){return i("kr4Fg").deriveLedgerAddresses})),e(t.exports,"getLedgerAppDisplayName",(function(){return i("iG6SM").getLedgerAppDisplayName})),e(t.exports,"getLedgerAppForAddressType",(function(){return i("iG6SM").getLedgerAppForAddressType})),e(t.exports,"getLedgerAppForNetworkID",(function(){return i("iG6SM").getLedgerAppForNetworkID})),e(t.exports,"getAddressTypeFromDerivationPathType",(function(){return i("a54cU").getAddressTypeFromDerivationPathType}));i("cHdXl"),i("lMux6"),i("dPPBv");i("5ARdl");i("9JfiT"),i("7as68"),i("kr4Fg"),i("1Jx7r"),i("fB0uY"),i("iG6SM"),i("iqxmM"),i("a54cU")})),i.register("cHdXl",(function(t,r){e(t.exports,"createHardwareWireHooks",(function(){return u}));i("c8GJp");var n=i("gw8mx"),o=i("4cs7m"),s=(i("02DDj"),i("3umQi")),a=i("3KU10");i("3R3wS");function u(e,t){const{defaultTransportTimeout:r}=e;return{useIsLedgerSupported:()=>(0,n.default)(e),useLedgerWireTransportState:(r,n,o)=>(0,s.useLedgerWireTransportState)(e,t,r,n,o),useRequestLedgerPermission:(r,n)=>(0,a.default)(e,t,r,n),useLedgerAddresses:(e,n,i,s)=>(0,o.default)(r,t,e,n,i,s)}}})),i.register("c8GJp",(function(t,r){e(t.exports,"useConnectedLedgerDeviceMetadata",(function(){return a}));var n=i("lNRH9"),o=i("iTpzE"),s=i("4ODJX");const a=(e,t)=>{const r=!!t,i=s.hardwareQueryKeys.accountConnectedDevice(t);return(0,n.useQuery)({enabled:r,queryKey:i,queryFn:()=>(0,o.getConnectedLedgerDeviceMetadata)(e,null!=t?t:"")})}})),i.register("iTpzE",(function(t,r){e(t.exports,"getConnectedLedgerDeviceMetadata",(function(){return u}),(function(e){return u=e}));var n=i("6Tvfa"),o=i("4yY1D"),s=i("9JfiT"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const u=(e,t)=>a(void 0,void 0,void 0,(function*(){var r;o.telemetry.addBreadcrumb(o.FeatureTag.Ledger,`Getting Connected Ledger Device metadata for account: ${t}`,o.Severity.Info);const i=yield(0,n.getMultiChainAccountMetadata)(e,t),a=null===(r=null==i?void 0:i.connectedDevices)||void 0===r?void 0:r.find((e=>e.deviceType===n.DeviceType.Ledger&&e.connectionType===n.ConnectionType.BLE));if(!a)throw new(0,s.AccountMetadataNoConnectedDevicesError);return a}))})),i.register("9JfiT",(function(t,r){e(t.exports,"LedgerNotConnectedError",(function(){return o})),e(t.exports,"LedgerMultipleAppsRequestedError",(function(){return i})),e(t.exports,"LedgerLockedError",(function(){return s})),e(t.exports,"LedgerDuplicateAddressReceivedError",(function(){return a})),e(t.exports,"AccountMetadataNoConnectedDevicesError",(function(){return u}));class n extends Error{constructor(e){super(e)}}class o extends n{constructor(e="Ledger not connected."){super(e)}}class i extends n{constructor(e="Multiple apps requested from Ledger. Only request one at a time."){super(e)}}class s extends n{constructor(e="Ledger is locked, unlock to get addresses or sign."){super(e)}}class a extends n{constructor(e="Duplicate ledger address received"){super(e)}}class u extends n{constructor(e="No connected devices."){super(e)}}})),i.register("4ODJX",(function(t,r){e(t.exports,"HARDWARE_BASE_QUERY_KEY",(function(){return n})),e(t.exports,"hardwareQueryKeys",(function(){return o}));const n="@phantom/hardware",o={isLedgerSupported:()=>[`${n}:is-ledger-supported`],ledgerTransportState:()=>[`${n}:ledger-transport-state`],ledgerAddress:(e,t)=>[`${n}:ledger-address`,{chainType:e,derivationPath:t}],ledgerAddresses:(e=[],t)=>[`${n}:ledger-addresses`,{derivationPathParams:e,enableLedgerXPubDerivation:t}],requestLedgerPermission:()=>[`${n}:request-ledger-permission`],accountConnectedDevice:e=>[`${n}:account-connected-device`,{accountIdentifier:e}]}})),i.register("gw8mx",(function(t,r){e(t.exports,"default",(function(){return a}),(function(e){return a=e}));var n=i("lNRH9"),o=i("4ODJX"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},a=e=>{const t=o.hardwareQueryKeys.isLedgerSupported();return(0,n.useQuery)({queryKey:t,queryFn:()=>s(void 0,void 0,void 0,(function*(){return e.isSupported()}))})}})),i.register("4cs7m",(function(t,r){e(t.exports,"default",(function(){return f}),(function(e){return f=e}));var n=i("gd9Oy"),o=i("lNRH9"),s=i("9JfiT"),a=i("iG6SM"),u=i("kr4Fg"),c=i("4ODJX"),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},f=(e,t,r,i=[],f=!1,d=!1,l=(()=>{}))=>{var h;const y=(0,a.getLedgerAppForAddressType)(n.AddressTypes.getAddressType(i[0].pathType)),g=r.isConnected&&i.length>0&&y===(null===(h=r.selectedApp)||void 0===h?void 0:h.app),v=c.hardwareQueryKeys.ledgerAddresses(i,d);return(0,o.useQuery)({enabled:g,queryKey:v,queryFn:()=>p(void 0,void 0,void 0,(function*(){const r=yield t.getQueryData(c.hardwareQueryKeys.ledgerTransportState());if(!r)throw new(0,s.LedgerNotConnectedError);return(0,u.deriveLedgerAddresses)({transportTimeout:e,state:r,derivationPathParams:i,enableDebugLogs:f,enableLedgerXPubDerivation:d,onSuccess:l})})),retry:!1})}})),i.register("iG6SM",(function(t,r){e(t.exports,"getLedgerAppDisplayName",(function(){return a})),e(t.exports,"getLedgerAppForNetworkID",(function(){return u})),e(t.exports,"getLedgerAppForAddressType",(function(){return c}));var n=i("belzv"),o=i("gd9Oy"),s=i("dPPBv");const a=e=>{switch(e){case s.LedgerApp.Bitcoin:return"Bitcoin";case s.LedgerApp.EVM:return"Ethereum";case s.LedgerApp.Solana:return"Solana"}},u=e=>{const t=n.Chains.getAddressTypes(e);return c(t[0])},c=e=>{switch(e){case o.AddressType.BitcoinTaproot:case o.AddressType.BitcoinNativeSegwit:case o.AddressType.BitcoinNestedSegwit:case o.AddressType.BitcoinLegacy:return s.LedgerApp.Bitcoin;case o.AddressType.EVM:return s.LedgerApp.EVM;case o.AddressType.Solana:return s.LedgerApp.Solana}}})),i.register("dPPBv",(function(t,r){e(t.exports,"LedgerApp",(function(){return n}));var n,o,s=i("7pPsM");(o=n||(n={})).Bitcoin="Bitcoin",o.EVM="EVM",o.Solana="Solana";const a=s.z.string().regex(/^[0-9A-Fa-f]*$/,{message:"String must have only valid hex characters"});s.z.object({publicKey:a,chainCode:a}),s.z.object({name:s.z.string(),id:s.z.string().min(1),rssi:s.z.number().int()}),s.z.union([s.z.literal("low"),s.z.literal("medium"),s.z.literal("high")])})),i.register("kr4Fg",(function(t,r){e(t.exports,"deriveLedgerAddresses",(function(){return v}),(function(e){return v=e}));var n=i("d0go3"),o=i("gd9Oy"),s=i("4yY1D"),a=i("4y59b"),u=i("9JfiT"),c=i("71Me8"),p=i("fALED"),f=i("hOTYq"),d=i("hgJF4"),l=i("keP0C"),h=i("iG6SM"),y=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const g=(e,t,r,n)=>{const i=new Set;return(s,p)=>y(void 0,void 0,void 0,(function*(){if(!t.isConnected)throw new(0,u.LedgerNotConnectedError);const f=e;try{const e=yield(0,a.withRetry)((()=>y(void 0,void 0,void 0,(function*(){const e=o.AddressTypes.getAddressType(s.pathType),r=yield(0,a.withTimeout)((0,c.getLedgerAddress)(t.transport,e,p,n),3e3);if(i.has(r.address))throw new(0,u.LedgerDuplicateAddressReceivedError);return r}))),(e=>{const t=e instanceof u.LedgerDuplicateAddressReceivedError;t&&(0,d.debugLog)(r,`❌ Duplicate address detected, retrying in ${f}ms...`);const n="InvalidChannel"===e.id;return n&&(0,d.debugLog)(r,`Invalid channel, trying again in ${f}ms...`),t||n}),3,f);return(0,d.debugLog)(r,`✅ Received address for ${p}: ${e.address}`),i.add(e.address),e}catch(e){throw yield(0,a.delayAsync)(1e3),e}}))},v=({transportTimeout:e,state:t,derivationPathParams:r,enableDebugLogs:i,enableLedgerXPubDerivation:a,onSuccess:c})=>y(void 0,void 0,void 0,(function*(){const v=Date.now();(e=>{let t,r=!0;for(const n of e){const e=o.AddressTypes.getAddressType(n.pathType),i=(0,h.getLedgerAppForAddressType)(e);if(t?r=r&&t===i:t=i,!r)throw new(0,u.LedgerMultipleAppsRequestedError)}})(r);const w=a?((e,t,r)=>{const i=g(e,t,r,!0),a={};return(e,u)=>y(void 0,void 0,void 0,(function*(){const c=o.AddressTypes.getAddressType(e.pathType);switch(c){case o.AddressType.BitcoinTaproot:case o.AddressType.BitcoinNativeSegwit:case o.AddressType.BitcoinNestedSegwit:case o.AddressType.BitcoinLegacy:{let n=a[e.pathType];if(!n)try{n=yield(0,p.createBitcoinChildAddressDeriver)(t,e.pathType),a[e.pathType]=n}catch(t){return s.telemetry.captureError(new Error(`error creating xpub from derivation path: ${u}. Reason: ${t.message}`),s.FeatureTag.Ledger),i(e,u)}const o=n(e.index);return(0,d.debugLog)(r,`⭐️ Derived address with xpub for ${u}: ${o.address}`),{type:"address",addressType:c,address:o.address,publicKey:o.publicKey}}case o.AddressType.Solana:return i(e,u);case o.AddressType.EVM:if(e.pathType===n.DerivationPathType.Bip44RootEthereum)return i(e,u);{let t=a[e.pathType];if(!t)try{const r=(0,l.getRelativeDerivationPath)("grandparent",e.pathType),n=yield i(e,r);if(n.addressType!==c||"chain-code"!==n.type)throw new Error(`invalid response from Ledger requesting grandparent path: ${r}`);const o=(0,l.getRelativeDerivationPath)("parent",e.pathType),s=yield i(e,o);if(s.addressType!==c||"chain-code"!==s.type)throw new Error(`invalid response from Ledger requesting parent path: ${r}`);t=(0,f.createEthereumChildAddressDeriver)(n,s),a[e.pathType]=t}catch(t){return s.telemetry.captureError(new Error(`error creating xpub from derivation path: ${u}. Reason: ${t.message}`),s.FeatureTag.Ledger),i(e,u)}const n=t(e.index);return(0,d.debugLog)(r,`⭐️ Derived address with xpub for ${u}: ${n.address}`),{type:"address",addressType:c,address:n.address,publicKey:n.publicKey}}}}))})(e,t,i):g(e,t,i,!1),m={};for(const e of r){const t=(0,n.getDerivationPath)(e),r=yield w(e,t);m[t]=r}const T=(Date.now()-v)/1e3;return(0,d.debugLog)(i,`✅ Finished requesting addresses for ${r.length} derivation paths. Time: ${T} s`),c(T),m}))})),i.register("71Me8",(function(r,n){e(r.exports,"getLedgerAddress",(function(){return h}),(function(e){return h=e}));var o=i("d0go3"),s=i("belzv"),a=i("gd9Oy"),u=i("13Nf3"),c=i("9JfiT"),p=i("keP0C"),f=i("fALED"),d=i("9tNa2"),l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const h=(e,r,n,i)=>l(void 0,void 0,void 0,(function*(){const l=n.replace("m/","");try{switch(r){case a.AddressType.BitcoinTaproot:case a.AddressType.BitcoinNativeSegwit:case a.AddressType.BitcoinNestedSegwit:case a.AddressType.BitcoinLegacy:{const t=yield(0,d.getBitcoinLedgerApp)(e),i=a.AddressTypes[r].defaultDerivationPathType,u=(0,o.parseDerivationPath)(n).index,c=(0,p.getRelativeDerivationPath)("parent",i),l=yield t.getExtendedPubkey(c),h=(yield(0,f.createHDNodeFromXpub)(l,"mainnet")).derivePath(`${u}`);return{type:"chain-code",addressType:r,address:(0,a.publicKeyToAddress)({publicKey:new Uint8Array(h.publicKey),addressType:r,networkID:s.BitcoinNetworkID.Mainnet}),publicKey:h.publicKey.toString("hex"),chainCode:h.chainCode.toString("hex")}}case a.AddressType.Solana:{const n=yield(0,d.getSolanaLedgerApp)(e),{address:o}=yield n.getAddress(l);return{type:"address",addressType:r,address:t(u).encode(o),publicKey:o.toString("hex")}}case a.AddressType.EVM:{const t=yield(0,d.getEthereumLedgerApp)(e),{publicKey:n,address:o,chainCode:s}=yield t.getAddress(l,!1,i);if(i){if(!s)throw new Error("Chain code is requested from Ledger device, but no chain code was received.");return{type:"chain-code",addressType:r,address:o,publicKey:n,chainCode:s}}return{type:"address",addressType:r,address:o,publicKey:n}}}}catch(e){throw"TransportLocked"===e.id?new(0,c.LedgerLockedError):e}}))})),i.register("keP0C",(function(t,r){e(t.exports,"getRelativeDerivationPath",(function(){return o}));var n=i("d0go3");const o=(e,t)=>{switch(e){case"grandparent":switch(t){case n.DerivationPathType.BitcoinTaproot:return"m/86'/0'/0'";case n.DerivationPathType.BitcoinNativeSegwit:return"m/84'/0'/0'";case n.DerivationPathType.BitcoinNestedSegwit:return"m/46'/0'/0'";case n.DerivationPathType.BitcoinLegacy:return"m/44'/0'/0'";case n.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'";case n.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'";case n.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'"}break;case"parent":switch(t){case n.DerivationPathType.BitcoinTaproot:return"m/86'/0'/0'/0";case n.DerivationPathType.BitcoinNativeSegwit:return"m/84'/0'/0'/0";case n.DerivationPathType.BitcoinNestedSegwit:return"m/46'/0'/0'/0";case n.DerivationPathType.BitcoinLegacy:return"m/44'/0'/0'/0";case n.DerivationPathType.Bip44Ethereum:return"m/44'/60'/0'/0";case n.DerivationPathType.Bip44EthereumSecondary:return"m/44'/60'/1'/0";case n.DerivationPathType.Bip44EthereumTertiary:return"m/44'/60'/2'/0"}}}})),i.register("fALED",(function(t,r){e(t.exports,"createHDNodeFromXpub",(function(){return d}),(function(e){return d=e})),e(t.exports,"createBitcoinChildAddressDeriver",(function(){return l}),(function(e){return l=e}));var n=i("gd9Oy"),o=i("hbTYb"),s=i("9JfiT"),a=i("a54cU"),u=i("keP0C"),c=i("9tNa2"),p=i("6rT8n").Buffer,f=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const d=(e,t)=>f(void 0,void 0,void 0,(function*(){const{default:r}=yield i("cN3SA");return r(yield Promise.resolve(i("4sHMz"))).fromBase58(e,"mainnet"===t?o.networks.bitcoin:o.networks.testnet)})),l=(e,t)=>f(void 0,void 0,void 0,(function*(){if(!e.isConnected)throw new(0,s.LedgerNotConnectedError);const r=yield(0,c.getBitcoinLedgerApp)(e.transport),o=(0,u.getRelativeDerivationPath)("parent",t),i=yield r.getExtendedPubkey(o),f=yield d(i,"mainnet");return e=>{const r=new Uint8Array(f.derivePath(`${e}`).publicKey),o=(0,n.publicKeyToAddress)({publicKey:r,addressType:(0,a.getAddressTypeFromDerivationPathType)(t)});return{publicKey:p.from(r).toString("hex"),address:o}}}))})),i.register("hbTYb",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.initEccLib=e.exports.Transaction=e.exports.opcodes=e.exports.Psbt=e.exports.Block=e.exports.script=e.exports.payments=e.exports.networks=e.exports.crypto=e.exports.address=void 0;var r=i("3Z8KF");e.exports.address=r;var n=i("3ILtZ");e.exports.crypto=n;var o=i("5dxgn");e.exports.networks=o;var s=i("2Yfad");e.exports.payments=s;var a=i("kNEDo");e.exports.script=a;var u=i("3f6sT");Object.defineProperty(e.exports,"Block",{enumerable:!0,get:function(){return u.Block}});var c=i("bHPtT");Object.defineProperty(e.exports,"Psbt",{enumerable:!0,get:function(){return c.Psbt}});var p=i("j9Zcj");Object.defineProperty(e.exports,"opcodes",{enumerable:!0,get:function(){return p.OPS}});var f=i("cqTLw");Object.defineProperty(e.exports,"Transaction",{enumerable:!0,get:function(){return f.Transaction}});var d=i("iXHS2");Object.defineProperty(e.exports,"initEccLib",{enumerable:!0,get:function(){return d.initEccLib}})})),i.register("3Z8KF",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.toOutputScript=e.exports.fromOutputScript=e.exports.toBech32=e.exports.toBase58Check=e.exports.fromBech32=e.exports.fromBase58Check=void 0;var n=i("5dxgn"),o=i("2Yfad"),s=i("kNEDo"),a=i("7LSV8"),u=i("5frS9"),c=i("f8pp6");const p=40,f=2,d=16,l=2,h=80,y="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function g(e){const t=r.from(c.decode(e));if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function v(e){let t,n;try{t=u.bech32.decode(e)}catch(e){}if(t){if(n=t.words[0],0!==n)throw new TypeError(e+" uses wrong encoding")}else if(t=u.bech32m.decode(e),n=t.words[0],0===n)throw new TypeError(e+" uses wrong encoding");const o=u.bech32.fromWords(t.words.slice(1));return{version:n,prefix:t.prefix,data:r.from(o)}}function w(e,t,r){const n=u.bech32.toWords(e);return n.unshift(t),0===t?u.bech32.encode(r,n):u.bech32m.encode(r,n)}e.exports.fromBase58Check=g,e.exports.fromBech32=v,e.exports.toBase58Check=function(e,t){(0,a.typeforce)((0,a.tuple)(a.Hash160bit,a.UInt8),arguments);const n=r.allocUnsafe(21);return n.writeUInt8(t,0),e.copy(n,1),c.encode(n)},e.exports.toBech32=w,e.exports.fromOutputScript=function(e,t){t=t||n.bitcoin;try{return o.p2pkh({output:e,network:t}).address}catch(e){}try{return o.p2sh({output:e,network:t}).address}catch(e){}try{return o.p2wpkh({output:e,network:t}).address}catch(e){}try{return o.p2wsh({output:e,network:t}).address}catch(e){}try{return o.p2tr({output:e,network:t}).address}catch(e){}try{return function(e,t){const r=e.slice(2);if(r.length<f||r.length>p)throw new TypeError("Invalid program length for segwit address");const n=e[0]-h;if(n<l||n>d)throw new TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(y),w(r,n,t.bech32)}(e,t)}catch(e){}throw new Error(s.toASM(e)+" has no matching Address")},e.exports.toOutputScript=function(e,t){let r,i;t=t||n.bitcoin;try{r=g(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return o.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return o.p2sh({hash:r.hash}).output}else{try{i=v(e)}catch(e){}if(i){if(i.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===i.version){if(20===i.data.length)return o.p2wpkh({hash:i.data}).output;if(32===i.data.length)return o.p2wsh({hash:i.data}).output}else if(1===i.version){if(32===i.data.length)return o.p2tr({pubkey:i.data}).output}else if(i.version>=l&&i.version<=d&&i.data.length>=f&&i.data.length<=p)return console.warn(y),s.compile([i.version+h,i.data])}}throw new Error(e+" has no matching Script")}})),i.register("5dxgn",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.testnet=e.exports.regtest=e.exports.bitcoin=void 0,e.exports.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},e.exports.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},e.exports.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}})),i.register("2Yfad",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2tr=e.exports.p2wsh=e.exports.p2wpkh=e.exports.p2sh=e.exports.p2pkh=e.exports.p2pk=e.exports.p2ms=e.exports.embed=void 0;var r=i("gTV2q");Object.defineProperty(e.exports,"embed",{enumerable:!0,get:function(){return r.p2data}});var n=i("c7kHW");Object.defineProperty(e.exports,"p2ms",{enumerable:!0,get:function(){return n.p2ms}});var o=i("739gI");Object.defineProperty(e.exports,"p2pk",{enumerable:!0,get:function(){return o.p2pk}});var s=i("ikIv6");Object.defineProperty(e.exports,"p2pkh",{enumerable:!0,get:function(){return s.p2pkh}});var a=i("87mwx");Object.defineProperty(e.exports,"p2sh",{enumerable:!0,get:function(){return a.p2sh}});var u=i("aqs4I");Object.defineProperty(e.exports,"p2wpkh",{enumerable:!0,get:function(){return u.p2wpkh}});var c=i("9Zg21");Object.defineProperty(e.exports,"p2wsh",{enumerable:!0,get:function(){return c.p2wsh}});var p=i("e0paw");Object.defineProperty(e.exports,"p2tr",{enumerable:!0,get:function(){return p.p2tr}})})),i.register("gTV2q",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2data=void 0;var r=i("5dxgn"),n=i("kNEDo"),o=i("7LSV8"),s=i("2LODX");const a=n.OPS;e.exports.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),data:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer))},e);const i={name:"embed",network:e.network||r.bitcoin};if(s.prop(i,"output",(()=>{if(e.data)return n.compile([a.OP_RETURN].concat(e.data))})),s.prop(i,"data",(()=>{if(e.output)return n.decompile(e.output).slice(1)})),t.validate&&e.output){const t=n.decompile(e.output);if(t[0]!==a.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(o.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.data,i.data))throw new TypeError("Data mismatch")}return Object.assign(i,e)}})),i.register("kNEDo",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.signature=e.exports.number=e.exports.isCanonicalScriptSignature=e.exports.isDefinedHashType=e.exports.isCanonicalPubKey=e.exports.toStack=e.exports.fromASM=e.exports.toASM=e.exports.decompile=e.exports.compile=e.exports.countNonPushOnlyOPs=e.exports.isPushOnly=e.exports.OPS=void 0;var n=i("2I3MB"),o=i("j9Zcj");Object.defineProperty(e.exports,"OPS",{enumerable:!0,get:function(){return o.OPS}});var s=i("9shk1"),a=i("dfv0i"),u=i("9CS5m"),c=i("7LSV8");const{typeforce:p}=c,f=o.OPS.OP_RESERVED;function d(e){return c.Buffer(e)||function(e){return c.Number(e)&&(e===o.OPS.OP_0||e>=o.OPS.OP_1&&e<=o.OPS.OP_16||e===o.OPS.OP_1NEGATE)}(e)}function l(e){return c.Array(e)&&e.every(d)}function h(e){return 0===e.length?o.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?f+e[0]:129===e[0]?o.OPS.OP_1NEGATE:void 0:void 0}function y(e){return r.isBuffer(e)}function g(e){return r.isBuffer(e)}function v(e){if(y(e))return e;p(c.Array,e);const t=e.reduce(((e,t)=>g(t)?1===t.length&&void 0!==h(t)?e+1:e+s.encodingLength(t.length)+t.length:e+1),0),n=r.allocUnsafe(t);let o=0;if(e.forEach((e=>{if(g(e)){const t=h(e);if(void 0!==t)return n.writeUInt8(t,o),void(o+=1);o+=s.encode(n,e.length,o),e.copy(n,o),o+=e.length}else n.writeUInt8(e,o),o+=1})),o!==n.length)throw new Error("Could not decode chunks");return n}function w(e){if(t=e,c.Array(t))return e;var t;p(c.Buffer,e);const r=[];let n=0;for(;n<e.length;){const t=e[n];if(t>o.OPS.OP_0&&t<=o.OPS.OP_PUSHDATA4){const t=s.decode(e,n);if(null===t)return null;if(n+=t.size,n+t.number>e.length)return null;const o=e.slice(n,n+t.number);n+=t.number;const i=h(o);void 0!==i?r.push(i):r.push(o)}else r.push(t),n+=1}return r}function m(e){const t=-129&e;return t>0&&t<4}e.exports.isPushOnly=l,e.exports.countNonPushOnlyOPs=function(e){return e.length-e.filter(d).length},e.exports.compile=v,e.exports.decompile=w,e.exports.toASM=function(e){return y(e)&&(e=w(e)),e.map((e=>{if(g(e)){const t=h(e);if(void 0===t)return e.toString("hex");e=t}return o.REVERSE_OPS[e]})).join(" ")},e.exports.fromASM=function(e){return p(c.String,e),v(e.split(" ").map((e=>void 0!==o.OPS[e]?o.OPS[e]:(p(c.Hex,e),r.from(e,"hex")))))},e.exports.toStack=function(e){return e=w(e),p(l,e),e.map((e=>g(e)?e:e===o.OPS.OP_0?r.allocUnsafe(0):a.encode(e-f)))},e.exports.isCanonicalPubKey=function(e){return c.isPoint(e)},e.exports.isDefinedHashType=m,e.exports.isCanonicalScriptSignature=function(e){return!!r.isBuffer(e)&&(!!m(e[e.length-1])&&n.check(e.slice(0,-1)))},e.exports.number=a,e.exports.signature=u})),i.register("2I3MB",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encode=e.exports.decode=e.exports.check=void 0,e.exports.check=function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;const t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;const r=e[5+t];return 0!==r&&(6+t+r===e.length&&(!(128&e[4])&&(!(t>1&&0===e[4]&&!(128&e[5]))&&(!(128&e[t+6])&&!(r>1&&0===e[t+6]&&!(128&e[t+7]))))))},e.exports.decode=function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");const t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");const r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},e.exports.encode=function(e,t){const n=e.length,o=t.length;if(0===n)throw new Error("R length is zero");if(0===o)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(o>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(n>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(o>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");const i=r.allocUnsafe(6+n+o);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+n]=2,i[5+n]=t.length,t.copy(i,6+n),i}})),i.register("j9Zcj",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.REVERSE_OPS=e.exports.OPS=void 0;const r={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};e.exports.OPS=r;const n={};e.exports.REVERSE_OPS=n;for(const e of Object.keys(r)){n[r[e]]=e}})),i.register("9shk1",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decode=e.exports.encode=e.exports.encodingLength=void 0;var r=i("j9Zcj");function n(e){return e<r.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}e.exports.encodingLength=n,e.exports.encode=function(e,t,o){const i=n(t);return 1===i?e.writeUInt8(t,o):2===i?(e.writeUInt8(r.OPS.OP_PUSHDATA1,o),e.writeUInt8(t,o+1)):3===i?(e.writeUInt8(r.OPS.OP_PUSHDATA2,o),e.writeUInt16LE(t,o+1)):(e.writeUInt8(r.OPS.OP_PUSHDATA4,o),e.writeUInt32LE(t,o+1)),i},e.exports.decode=function(e,t){const n=e.readUInt8(t);let o,i;if(n<r.OPS.OP_PUSHDATA1)o=n,i=1;else if(n===r.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;o=e.readUInt8(t+1),i=2}else if(n===r.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;o=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(n!==r.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");o=e.readUInt32LE(t+1),i=5}return{opcode:n,number:o,size:i}}})),i.register("dfv0i",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encode=e.exports.decode=void 0,e.exports.decode=function(e,t,r){t=t||4,r=void 0===r||r;const n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-(4294967296*(-129&r)+t):4294967296*r+t}let o=0;for(let t=0;t<n;++t)o|=e[t]<<8*t;return 128&e[n-1]?-(o&~(128<<8*(n-1))):o},e.exports.encode=function(e){let t=Math.abs(e);const n=(o=t)>2147483647?5:o>8388607?4:o>32767?3:o>127?2:o>0?1:0;var o;const i=r.allocUnsafe(n),s=e<0;for(let e=0;e<n;++e)i.writeUInt8(255&t,e),t>>=8;return 128&i[n-1]?i.writeUInt8(s?128:0,n-1):s&&(i[n-1]|=128),i}})),i.register("9CS5m",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encode=e.exports.decode=void 0;var n=i("2I3MB"),o=i("7LSV8");const{typeforce:s}=o,a=r.alloc(1,0);function u(e){let t=0;for(;0===e[t];)++t;return t===e.length?a:128&(e=e.slice(t))[0]?r.concat([a,e],1+e.length):e}function c(e){0===e[0]&&(e=e.slice(1));const t=r.alloc(32,0),n=Math.max(0,32-e.length);return e.copy(t,n),t}e.exports.decode=function(e){const t=e.readUInt8(e.length-1),o=-129&t;if(o<=0||o>=4)throw new Error("Invalid hashType "+t);const i=n.decode(e.slice(0,-1)),s=c(i.r),a=c(i.s);return{signature:r.concat([s,a],64),hashType:t}},e.exports.encode=function(e,t){s({signature:o.BufferN(64),hashType:o.UInt8},{signature:e,hashType:t});const i=-129&t;if(i<=0||i>=4)throw new Error("Invalid hashType "+t);const a=r.allocUnsafe(1);a.writeUInt8(t,0);const c=u(e.slice(0,32)),p=u(e.slice(32,64));return r.concat([n.encode(c,p),a])}})),i.register("7LSV8",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.oneOf=e.exports.Null=e.exports.BufferN=e.exports.Function=e.exports.UInt32=e.exports.UInt8=e.exports.tuple=e.exports.maybe=e.exports.Hex=e.exports.Buffer=e.exports.String=e.exports.Boolean=e.exports.Array=e.exports.Number=e.exports.Hash256bit=e.exports.Hash160bit=e.exports.Buffer256bit=e.exports.isTaptree=e.exports.isTapleaf=e.exports.TAPLEAF_VERSION_MASK=e.exports.Network=e.exports.ECPoint=e.exports.Satoshi=e.exports.Signer=e.exports.BIP32Path=e.exports.UInt31=e.exports.isPoint=e.exports.typeforce=void 0;var r=i("6rT8n");e.exports.typeforce=i("8DFnu");const n=r.Buffer.alloc(32,0),o=r.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");e.exports.isPoint=function(e){if(!r.Buffer.isBuffer(e))return!1;if(e.length<33)return!1;const t=e[0],i=e.slice(1,33);if(0===i.compare(n))return!1;if(i.compare(o)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;const s=e.slice(33);return 0!==s.compare(n)&&(!(s.compare(o)>=0)&&(4===t&&65===e.length))};const s=Math.pow(2,31)-1;function a(t){return e.exports.typeforce.String(t)&&!!t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}e.exports.UInt31=function(t){return e.exports.typeforce.UInt32(t)&&t<=s},e.exports.BIP32Path=a,a.toJSON=()=>"BIP32 derivation path",e.exports.Signer=function(t){return(e.exports.typeforce.Buffer(t.publicKey)||"function"==typeof t.getPublicKey)&&"function"==typeof t.sign};const u=21e14;function c(t){return!(!t||!("output"in t))&&(!!r.Buffer.isBuffer(t.output)&&(void 0===t.version||(t.version&e.exports.TAPLEAF_VERSION_MASK)===t.version))}e.exports.Satoshi=function(t){return e.exports.typeforce.UInt53(t)&&t<=u},e.exports.ECPoint=e.exports.typeforce.quacksLike("Point"),e.exports.Network=e.exports.typeforce.compile({messagePrefix:e.exports.typeforce.oneOf(e.exports.typeforce.Buffer,e.exports.typeforce.String),bip32:{public:e.exports.typeforce.UInt32,private:e.exports.typeforce.UInt32},pubKeyHash:e.exports.typeforce.UInt8,scriptHash:e.exports.typeforce.UInt8,wif:e.exports.typeforce.UInt8}),e.exports.TAPLEAF_VERSION_MASK=254,e.exports.isTapleaf=c,e.exports.isTaptree=function t(r){return(0,e.exports.Array)(r)?2===r.length&&r.every((e=>t(e))):c(r)},e.exports.Buffer256bit=e.exports.typeforce.BufferN(32),e.exports.Hash160bit=e.exports.typeforce.BufferN(20),e.exports.Hash256bit=e.exports.typeforce.BufferN(32),e.exports.Number=e.exports.typeforce.Number,e.exports.Array=e.exports.typeforce.Array,e.exports.Boolean=e.exports.typeforce.Boolean,e.exports.String=e.exports.typeforce.String,e.exports.Buffer=e.exports.typeforce.Buffer,e.exports.Hex=e.exports.typeforce.Hex,e.exports.maybe=e.exports.typeforce.maybe,e.exports.tuple=e.exports.typeforce.tuple,e.exports.UInt8=e.exports.typeforce.UInt8,e.exports.UInt32=e.exports.typeforce.UInt32,e.exports.Function=e.exports.typeforce.Function,e.exports.BufferN=e.exports.typeforce.BufferN,e.exports.Null=e.exports.typeforce.Null,e.exports.oneOf=e.exports.typeforce.oneOf})),i.register("2LODX",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.value=e.exports.prop=void 0,e.exports.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},e.exports.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)}})),i.register("c7kHW",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2ms=void 0;var r=i("5dxgn"),n=i("kNEDo"),o=i("7LSV8"),s=i("2LODX");const a=n.OPS,u=a.OP_RESERVED;function c(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}e.exports.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function i(e){return n.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===a.OP_0)}t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),m:o.typeforce.maybe(o.typeforce.Number),n:o.typeforce.maybe(o.typeforce.Number),output:o.typeforce.maybe(o.typeforce.Buffer),pubkeys:o.typeforce.maybe(o.typeforce.arrayOf(o.isPoint)),signatures:o.typeforce.maybe(o.typeforce.arrayOf(i)),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const p={network:e.network||r.bitcoin};let f=[],d=!1;function l(e){d||(d=!0,f=n.decompile(e),p.m=f[0]-u,p.n=f[f.length-2]-u,p.pubkeys=f.slice(1,-2))}if(s.prop(p,"output",(()=>{if(e.m&&p.n&&e.pubkeys)return n.compile([].concat(u+e.m,e.pubkeys,u+p.n,a.OP_CHECKMULTISIG))})),s.prop(p,"m",(()=>{if(p.output)return l(p.output),p.m})),s.prop(p,"n",(()=>{if(p.pubkeys)return p.pubkeys.length})),s.prop(p,"pubkeys",(()=>{if(e.output)return l(e.output),p.pubkeys})),s.prop(p,"signatures",(()=>{if(e.input)return n.decompile(e.input).slice(1)})),s.prop(p,"input",(()=>{if(e.signatures)return n.compile([a.OP_0].concat(e.signatures))})),s.prop(p,"witness",(()=>{if(p.input)return[]})),s.prop(p,"name",(()=>{if(p.m&&p.n)return`p2ms(${p.m} of ${p.n})`})),t.validate){if(e.output){if(l(e.output),!o.typeforce.Number(f[0]))throw new TypeError("Output is invalid");if(!o.typeforce.Number(f[f.length-2]))throw new TypeError("Output is invalid");if(f[f.length-1]!==a.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(p.m<=0||p.n>16||p.m>p.n||p.n!==f.length-3)throw new TypeError("Output is invalid");if(!p.pubkeys.every((e=>(0,o.isPoint)(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==p.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==p.n)throw new TypeError("n mismatch");if(e.pubkeys&&!c(e.pubkeys,p.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(p.n=e.pubkeys.length,p.n<p.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<p.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>p.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==a.OP_0)throw new TypeError("Input is invalid");if(0===p.signatures.length||!p.signatures.every(i))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!c(e.signatures,p.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(p,e)}})),i.register("739gI",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2pk=void 0;var r=i("5dxgn"),n=i("kNEDo"),o=i("7LSV8"),s=i("2LODX");const a=n.OPS;e.exports.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.Buffer),pubkey:o.typeforce.maybe(o.isPoint),signature:o.typeforce.maybe(n.isCanonicalScriptSignature),input:o.typeforce.maybe(o.typeforce.Buffer)},e);const i=s.value((()=>n.decompile(e.input))),u={name:"p2pk",network:e.network||r.bitcoin};if(s.prop(u,"output",(()=>{if(e.pubkey)return n.compile([e.pubkey,a.OP_CHECKSIG])})),s.prop(u,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),s.prop(u,"signature",(()=>{if(e.input)return i()[0]})),s.prop(u,"input",(()=>{if(e.signature)return n.compile([e.signature])})),s.prop(u,"witness",(()=>{if(u.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==a.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,o.isPoint)(u.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(u.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(u.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==i().length)throw new TypeError("Input is invalid");if(!n.isCanonicalScriptSignature(u.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(u,e)}})),i.register("ikIv6",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2pkh=void 0;var n=i("3ILtZ"),o=i("5dxgn"),s=i("kNEDo"),a=i("7LSV8"),u=i("2LODX"),c=i("f8pp6");const p=s.OPS;e.exports.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(25)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(s.isCanonicalScriptSignature),input:a.typeforce.maybe(a.typeforce.Buffer)},e);const i=u.value((()=>{const t=r.from(c.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}})),f=u.value((()=>s.decompile(e.input))),d=e.network||o.bitcoin,l={name:"p2pkh",network:d};if(u.prop(l,"address",(()=>{if(!l.hash)return;const e=r.allocUnsafe(21);return e.writeUInt8(d.pubKeyHash,0),l.hash.copy(e,1),c.encode(e)})),u.prop(l,"hash",(()=>e.output?e.output.slice(3,23):e.address?i().hash:e.pubkey||l.pubkey?n.hash160(e.pubkey||l.pubkey):void 0)),u.prop(l,"output",(()=>{if(l.hash)return s.compile([p.OP_DUP,p.OP_HASH160,l.hash,p.OP_EQUALVERIFY,p.OP_CHECKSIG])})),u.prop(l,"pubkey",(()=>{if(e.input)return f()[1]})),u.prop(l,"signature",(()=>{if(e.input)return f()[0]})),u.prop(l,"input",(()=>{if(e.pubkey&&e.signature)return s.compile([e.signature,e.pubkey])})),u.prop(l,"witness",(()=>{if(l.input)return[]})),t.validate){let t=r.from([]);if(e.address){if(i().version!==d.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==i().hash.length)throw new TypeError("Invalid address");t=i().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==p.OP_DUP||e.output[1]!==p.OP_HASH160||20!==e.output[2]||e.output[23]!==p.OP_EQUALVERIFY||e.output[24]!==p.OP_CHECKSIG)throw new TypeError("Output is invalid");const r=e.output.slice(3,23);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.pubkey){const r=n.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.input){const r=f();if(2!==r.length)throw new TypeError("Input is invalid");if(!s.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!(0,a.isPoint)(r[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw new TypeError("Pubkey mismatch");const o=n.hash160(r[1]);if(t.length>0&&!t.equals(o))throw new TypeError("Hash mismatch")}}return Object.assign(l,e)}})),i.register("3ILtZ",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.taggedHash=e.exports.TAGGED_HASH_PREFIXES=e.exports.TAGS=e.exports.hash256=e.exports.hash160=e.exports.sha256=e.exports.sha1=e.exports.ripemd160=void 0;var n=i("86Nlm"),o=i("oBDxf"),s=i("6B1js");function a(e){return r.from((0,s.sha256)(Uint8Array.from(e)))}e.exports.ripemd160=function(e){return r.from((0,n.ripemd160)(Uint8Array.from(e)))},e.exports.sha1=function(e){return r.from((0,o.sha1)(Uint8Array.from(e)))},e.exports.sha256=a,e.exports.hash160=function(e){return r.from((0,n.ripemd160)((0,s.sha256)(Uint8Array.from(e))))},e.exports.hash256=function(e){return r.from((0,s.sha256)((0,s.sha256)(Uint8Array.from(e))))},e.exports.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],e.exports.TAGGED_HASH_PREFIXES={"BIP0340/challenge":r.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":r.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":r.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:r.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:r.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:r.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:r.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":r.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":r.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])},e.exports.taggedHash=function(t,n){return a(r.concat([e.exports.TAGGED_HASH_PREFIXES[t],n]))}})),i.register("87mwx",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2sh=void 0;var n=i("3ILtZ"),o=i("5dxgn"),s=i("kNEDo"),a=i("7LSV8"),u=i("2LODX"),c=i("f8pp6");const p=s.OPS;e.exports.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),output:a.typeforce.maybe(a.typeforce.BufferN(23)),redeem:a.typeforce.maybe({network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);let i=e.network;i||(i=e.redeem&&e.redeem.network||o.bitcoin);const f={network:i},d=u.value((()=>{const t=r.from(c.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}})),l=u.value((()=>s.decompile(e.input))),h=u.value((()=>{const t=l(),n=t[t.length-1];return{network:i,output:n===p.OP_FALSE?r.from([]):n,input:s.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(u.prop(f,"address",(()=>{if(!f.hash)return;const e=r.allocUnsafe(21);return e.writeUInt8(f.network.scriptHash,0),f.hash.copy(e,1),c.encode(e)})),u.prop(f,"hash",(()=>e.output?e.output.slice(2,22):e.address?d().hash:f.redeem&&f.redeem.output?n.hash160(f.redeem.output):void 0)),u.prop(f,"output",(()=>{if(f.hash)return s.compile([p.OP_HASH160,f.hash,p.OP_EQUAL])})),u.prop(f,"redeem",(()=>{if(e.input)return h()})),u.prop(f,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return s.compile([].concat(s.decompile(e.redeem.input),e.redeem.output))})),u.prop(f,"witness",(()=>f.redeem&&f.redeem.witness?f.redeem.witness:f.input?[]:void 0)),u.prop(f,"name",(()=>{const e=["p2sh"];return void 0!==f.redeem&&void 0!==f.redeem.name&&e.push(f.redeem.name),e.join("-")})),t.validate){let t=r.from([]);if(e.address){if(d().version!==i.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==d().hash.length)throw new TypeError("Invalid address");t=d().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==p.OP_HASH160||20!==e.output[1]||e.output[22]!==p.OP_EQUAL)throw new TypeError("Output is invalid");const r=e.output.slice(2,22);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}const o=e=>{if(e.output){const r=s.decompile(e.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");if(e.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(s.countNonPushOnlyOPs(r)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const o=n.hash160(e.output);if(t.length>0&&!t.equals(o))throw new TypeError("Hash mismatch");t=o}if(e.input){const t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw new TypeError("Empty input");if(t&&r)throw new TypeError("Input and witness provided");if(t){const t=s.decompile(e.input);if(!s.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=l();if(!e||e.length<1)throw new TypeError("Input too short");if(!r.isBuffer(h().output))throw new TypeError("Input is invalid");o(h())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.input){const t=h();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}o(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(f,e)}})),i.register("aqs4I",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2wpkh=void 0;var n=i("3ILtZ"),o=i("5dxgn"),s=i("kNEDo"),a=i("7LSV8"),u=i("2LODX"),c=i("5frS9");const p=s.OPS,f=r.alloc(0);e.exports.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(20)),input:a.typeforce.maybe(a.typeforce.BufferN(0)),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.BufferN(22)),pubkey:a.typeforce.maybe(a.isPoint),signature:a.typeforce.maybe(s.isCanonicalScriptSignature),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const i=u.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),o=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.from(o)}})),d=e.network||o.bitcoin,l={name:"p2wpkh",network:d};if(u.prop(l,"address",(()=>{if(!l.hash)return;const e=c.bech32.toWords(l.hash);return e.unshift(0),c.bech32.encode(d.bech32,e)})),u.prop(l,"hash",(()=>e.output?e.output.slice(2,22):e.address?i().data:e.pubkey||l.pubkey?n.hash160(e.pubkey||l.pubkey):void 0)),u.prop(l,"output",(()=>{if(l.hash)return s.compile([p.OP_0,l.hash])})),u.prop(l,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),u.prop(l,"signature",(()=>{if(e.witness)return e.witness[0]})),u.prop(l,"input",(()=>{if(l.witness)return f})),u.prop(l,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t=r.from([]);if(e.address){if(d&&d.bech32!==i().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==i().version)throw new TypeError("Invalid address version");if(20!==i().data.length)throw new TypeError("Invalid address data");t=i().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==p.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const r=n.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");if(t=r,!(0,a.isPoint)(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!s.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,a.isPoint)(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const r=n.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(l,e)}})),i.register("9Zg21",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2wsh=void 0;var n=i("3ILtZ"),o=i("5dxgn"),s=i("kNEDo"),a=i("7LSV8"),u=i("2LODX"),c=i("5frS9");const p=s.OPS,f=r.alloc(0);function d(e){return!(!r.isBuffer(e)||65!==e.length||4!==e[0]||!(0,a.isPoint)(e))}e.exports.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,a.typeforce)({network:a.typeforce.maybe(a.typeforce.Object),address:a.typeforce.maybe(a.typeforce.String),hash:a.typeforce.maybe(a.typeforce.BufferN(32)),output:a.typeforce.maybe(a.typeforce.BufferN(34)),redeem:a.typeforce.maybe({input:a.typeforce.maybe(a.typeforce.Buffer),network:a.typeforce.maybe(a.typeforce.Object),output:a.typeforce.maybe(a.typeforce.Buffer),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))}),input:a.typeforce.maybe(a.typeforce.BufferN(0)),witness:a.typeforce.maybe(a.typeforce.arrayOf(a.typeforce.Buffer))},e);const i=u.value((()=>{const t=c.bech32.decode(e.address),n=t.words.shift(),o=c.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.from(o)}})),l=u.value((()=>s.decompile(e.redeem.input)));let h=e.network;h||(h=e.redeem&&e.redeem.network||o.bitcoin);const y={network:h};if(u.prop(y,"address",(()=>{if(!y.hash)return;const e=c.bech32.toWords(y.hash);return e.unshift(0),c.bech32.encode(h.bech32,e)})),u.prop(y,"hash",(()=>e.output?e.output.slice(2):e.address?i().data:y.redeem&&y.redeem.output?n.sha256(y.redeem.output):void 0)),u.prop(y,"output",(()=>{if(y.hash)return s.compile([p.OP_0,y.hash])})),u.prop(y,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:f,witness:e.witness.slice(0,-1)}})),u.prop(y,"input",(()=>{if(y.witness)return f})),u.prop(y,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=s.toStack(l());return y.redeem=Object.assign({witness:t},e.redeem),y.redeem.input=f,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),u.prop(y,"name",(()=>{const e=["p2wsh"];return void 0!==y.redeem&&void 0!==y.redeem.name&&e.push(y.redeem.name),e.join("-")})),t.validate){let t=r.from([]);if(e.address){if(i().prefix!==h.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==i().version)throw new TypeError("Invalid address version");if(32!==i().data.length)throw new TypeError("Invalid address data");t=i().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==p.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const r=e.output.slice(2);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.redeem){if(e.redeem.network&&e.redeem.network!==h)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){const r=s.decompile(e.redeem.output);if(!r||r.length<1)throw new TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(s.countNonPushOnlyOPs(r)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");const o=n.sha256(e.redeem.output);if(t.length>0&&!t.equals(o))throw new TypeError("Hash mismatch");t=o}if(e.redeem.input&&!s.isPushOnly(l()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&l().some(d)||e.redeem.output&&(s.decompile(e.redeem.output)||[]).some(d))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(d)||(s.decompile(t)||[]).some(d))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(y,e)}})),i.register("e0paw",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2tr=void 0;var r=i("6rT8n"),n=i("5dxgn"),o=i("kNEDo"),s=i("7LSV8"),a=i("iXHS2"),u=i("4BE1A"),c=i("2LODX"),p=i("5frS9");const f=o.OPS,d=1,l=80;e.exports.p2tr=function(e,t){if(!(e.address||e.output||e.pubkey||e.internalPubkey||e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,s.typeforce)({address:s.typeforce.maybe(s.typeforce.String),input:s.typeforce.maybe(s.typeforce.BufferN(0)),network:s.typeforce.maybe(s.typeforce.Object),output:s.typeforce.maybe(s.typeforce.BufferN(34)),internalPubkey:s.typeforce.maybe(s.typeforce.BufferN(32)),hash:s.typeforce.maybe(s.typeforce.BufferN(32)),pubkey:s.typeforce.maybe(s.typeforce.BufferN(32)),signature:s.typeforce.maybe(s.typeforce.anyOf(s.typeforce.BufferN(64),s.typeforce.BufferN(65))),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer)),scriptTree:s.typeforce.maybe(s.isTaptree),redeem:s.typeforce.maybe({output:s.typeforce.maybe(s.typeforce.Buffer),redeemVersion:s.typeforce.maybe(s.typeforce.Number),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))}),redeemVersion:s.typeforce.maybe(s.typeforce.Number)},e);const i=c.value((()=>{const t=p.bech32m.decode(e.address),n=t.words.shift(),o=p.bech32m.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.Buffer.from(o)}})),h=c.value((()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&e.witness[e.witness.length-1][0]===l?e.witness.slice(0,-1):e.witness.slice()})),y=c.value((()=>e.scriptTree?(0,u.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0)),g=e.network||n.bitcoin,v={name:"p2tr",network:g};if(c.prop(v,"address",(()=>{if(!v.pubkey)return;const e=p.bech32m.toWords(v.pubkey);return e.unshift(d),p.bech32m.encode(g.bech32,e)})),c.prop(v,"hash",(()=>{const e=y();if(e)return e.hash;const t=h();if(t&&t.length>1){const e=t[t.length-1],r=e[0]&s.TAPLEAF_VERSION_MASK,n=t[t.length-2],o=(0,u.tapleafHash)({output:n,version:r});return(0,u.rootHashFromPath)(e,o)}return null})),c.prop(v,"output",(()=>{if(v.pubkey)return o.compile([f.OP_1,v.pubkey])})),c.prop(v,"redeemVersion",(()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:u.LEAF_VERSION_TAPSCRIPT)),c.prop(v,"redeem",(()=>{const e=h();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&s.TAPLEAF_VERSION_MASK}})),c.prop(v,"pubkey",(()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return i().data;if(v.internalPubkey){const e=(0,u.tweakKey)(v.internalPubkey,v.hash);if(e)return e.x}})),c.prop(v,"internalPubkey",(()=>{if(e.internalPubkey)return e.internalPubkey;const t=h();return t&&t.length>1?t[t.length-1].slice(1,33):void 0})),c.prop(v,"signature",(()=>{if(e.signature)return e.signature;const t=h();return t&&1===t.length?t[0]:void 0})),c.prop(v,"witness",(()=>{if(e.witness)return e.witness;const t=y();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){const n=(0,u.tapleafHash)({output:e.redeem.output,version:v.redeemVersion}),o=(0,u.findScriptPath)(t,n);if(!o)return;const i=(0,u.tweakKey)(e.internalPubkey,t.hash);if(!i)return;const s=r.Buffer.concat([r.Buffer.from([v.redeemVersion|i.parity]),e.internalPubkey].concat(o));return[e.redeem.output,s]}return e.signature?[e.signature]:void 0})),t.validate){let t=r.Buffer.from([]);if(e.address){if(g&&g.bech32!==i().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(i().version!==d)throw new TypeError("Invalid address version");if(32!==i().data.length)throw new TypeError("Invalid address data");t=i().data}if(e.pubkey){if(t.length>0&&!t.equals(e.pubkey))throw new TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==f.OP_1||32!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){const r=(0,u.tweakKey)(e.internalPubkey,v.hash);if(t.length>0&&!t.equals(r.x))throw new TypeError("Pubkey mismatch");t=r.x}if(t&&t.length&&!(0,a.getEccLib)().isXOnlyPoint(t))throw new TypeError("Invalid pubkey for p2tr");const n=y();if(e.hash&&n&&!e.hash.equals(n.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&n){const t=(0,u.tapleafHash)({output:e.redeem.output,version:v.redeemVersion});if(!(0,u.findScriptPath)(n,t))throw new TypeError("Redeem script not in tree")}const c=h();if(e.redeem&&v.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==v.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===o.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");if(v.redeem.output&&!e.redeem.output.equals(v.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&v.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.redeem.witness,v.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(c&&c.length)if(1===c.length){if(e.signature&&!e.signature.equals(c[0]))throw new TypeError("Signature mismatch")}else{const r=c[c.length-1];if(r.length<33)throw new TypeError(`The control-block length is too small. Got ${r.length}, expected min 33.`);if((r.length-33)%32!=0)throw new TypeError(`The control-block length of ${r.length} is incorrect!`);const n=(r.length-33)/32;if(n>128)throw new TypeError(`The script path is too long. Got ${n}, expected max 128.`);const o=r.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(o))throw new TypeError("Internal pubkey mismatch");if(!(0,a.getEccLib)().isXOnlyPoint(o))throw new TypeError("Invalid internalPubkey for p2tr witness");const i=r[0]&s.TAPLEAF_VERSION_MASK,p=c[c.length-2],f=(0,u.tapleafHash)({output:p,version:i}),d=(0,u.rootHashFromPath)(r,f),l=(0,u.tweakKey)(o,d);if(!l)throw new TypeError("Invalid outputKey for p2tr witness");if(t.length&&!t.equals(l.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(l.parity!==(1&r[0]))throw new Error("Incorrect parity")}}return Object.assign(v,e)}})),i.register("iXHS2",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getEccLib=e.exports.initEccLib=void 0;const n={};e.exports.initEccLib=function(e){var t;e?e!==n.eccLib&&(s("function"==typeof(t=e).isXOnlyPoint),s(t.isXOnlyPoint(o("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),s(t.isXOnlyPoint(o("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),s(t.isXOnlyPoint(o("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),s(t.isXOnlyPoint(o("0000000000000000000000000000000000000000000000000000000000000001"))),s(!t.isXOnlyPoint(o("0000000000000000000000000000000000000000000000000000000000000000"))),s(!t.isXOnlyPoint(o("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),s("function"==typeof t.xOnlyPointAddTweak),a.forEach((e=>{const n=t.xOnlyPointAddTweak(o(e.pubkey),o(e.tweak));null===e.result?s(null===n):(s(null!==n),s(n.parity===e.parity),s(r.from(n.xOnlyPubkey).equals(o(e.result))))})),n.eccLib=e):n.eccLib=e},e.exports.getEccLib=function(){if(!n.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return n.eccLib};const o=e=>r.from(e,"hex");function s(e){if(!e)throw new Error("ecc library invalid")}const a=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]})),i.register("4BE1A",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.tweakKey=e.exports.tapTweakHash=e.exports.tapleafHash=e.exports.findScriptPath=e.exports.toHashTree=e.exports.rootHashFromPath=e.exports.MAX_TAPTREE_DEPTH=e.exports.LEAF_VERSION_TAPSCRIPT=void 0;var r=i("6rT8n"),n=i("iXHS2"),o=i("3ILtZ"),s=i("5oKkg"),a=i("7LSV8");e.exports.LEAF_VERSION_TAPSCRIPT=192,e.exports.MAX_TAPTREE_DEPTH=128;const u=e=>"left"in e&&"right"in e;function c(t){const n=t.version||e.exports.LEAF_VERSION_TAPSCRIPT;return o.taggedHash("TapLeaf",r.Buffer.concat([r.Buffer.from([n]),d(t.output)]))}function p(e,t){return o.taggedHash("TapTweak",r.Buffer.concat(t?[e,t]:[e]))}function f(e,t){return o.taggedHash("TapBranch",r.Buffer.concat([e,t]))}function d(e){const t=s.varuint.encodingLength(e.length),n=r.Buffer.allocUnsafe(t);return s.varuint.encode(e.length,n),r.Buffer.concat([n,e])}e.exports.rootHashFromPath=function(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);const r=(e.length-33)/32;let n=t;for(let t=0;t<r;t++){const r=e.slice(33+32*t,65+32*t);n=n.compare(r)<0?f(n,r):f(r,n)}return n},e.exports.toHashTree=function e(t){if((0,a.isTapleaf)(t))return{hash:c(t)};const r=[e(t[0]),e(t[1])];r.sort(((e,t)=>e.hash.compare(t.hash)));const[n,o]=r;return{hash:f(n.hash,o.hash),left:n,right:o}},e.exports.findScriptPath=function e(t,r){if(u(t)){const n=e(t.left,r);if(void 0!==n)return[...n,t.right.hash];const o=e(t.right,r);if(void 0!==o)return[...o,t.left.hash]}else if(t.hash.equals(r))return[]},e.exports.tapleafHash=c,e.exports.tapTweakHash=p,e.exports.tweakKey=function(e,t){if(!r.Buffer.isBuffer(e))return null;if(32!==e.length)return null;if(t&&32!==t.length)return null;const o=p(e,t),i=(0,n.getEccLib)().xOnlyPointAddTweak(e,o);return i&&null!==i.xOnlyPubkey?{parity:i.parity,x:r.Buffer.from(i.xOnlyPubkey)}:null}})),i.register("5oKkg",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BufferReader=e.exports.BufferWriter=e.exports.cloneBuffer=e.exports.reverseBuffer=e.exports.writeUInt64LE=e.exports.readUInt64LE=e.exports.varuint=void 0;var n=i("7LSV8");const{typeforce:o}=n;var s=i("jGIJA");function a(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function u(e,t){const r=e.readUInt32LE(t);let n=e.readUInt32LE(t+4);return n*=4294967296,a(n+r,9007199254740991),n+r}function c(e,t,r){return a(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}e.exports.varuint=s,e.exports.readUInt64LE=u,e.exports.writeUInt64LE=c,e.exports.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},e.exports.cloneBuffer=function(e){const t=r.allocUnsafe(e.length);return e.copy(t),t};class p{static withCapacity(e){return new p(r.alloc(e))}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=c(this.buffer,e,this.offset)}writeVarInt(e){s.encode(e,this.buffer,this.offset),this.offset+=s.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}constructor(e,t=0){this.buffer=e,this.offset=t,o(n.tuple(n.Buffer,n.UInt32),[e,t])}}e.exports.BufferWriter=p;e.exports.BufferReader=class{readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=u(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=s.decode(this.buffer,this.offset);return this.offset+=s.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}constructor(e,t=0){this.buffer=e,this.offset=t,o(n.tuple(n.Buffer,n.UInt32),[e,t])}}})),i.register("3f6sT",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Block=void 0;var n=i("5oKkg"),o=i("3ILtZ"),s=i("geQOP"),a=i("cqTLw"),u=i("7LSV8");const{typeforce:c}=u,p=new TypeError("Cannot compute merkle root for zero transactions"),f=new TypeError("Cannot compute witness commit for non-segwit block");class d{static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");const t=new n.BufferReader(e),r=new d;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;const o=()=>{const e=a.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},i=t.readVarInt();r.transactions=[];for(let e=0;e<i;++e){const e=o();r.transactions.push(e)}const s=r.getWitnessCommit();return s&&(r.witnessCommit=s),r}static fromHex(e){return d.fromBuffer(r.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,n=8388607&e,o=r.alloc(32,0);return o.writeUIntBE(n,29-t,3),o}static calculateMerkleRoot(e,t){if(c([{getHash:u.Function}],e),0===e.length)throw p;if(t&&!l(e))throw f;const n=e.map((e=>e.getHash(t))),i=(0,s.fastMerkleRoot)(n,o.hash256);return t?o.hash256(r.concat([i,e[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!l(this.transactions))return null;const e=this.transactions[0].outs.filter((e=>e.script.slice(0,6).equals(r.from("6a24aa21a9ed","hex")))).map((e=>e.script.slice(6,38)));if(0===e.length)return null;const t=e[e.length-1];return t instanceof r&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof r&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some((e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some((e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))));var e}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+n.varuint.encodingLength(this.transactions.length)+this.transactions.reduce(((e,r)=>e+r.byteLength(t)),0)}getHash(){return o.hash256(this.toBuffer(!0))}getId(){return(0,n.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const t=r.allocUnsafe(this.byteLength(e)),o=new n.BufferWriter(t);return o.writeInt32(this.version),o.writeSlice(this.prevHash),o.writeSlice(this.merkleRoot),o.writeUInt32(this.timestamp),o.writeUInt32(this.bits),o.writeUInt32(this.nonce),e||!this.transactions||(n.varuint.encode(this.transactions.length,t,o.offset),o.offset+=n.varuint.encode.bytes,this.transactions.forEach((e=>{const r=e.byteLength();e.toBuffer(t,o.offset),o.offset+=r}))),t}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}checkProofOfWork(){const e=(0,n.reverseBuffer)(this.getHash()),t=d.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw p;const e=d.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw p;if(!this.hasWitnessCommit())throw f;const e=d.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}}function l(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}e.exports.Block=d})),i.register("geQOP",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.fastMerkleRoot=void 0,e.exports.fastMerkleRoot=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let n=e.length;const o=e.concat();for(;n>1;){let e=0;for(let i=0;i<n;i+=2,++e){const s=o[i],a=i+1===n?s:o[i+1],u=r.concat([s,a]);o[e]=t(u)}n=e}return o[0]}})),i.register("cqTLw",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Transaction=void 0;var n=i("5oKkg"),o=i("3ILtZ"),s=i("kNEDo"),a=(s=i("kNEDo"),i("7LSV8"));const{typeforce:u}=a;function c(e){const t=e.length;return n.varuint.encodingLength(t)+t}const p=r.allocUnsafe(0),f=[],d=r.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),l=r.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),h=r.from("ffffffffffffffff","hex"),y={script:p,valueBuffer:h};class g{static fromBuffer(e,t){const r=new n.BufferReader(e),o=new g;o.version=r.readInt32();const i=r.readUInt8(),s=r.readUInt8();let a=!1;i===g.ADVANCED_TRANSACTION_MARKER&&s===g.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;const u=r.readVarInt();for(let e=0;e<u;++e)o.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:f});const c=r.readVarInt();for(let e=0;e<c;++e)o.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)o.ins[e].witness=r.readVector();if(!o.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(o.locktime=r.readUInt32(),t)return o;if(r.offset!==e.length)throw new Error("Transaction has unexpected data");return o}static fromHex(e){return g.fromBuffer(r.from(e,"hex"),!1)}static isCoinbaseHash(e){u(a.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&g.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return u(a.tuple(a.Hash256bit,a.UInt32,a.maybe(a.UInt32),a.maybe(a.Buffer)),arguments),a.Null(r)&&(r=g.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||p,sequence:r,witness:f})-1}addOutput(e,t){return u(a.tuple(a.Buffer,a.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some((e=>0!==e.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+n.varuint.encodingLength(this.ins.length)+n.varuint.encodingLength(this.outs.length)+this.ins.reduce(((e,t)=>e+40+c(t.script)),0)+this.outs.reduce(((e,t)=>e+8+c(t.script)),0)+(t?this.ins.reduce(((e,t)=>e+function(e){const t=e.length;return n.varuint.encodingLength(t)+e.reduce(((e,t)=>e+c(t)),0)}(t.witness)),0):0)}clone(){const e=new g;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value}))),e}hashForSignature(e,t,n){if(u(a.tuple(a.UInt32,a.Buffer,a.Number),arguments),e>=this.ins.length)return l;const i=s.compile(s.decompile(t).filter((e=>e!==s.OPS.OP_CODESEPARATOR))),c=this.clone();if((31&n)===g.SIGHASH_NONE)c.outs=[],c.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}));else if((31&n)===g.SIGHASH_SINGLE){if(e>=this.outs.length)return l;c.outs.length=e+1;for(let t=0;t<e;t++)c.outs[t]=y;c.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}))}n&g.SIGHASH_ANYONECANPAY?(c.ins=[c.ins[e]],c.ins[0].script=i):(c.ins.forEach((e=>{e.script=p})),c.ins[e].script=i);const f=r.allocUnsafe(c.byteLength(!1)+4);return f.writeInt32LE(n,f.length-4),c.__toBuffer(f,0,!1),o.hash256(f)}hashForWitnessV1(e,t,i,s,f,d){if(u(a.tuple(a.UInt32,u.arrayOf(a.Buffer),u.arrayOf(a.Satoshi),a.UInt32),arguments),i.length!==this.ins.length||t.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");const l=s===g.SIGHASH_DEFAULT?g.SIGHASH_ALL:s&g.SIGHASH_OUTPUT_MASK,h=(s&g.SIGHASH_INPUT_MASK)===g.SIGHASH_ANYONECANPAY,y=l===g.SIGHASH_NONE,v=l===g.SIGHASH_SINGLE;let w=p,m=p,T=p,b=p,S=p;if(!h){let e=n.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach((t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)})),w=o.sha256(e.end()),e=n.BufferWriter.withCapacity(8*this.ins.length),i.forEach((t=>e.writeUInt64(t))),m=o.sha256(e.end()),e=n.BufferWriter.withCapacity(t.map(c).reduce(((e,t)=>e+t))),t.forEach((t=>e.writeVarSlice(t))),T=o.sha256(e.end()),e=n.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach((t=>e.writeUInt32(t.sequence))),b=o.sha256(e.end())}if(y||v){if(v&&e<this.outs.length){const t=this.outs[e],r=n.BufferWriter.withCapacity(8+c(t.script));r.writeUInt64(t.value),r.writeVarSlice(t.script),S=o.sha256(r.end())}}else{const e=this.outs.map((e=>8+c(e.script))).reduce(((e,t)=>e+t)),t=n.BufferWriter.withCapacity(e);this.outs.forEach((e=>{t.writeUInt64(e.value),t.writeVarSlice(e.script)})),S=o.sha256(t.end())}const E=(f?2:0)+(d?1:0),x=174-(h?49:0)-(y?32:0)+(d?32:0)+(f?37:0),A=n.BufferWriter.withCapacity(x);if(A.writeUInt8(s),A.writeInt32(this.version),A.writeUInt32(this.locktime),A.writeSlice(w),A.writeSlice(m),A.writeSlice(T),A.writeSlice(b),y||v||A.writeSlice(S),A.writeUInt8(E),h){const r=this.ins[e];A.writeSlice(r.hash),A.writeUInt32(r.index),A.writeUInt64(i[e]),A.writeVarSlice(t[e]),A.writeUInt32(r.sequence)}else A.writeUInt32(e);if(d){const e=n.BufferWriter.withCapacity(c(d));e.writeVarSlice(d),A.writeSlice(o.sha256(e.end()))}return v&&A.writeSlice(S),f&&(A.writeSlice(f),A.writeUInt8(0),A.writeUInt32(4294967295)),o.taggedHash("TapSighash",r.concat([r.from([0]),A.end()]))}hashForWitnessV0(e,t,i,s){u(a.tuple(a.UInt32,a.Buffer,a.Satoshi,a.UInt32),arguments);let p,f=r.from([]),l=d,h=d,y=d;if(s&g.SIGHASH_ANYONECANPAY||(f=r.allocUnsafe(36*this.ins.length),p=new n.BufferWriter(f,0),this.ins.forEach((e=>{p.writeSlice(e.hash),p.writeUInt32(e.index)})),h=o.hash256(f)),s&g.SIGHASH_ANYONECANPAY||(31&s)===g.SIGHASH_SINGLE||(31&s)===g.SIGHASH_NONE||(f=r.allocUnsafe(4*this.ins.length),p=new n.BufferWriter(f,0),this.ins.forEach((e=>{p.writeUInt32(e.sequence)})),y=o.hash256(f)),(31&s)!==g.SIGHASH_SINGLE&&(31&s)!==g.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+8+c(t.script)),0);f=r.allocUnsafe(e),p=new n.BufferWriter(f,0),this.outs.forEach((e=>{p.writeUInt64(e.value),p.writeVarSlice(e.script)})),l=o.hash256(f)}else if((31&s)===g.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];f=r.allocUnsafe(8+c(t.script)),p=new n.BufferWriter(f,0),p.writeUInt64(t.value),p.writeVarSlice(t.script),l=o.hash256(f)}f=r.allocUnsafe(156+c(t)),p=new n.BufferWriter(f,0);const v=this.ins[e];return p.writeInt32(this.version),p.writeSlice(h),p.writeSlice(y),p.writeSlice(v.hash),p.writeUInt32(v.index),p.writeVarSlice(t),p.writeUInt64(i),p.writeUInt32(v.sequence),p.writeSlice(l),p.writeUInt32(this.locktime),p.writeUInt32(s),o.hash256(f)}getHash(e){return e&&this.isCoinbase()?r.alloc(32,0):o.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,n.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){u(a.tuple(a.Number,a.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){u(a.tuple(a.Number,[a.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(e,t,o=!1){e||(e=r.allocUnsafe(this.byteLength(o)));const i=new n.BufferWriter(e,t||0);i.writeInt32(this.version);const s=o&&this.hasWitnesses();return s&&(i.writeUInt8(g.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(g.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach((e=>{i.writeSlice(e.hash),i.writeUInt32(e.index),i.writeVarSlice(e.script),i.writeUInt32(e.sequence)})),i.writeVarInt(this.outs.length),this.outs.forEach((e=>{void 0!==e.value?i.writeUInt64(e.value):i.writeSlice(e.valueBuffer),i.writeVarSlice(e.script)})),s&&this.ins.forEach((e=>{i.writeVector(e.witness)})),i.writeUInt32(this.locktime),void 0!==t?e.slice(t,i.offset):e}constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}}e.exports.Transaction=g,g.DEFAULT_SEQUENCE=4294967295,g.SIGHASH_DEFAULT=0,g.SIGHASH_ALL=1,g.SIGHASH_NONE=2,g.SIGHASH_SINGLE=3,g.SIGHASH_ANYONECANPAY=128,g.SIGHASH_OUTPUT_MASK=3,g.SIGHASH_INPUT_MASK=128,g.ADVANCED_TRANSACTION_MARKER=0,g.ADVANCED_TRANSACTION_FLAG=1})),i.register("bHPtT",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Psbt=void 0;var n=i("8iLYC"),o=i("hrqOt"),s=i("hJBXC"),a=i("3Z8KF"),u=i("5oKkg"),c=i("5dxgn"),p=i("2Yfad"),f=i("4BE1A"),d=i("kNEDo"),l=i("cqTLw"),h=i("gg8iN"),y=i("lBgd9");const g={network:c.bitcoin,maximumFeeRate:5e3};class v{static fromBase64(e,t={}){const n=r.from(e,"base64");return this.fromBuffer(n,t)}static fromHex(e,t={}){const n=r.from(e,"hex");return this.fromBuffer(n,t)}static fromBuffer(e,t={}){const r=n.Psbt.fromBuffer(e,w),o=new v(t,r);var i,s;return i=o.__CACHE.__TX,s=o.__CACHE,i.ins.forEach((e=>{O(s,e)})),o}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map((e=>({hash:(0,u.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((e=>{let t;try{t=(0,a.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,u.cloneBuffer)(e.script),value:e.value,address:t}}))}combine(...e){return this.data.combine(...e.map((e=>e.data))),this}clone(){const e=v.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){x(e),this.opts.maximumFeeRate=e}setVersion(e){x(e),A(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){x(e),A(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){x(t),A(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach((e=>this.addInput(e))),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,h.checkTaprootInputFields)(e,e,"addInput"),A(this.data.inputs,"addInput"),e.witnessScript&&z(e.witnessScript);const t=this.__CACHE;this.data.addInput(e);O(t,t.__TX.ins[t.__TX.ins.length-1]);const r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&K(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach((e=>this.addOutput(e))),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");A(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:r}=this.opts,n=(0,a.toOutputScript)(t,r);e=Object.assign(e,{script:n})}(0,h.checkTaprootOutputFields)(e,e,"addOutput");const r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(S))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,r){const n=t.__FEE_RATE||e.getFeeRate(),o=t.__EXTRACTED_TX.virtualSize(),i=n*o;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(i/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${o} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const r=t.__TX.clone();return j(this.data.inputs,r,t,!0),r}getFeeRate(){return N("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return N("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,s.checkForInput)(this.data.inputs,0),Y(this.data.inputs.length).forEach((e=>this.finalizeInput(e))),this}finalizeInput(e,t){const r=(0,s.checkForInput)(this.data.inputs,e);return(0,h.isTaprootInput)(r)?this._finalizeTaprootInput(e,r,void 0,t):this._finalizeInput(e,r,t)}finalizeTaprootInput(e,t,r=h.tapScriptFinalizer){const n=(0,s.checkForInput)(this.data.inputs,e);if((0,h.isTaprootInput)(n))return this._finalizeTaprootInput(e,n,t,r);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,r=C){const{script:n,isP2SH:o,isP2WSH:i,isSegwit:s}=function(e,t,r){const n=r.__TX,o={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(o.isP2SH=!!t.redeemScript,o.isP2WSH=!!t.witnessScript,t.witnessScript)o.script=t.witnessScript;else if(t.redeemScript)o.script=t.redeemScript;else if(t.nonWitnessUtxo){const i=V(r,t,e),s=n.ins[e].index;o.script=i.outs[s].script}else t.witnessUtxo&&(o.script=t.witnessUtxo.script);(t.witnessScript||(0,y.isP2WPKH)(o.script))&&(o.isSegwit=!0);return o}(e,t,this.__CACHE);if(!n)throw new Error(`No script found for input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:r}=e;t.forEach((e=>{const{hashType:t}=d.signature.decode(e.signature);if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}(t);const{finalScriptSig:a,finalScriptWitness:u}=r(e,t,n,s,o,i);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,r,n=h.tapScriptFinalizer){if(!t.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){const r=p.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),n=(0,y.witnessStackToScriptWitness)(r.witness);this.data.updateInput(e,{finalScriptWitness:n})}else{const{finalScriptWitness:o}=n(e,t,r);this.data.updateInput(e,{finalScriptWitness:o})}return this.data.clearFinalizedInput(e),this}getInputType(e){const t=(0,s.checkForInput)(this.data.inputs,e),n=X(W(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;const t=d.decompile(e);if(!t)return;const n=t[t.length-1];if(!r.isBuffer(n)||q(n)||(o=n,d.isCanonicalScriptSignature(o)))return;var o;if(!d.decompile(n))return;return n}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;const t=F(e),r=t[t.length-1];if(q(r))return;if(!d.decompile(r))return;return r}(t.finalScriptWitness));return("raw"===n.type?"":n.type+"-")+$(n.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,r,n){const o=W(r,t,n),{meaningfulScript:i}=X(o,r,"input",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,i)}(t,(0,s.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const r=(0,s.checkForInput)(this.data.inputs,e),n=E(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return function(e,t,r,n){const o=n.__TX.outs[r].script,{meaningfulScript:i}=X(o,r,"output",t.redeemScript,t.witnessScript);return(0,y.pubkeyInScript)(e,i)}(t,(0,s.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const r=(0,s.checkForOutput)(this.data.outputs,e),n=E(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(e){(0,s.checkForInput)(this.data.inputs,0);return Y(this.data.inputs.length).map((t=>this.validateSignaturesOfInput(t,e))).reduce(((e,t)=>!0===t&&e),!0)}validateSignaturesOfInput(e,t,r){const n=this.data.inputs[e];return(0,h.isTaprootInput)(n)?this.validateSignaturesOfTaprootInput(e,t,r):this._validateSignaturesOfInput(e,t,r)}_validateSignaturesOfInput(e,t,r){const n=this.data.inputs[e],o=(n||{}).partialSig;if(!n||!o||o.length<1)throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const i=r?o.filter((e=>e.pubkey.equals(r))):o;if(i.length<1)throw new Error("No signatures for this pubkey");const s=[];let a,u,c;for(const r of i){const o=d.signature.decode(r.signature),{hash:i,script:p}=c!==o.hashType?L(e,Object.assign({},n,{sighashType:o.hashType}),this.__CACHE,!0):{hash:a,script:u};c=o.hashType,a=i,u=p,I(r.pubkey,p,"verify"),s.push(t(r.pubkey,i,o.signature))}return s.every((e=>!0===e))}validateSignaturesOfTaprootInput(e,t,r){const n=this.data.inputs[e],o=(n||{}).tapKeySig,i=(n||{}).tapScriptSig;if(!n&&!o&&(!i||i.length))throw new Error("No signatures to validate");if("function"!=typeof t)throw new Error("Need validator function to validate signatures");const s=(r=r&&(0,h.toXOnly)(r))?H(e,n,this.data.inputs,r,this.__CACHE):function(e,t,r,n){const o=[];if(t.tapInternalKey){const r=B(e,t,n);r&&o.push(r)}if(t.tapScriptSig){const e=t.tapScriptSig.map((e=>e.pubkey));o.push(...e)}const i=o.map((o=>H(e,t,r,o,n)));return i.flat()}(e,n,this.data.inputs,this.__CACHE);if(!s.length)throw new Error("No signatures for this pubkey");const a=s.find((e=>!e.leafHash));let u=0;if(o&&a){if(!t(a.pubkey,a.hash,R(o)))return!1;u++}if(i)for(const e of i){const r=s.find((t=>e.pubkey.equals(t.pubkey)));if(r){if(!t(e.pubkey,r.hash,R(e.signature)))return!1;u++}}return u>0}signAllInputsHD(e,t=[l.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const n of Y(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[l.Transaction.SIGHASH_ALL]){return new Promise(((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const o=[],i=[];for(const r of Y(this.data.inputs.length))i.push(this.signInputHDAsync(r,e,t).then((()=>{o.push(!0)}),(()=>{o.push(!1)})));return Promise.all(i).then((()=>{if(o.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInputHD(e,t,r=[l.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return M(e,this.data.inputs,t).forEach((t=>this.signInput(e,t,r))),this}signInputHDAsync(e,t,r=[l.Transaction.SIGHASH_ALL]){return new Promise(((n,o)=>{if(!t||!t.publicKey||!t.fingerprint)return o(new Error("Need HDSigner to sign input"));const i=M(e,this.data.inputs,t).map((t=>this.signInputAsync(e,t,r)));return Promise.all(i).then((()=>{n()})).catch(o)}))}signAllInputs(e,t){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const n of Y(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise(((r,n)=>{if(!e||!e.publicKey)return n(new Error("Need Signer to sign input"));const o=[],i=[];for(const[r]of this.data.inputs.entries())i.push(this.signInputAsync(r,e,t).then((()=>{o.push(!0)}),(()=>{o.push(!1)})));return Promise.all(i).then((()=>{if(o.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInput(e,t,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const n=(0,s.checkForInput)(this.data.inputs,e);return(0,h.isTaprootInput)(n)?this._signTaprootInput(e,n,t,void 0,r):this._signInput(e,t,r)}signTaprootInput(e,t,r,n){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const o=(0,s.checkForInput)(this.data.inputs,e);if((0,h.isTaprootInput)(o))return this._signTaprootInput(e,o,t,r,n);throw new Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,r=[l.Transaction.SIGHASH_ALL]){const{hash:n,sighashType:o}=D(this.data.inputs,e,t.publicKey,this.__CACHE,r),i=[{pubkey:t.publicKey,signature:d.signature.encode(t.sign(n),o)}];return this.data.updateInput(e,{partialSig:i}),this}_signTaprootInput(e,t,r,n,o=[l.Transaction.SIGHASH_DEFAULT]){const i=this.checkTaprootHashesForSig(e,t,r,n,o),s=i.filter((e=>!e.leafHash)).map((e=>(0,h.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType)))[0],a=i.filter((e=>!!e.leafHash)).map((e=>({pubkey:(0,h.toXOnly)(r.publicKey),signature:(0,h.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash})));return s&&this.data.updateInput(e,{tapKeySig:s}),a.length&&this.data.updateInput(e,{tapScriptSig:a}),this}signInputAsync(e,t,r){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const n=(0,s.checkForInput)(this.data.inputs,e);return(0,h.isTaprootInput)(n)?this._signTaprootInputAsync(e,n,t,void 0,r):this._signInputAsync(e,t,r)}))}signTaprootInputAsync(e,t,r,n){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const o=(0,s.checkForInput)(this.data.inputs,e);if((0,h.isTaprootInput)(o))return this._signTaprootInputAsync(e,o,t,r,n);throw new Error(`Input #${e} is not of type Taproot.`)}))}_signInputAsync(e,t,r=[l.Transaction.SIGHASH_ALL]){const{hash:n,sighashType:o}=D(this.data.inputs,e,t.publicKey,this.__CACHE,r);return Promise.resolve(t.sign(n)).then((r=>{const n=[{pubkey:t.publicKey,signature:d.signature.encode(r,o)}];this.data.updateInput(e,{partialSig:n})}))}async _signTaprootInputAsync(e,t,r,n,o=[l.Transaction.SIGHASH_DEFAULT]){const i=this.checkTaprootHashesForSig(e,t,r,n,o),s=[],a=i.filter((e=>!e.leafHash))[0];if(a){const e=Promise.resolve(r.signSchnorr(a.hash)).then((e=>({tapKeySig:(0,h.serializeTaprootSignature)(e,t.sighashType)})));s.push(e)}const u=i.filter((e=>!!e.leafHash));if(u.length){const e=u.map((e=>Promise.resolve(r.signSchnorr(e.hash)).then((n=>({tapScriptSig:[{pubkey:(0,h.toXOnly)(r.publicKey),signature:(0,h.serializeTaprootSignature)(n,t.sighashType),leafHash:e.leafHash}]})))));s.push(...e)}return Promise.all(s).then((t=>{t.forEach((t=>this.data.updateInput(e,t)))}))}checkTaprootHashesForSig(e,t,r,n,o){if("function"!=typeof r.signSchnorr)throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);const i=H(e,t,this.data.inputs,r.publicKey,this.__CACHE,n,o);if(!i||!i.length)throw new Error(`Can not sign for input #${e} with the key ${r.publicKey.toString("hex")}`);return i}toBuffer(){return T(this.__CACHE),this.data.toBuffer()}toHex(){return T(this.__CACHE),this.data.toHex()}toBase64(){return T(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&z(t.witnessScript),(0,h.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&K(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){const r=this.data.outputs[e];return(0,h.checkTaprootOutputFields)(r,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}constructor(e={},t=new n.Psbt(new m)){this.data=t,this.opts=Object.assign({},g,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}}e.exports.Psbt=v;const w=e=>new m(e);class m{getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!r.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?(0,u.reverseBuffer)(r.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!r.isBuffer(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}constructor(e=r.from([2,0,0,0,0,0,0,0,0,0])){this.tx=l.Transaction.fromBuffer(e),function(e){if(!e.ins.every((e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}}function T(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function b(e,t,r){if(!t)return!1;let n;if(n=r?r.map((e=>{const r=function(e){if(65===e.length){const t=1&e[64],r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}(e);return t.find((e=>e.pubkey.equals(r)))})).filter((e=>!!e)):t,n.length>e)throw new Error("Too many signatures");return n.length===e}function S(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function E(e){return t=>!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}function x(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function A(e,t){e.forEach((e=>{if((0,h.isTaprootInput)(e)?(0,h.checkTaprootInputForSigs)(e,t):(0,y.checkInputForSig)(e,t))throw new Error("Can not modify transaction, signatures exist.")}))}function I(e,t,r){if(!(0,y.pubkeyInScript)(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function O(e,t){const n=(0,u.reverseBuffer)(r.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[n]=1}function P(e,t){return(r,n,o,i)=>{const s=e({redeem:{output:o}}).output;if(!n.equals(s))throw new Error(`${t} for ${i} #${r} doesn't match the scriptPubKey in the prevout`)}}const k=P(p.p2sh,"Redeem script"),_=P(p.p2wsh,"Witness script");function N(e,t,r,n){if(!r.every(S))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let o,i=!0;return n.__EXTRACTED_TX?(o=n.__EXTRACTED_TX,i=!1):o=n.__TX.clone(),j(r,o,n,i),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function C(e,t,r,n,o,i){const s=$(r);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return b(1,e.partialSig);case"multisig":const r=p.p2ms({output:t});return b(r.m,e.partialSig,r.pubkeys);default:return!1}}(t,r,s))throw new Error(`Can not finalize input #${e}`);return function(e,t,r,n,o,i){let s,a;const u=function(e,t,r){let n;switch(t){case"multisig":const t=function(e,t){const r=p.p2ms({output:e});return r.pubkeys.map((e=>(t.filter((t=>t.pubkey.equals(e)))[0]||{}).signature)).filter((e=>!!e))}(e,r);n=p.p2ms({output:e,signatures:t});break;case"pubkey":n=p.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=p.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=p.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),c=i?p.p2wsh({redeem:u}):null,f=o?p.p2sh({redeem:c||u}):null;n?(a=c?(0,y.witnessStackToScriptWitness)(c.witness):(0,y.witnessStackToScriptWitness)(u.witness),f&&(s=f.input)):s=f?f.input:u.input;return{finalScriptSig:s,finalScriptWitness:a}}(r,s,t.partialSig,n,o,i)}function D(e,t,r,n,o){const i=(0,s.checkForInput)(e,t),{hash:a,sighashType:u,script:c}=L(t,i,n,!1,o);return I(r,c,"sign"),{hash:a,sighashType:u}}function L(e,t,r,n,o){const i=r.__TX,s=t.sighashType||l.Transaction.SIGHASH_ALL;let a,u;if(U(s,o),t.nonWitnessUtxo){const n=V(r,t,e),o=i.ins[e].hash,s=n.getHash();if(!o.equals(s))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const a=i.ins[e].index;u=n.outs[a]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");u=t.witnessUtxo}const{meaningfulScript:c,type:f}=X(u.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)a=i.hashForWitnessV0(e,c,u.value,s);else if((0,y.isP2WPKH)(c)){const t=p.p2pkh({hash:c.slice(2)}).output;a=i.hashForWitnessV0(e,t,u.value,s)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${c.toString("hex")}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),a=i.hashForSignature(e,c,s)}return{script:c,sighashType:s,hash:a}}function B(e,t,r){const{script:n}=G(e,t,r);return(0,y.isP2TR)(n)?n.subarray(2,34):null}function R(e){return 64===e.length?e:e.subarray(0,64)}function H(e,t,n,o,i,s,a){const u=i.__TX,c=t.sighashType||l.Transaction.SIGHASH_DEFAULT;U(c,a);const p=n.map(((e,t)=>G(t,e,i))),d=p.map((e=>e.script)),g=p.map((e=>e.value)),v=[];if(t.tapInternalKey&&!s){const n=B(e,t,i)||r.from([]);if((0,h.toXOnly)(o).equals(n)){const t=u.hashForWitnessV1(e,d,g,c);v.push({pubkey:o,hash:t})}}const w=(t.tapLeafScript||[]).filter((e=>(0,y.pubkeyInScript)(o,e.script))).map((e=>{const t=(0,f.tapleafHash)({output:e.script,version:e.leafVersion});return Object.assign({hash:t},e)})).filter((e=>!s||s.equals(e.hash))).map((t=>{const r=u.hashForWitnessV1(e,d,g,l.Transaction.SIGHASH_DEFAULT,t.hash);return{pubkey:o,hash:r,leafHash:t.hash}}));return v.concat(w)}function U(e,t){if(t&&t.indexOf(e)<0){const t=function(e){let t=e&l.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case l.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case l.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case l.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function M(e,t,r){const n=(0,s.checkForInput)(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const o=n.bip32Derivation.map((e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0)).filter((e=>!!e));if(0===o.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return o.map((e=>{const t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function F(e){let t=0;function r(){const r=o.decode(e,t);return t+=o.decode.bytes,r}function n(){return n=r(),t+=n,e.slice(t-n,t);var n}return function(){const e=r(),t=[];for(let r=0;r<e;r++)t.push(n());return t}()}function K(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;const n=l.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;const o=e,i=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=o.__NON_WITNESS_UTXO_BUF_CACHE[i],t=o.__NON_WITNESS_UTXO_TX_CACHE[i];if(void 0!==e)return e;{const e=t.toBuffer();return o.__NON_WITNESS_UTXO_BUF_CACHE[i]=e,e}},set(e){o.__NON_WITNESS_UTXO_BUF_CACHE[i]=e}})}function j(e,t,r,n){let o=0;e.forEach(((e,i)=>{if(n&&e.finalScriptSig&&(t.ins[i].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[i].witness=F(e.finalScriptWitness)),e.witnessUtxo)o+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const n=V(r,e,i),s=t.ins[i].index,a=n.outs[s];o+=a.value}}));const i=t.outs.reduce(((e,t)=>e+t.value),0),s=o-i;if(s<0)throw new Error("Outputs are spending more than Inputs");const a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function V(e,t,r){const n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||K(e,t,r),n[r]}function W(e,t,r){const{script:n}=G(e,t,r);return n}function G(e,t,r){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){const n=V(r,t,e).outs[r.__TX.ins[e].index];return{script:n.script,value:n.value}}throw new Error("Can't find pubkey in input without Utxo data")}function q(e){return 33===e.length&&d.isCanonicalPubKey(e)}function X(e,t,r,n,o){const i=(0,y.isP2SHScript)(e),s=i&&n&&(0,y.isP2WSHScript)(n),a=(0,y.isP2WSHScript)(e);if(i&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&void 0===o)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let u;return s?(u=o,k(t,e,n,r),_(t,n,o,r),z(u)):a?(u=o,_(t,e,o,r),z(u)):i?(u=n,k(t,e,n,r)):u=e,{meaningfulScript:u,type:s?"p2sh-p2wsh":i?"p2sh":a?"p2wsh":"raw"}}function z(e){if((0,y.isP2WPKH)(e)||(0,y.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function $(e){return(0,y.isP2WPKH)(e)?"witnesspubkeyhash":(0,y.isP2PKH)(e)?"pubkeyhash":(0,y.isP2MS)(e)?"multisig":(0,y.isP2PK)(e)?"pubkey":"nonstandard"}function Y(e){return[...Array(e).keys()]}})),i.register("8iLYC",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("4NdyP"),o=i("1zbco"),s=i("5P6cq"),a=i("hJBXC");e.exports.Psbt=class{static fromBase64(e,t){const n=r.from(e,"base64");return this.fromBuffer(n,t)}static fromHex(e,t){const n=r.from(e,"hex");return this.fromBuffer(n,t)}static fromBuffer(e,t){const r=o.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return o.psbtToBuffer(this)}updateGlobal(e){return a.updateGlobal(e,this.globalMap),this}updateInput(e,t){const r=a.checkForInput(this.inputs,e);return a.updateInput(t,r),this}updateOutput(e,t){const r=a.checkForOutput(this.outputs,e);return a.updateOutput(t,r),this}addUnknownKeyValToGlobal(e){return a.checkHasKey(e,this.globalMap.unknownKeyVals,a.getEnumLength(s.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){const r=a.checkForInput(this.inputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){const r=a.checkForOutput(this.outputs,e);return a.checkHasKey(t,r.unknownKeyVals,a.getEnumLength(s.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToInput(r,e))),a.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToOutput(r,e))),a.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){const t=a.checkForInput(this.inputs,e);a.inputCheckUncleanFinalized(e,t);for(const e of Object.keys(t))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(e)||delete t[e];return this}combine(...e){const t=n.combine([this].concat(e));return Object.assign(this,t),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}}})),i.register("4NdyP",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=i("1zbco");function n(e,t,r){return n=>{if(e.has(n))return;const o=r.filter((e=>e.key.toString("hex")===n))[0];t.push(o),e.add(n)}}function o(e){return e.globalMap.unsignedTx}function s(e){const t=new Set;return e.forEach((e=>{const r=e.key.toString("hex");if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)})),t}e.exports.combine=function(e){const t=e[0],i=r.psbtToKeyVals(t),a=e.slice(1);if(0===a.length)throw new Error("Combine: Nothing to combine");const u=o(t);if(void 0===u)throw new Error("Combine: Self missing transaction");const c=s(i.globalKeyVals),p=i.inputKeyVals.map(s),f=i.outputKeyVals.map(s);for(const e of a){const t=o(e);if(void 0===t||!t.toBuffer().equals(u.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const a=r.psbtToKeyVals(e);s(a.globalKeyVals).forEach(n(c,i.globalKeyVals,a.globalKeyVals));a.inputKeyVals.map(s).forEach(((e,t)=>e.forEach(n(p[t],i.inputKeyVals[t],a.inputKeyVals[t]))));a.outputKeyVals.map(s).forEach(((e,t)=>e.forEach(n(f[t],i.outputKeyVals[t],a.outputKeyVals[t]))))}return r.psbtFromKeyVals(u,{globalMapKeyVals:i.globalKeyVals,inputKeyVals:i.inputKeyVals,outputKeyVals:i.outputKeyVals})}})),i.register("1zbco",(function(e,t){function r(t){for(var r in t)e.exports.hasOwnProperty(r)||(e.exports[r]=t[r])}Object.defineProperty(e.exports,"__esModule",{value:!0}),r(i("4UTHj")),r(i("cbQy1"))})),i.register("4UTHj",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("1RySn"),o=i("gzQr4"),s=i("hrqOt"),a=i("5P6cq");function u(e,t,n){if(!t.equals(r.from([n])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}function c(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:i}){const s={unsignedTx:e};let c=0;for(const e of t)switch(e.key[0]){case a.GlobalTypes.UNSIGNED_TX:if(u("global",e.key,a.GlobalTypes.UNSIGNED_TX),c>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");c++;break;case a.GlobalTypes.GLOBAL_XPUB:void 0===s.globalXpub&&(s.globalXpub=[]),s.globalXpub.push(n.globals.globalXpub.decode(e));break;default:s.unknownKeyVals||(s.unknownKeyVals=[]),s.unknownKeyVals.push(e)}const p=r.length,f=i.length,d=[],l=[];for(const e of o.range(p)){const t={};for(const o of r[e])switch(n.inputs.checkPubkey(o),o.key[0]){case a.InputTypes.NON_WITNESS_UTXO:if(u("input",o.key,a.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=n.inputs.nonWitnessUtxo.decode(o);break;case a.InputTypes.WITNESS_UTXO:if(u("input",o.key,a.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=n.inputs.witnessUtxo.decode(o);break;case a.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(n.inputs.partialSig.decode(o));break;case a.InputTypes.SIGHASH_TYPE:if(u("input",o.key,a.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=n.inputs.sighashType.decode(o);break;case a.InputTypes.REDEEM_SCRIPT:if(u("input",o.key,a.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=n.inputs.redeemScript.decode(o);break;case a.InputTypes.WITNESS_SCRIPT:if(u("input",o.key,a.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=n.inputs.witnessScript.decode(o);break;case a.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(n.inputs.bip32Derivation.decode(o));break;case a.InputTypes.FINAL_SCRIPTSIG:u("input",o.key,a.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=n.inputs.finalScriptSig.decode(o);break;case a.InputTypes.FINAL_SCRIPTWITNESS:u("input",o.key,a.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=n.inputs.finalScriptWitness.decode(o);break;case a.InputTypes.POR_COMMITMENT:u("input",o.key,a.InputTypes.POR_COMMITMENT),t.porCommitment=n.inputs.porCommitment.decode(o);break;case a.InputTypes.TAP_KEY_SIG:u("input",o.key,a.InputTypes.TAP_KEY_SIG),t.tapKeySig=n.inputs.tapKeySig.decode(o);break;case a.InputTypes.TAP_SCRIPT_SIG:void 0===t.tapScriptSig&&(t.tapScriptSig=[]),t.tapScriptSig.push(n.inputs.tapScriptSig.decode(o));break;case a.InputTypes.TAP_LEAF_SCRIPT:void 0===t.tapLeafScript&&(t.tapLeafScript=[]),t.tapLeafScript.push(n.inputs.tapLeafScript.decode(o));break;case a.InputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(n.inputs.tapBip32Derivation.decode(o));break;case a.InputTypes.TAP_INTERNAL_KEY:u("input",o.key,a.InputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=n.inputs.tapInternalKey.decode(o);break;case a.InputTypes.TAP_MERKLE_ROOT:u("input",o.key,a.InputTypes.TAP_MERKLE_ROOT),t.tapMerkleRoot=n.inputs.tapMerkleRoot.decode(o);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(o)}d.push(t)}for(const e of o.range(f)){const t={};for(const r of i[e])switch(n.outputs.checkPubkey(r),r.key[0]){case a.OutputTypes.REDEEM_SCRIPT:if(u("output",r.key,a.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=n.outputs.redeemScript.decode(r);break;case a.OutputTypes.WITNESS_SCRIPT:if(u("output",r.key,a.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=n.outputs.witnessScript.decode(r);break;case a.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(n.outputs.bip32Derivation.decode(r));break;case a.OutputTypes.TAP_INTERNAL_KEY:u("output",r.key,a.OutputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=n.outputs.tapInternalKey.decode(r);break;case a.OutputTypes.TAP_TREE:u("output",r.key,a.OutputTypes.TAP_TREE),t.tapTree=n.outputs.tapTree.decode(r);break;case a.OutputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(n.outputs.tapBip32Derivation.decode(r));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(r)}l.push(t)}return{globalMap:s,inputs:d,outputs:l}}e.exports.psbtFromBuffer=function(e,t){let r=0;function n(){const t=s.decode(e,r);r+=s.encodingLength(t);const n=e.slice(r,r+t);return r+=t,n}function i(){return{key:n(),value:n()}}function u(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");const t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){const t=e.readUInt32BE(r);return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){const t=e.readUInt8(r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");const p=[],f={};for(;!u();){const e=i(),t=e.key.toString("hex");if(f[t])throw new Error("Format Error: Keys must be unique for global keymap: key "+t);f[t]=1,p.push(e)}const d=p.filter((e=>e.key[0]===a.GlobalTypes.UNSIGNED_TX));if(1!==d.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const l=t(d[0].value),{inputCount:h,outputCount:y}=l.getInputOutputCounts(),g=[],v=[];for(const e of o.range(h)){const t={},r=[];for(;!u();){const n=i(),o=n.key.toString("hex");if(t[o])throw new Error("Format Error: Keys must be unique for each input: input index "+e+" key "+o);t[o]=1,r.push(n)}g.push(r)}for(const e of o.range(y)){const t={},r=[];for(;!u();){const n=i(),o=n.key.toString("hex");if(t[o])throw new Error("Format Error: Keys must be unique for each output: output index "+e+" key "+o);t[o]=1,r.push(n)}v.push(r)}return c(l,{globalMapKeyVals:p,inputKeyVals:g,outputKeyVals:v})},e.exports.checkKeyBuffer=u,e.exports.psbtFromKeyVals=c})),i.register("1RySn",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=i("5P6cq"),n=i("aDvaN"),o=i("d4jou"),s=i("6jhGu"),a=i("lsmPE"),u=i("d62HW"),c=i("1KJo4"),p=i("aRzJf"),f=i("is2bO"),d=i("dYISO"),l=i("dfF3O"),h=i("cbkAY"),y=i("ioPeD"),g=i("eRSI3"),v=i("c7v85"),w=i("3GmC9"),m=i("j4lnL"),T=i("2VPyI"),b=i("8Kh5J"),S=i("30nqf"),E=i("bXFDC");const x={unsignedTx:o,globalXpub:n,checkPubkey:m.makeChecker([])};e.exports.globals=x;const A={nonWitnessUtxo:u,partialSig:c,sighashType:f,finalScriptSig:s,finalScriptWitness:a,porCommitment:p,witnessUtxo:g,bip32Derivation:w.makeConverter(r.InputTypes.BIP32_DERIVATION),redeemScript:T.makeConverter(r.InputTypes.REDEEM_SCRIPT),witnessScript:E.makeConverter(r.InputTypes.WITNESS_SCRIPT),checkPubkey:m.makeChecker([r.InputTypes.PARTIAL_SIG,r.InputTypes.BIP32_DERIVATION]),tapKeySig:d,tapScriptSig:y,tapLeafScript:l,tapBip32Derivation:b.makeConverter(r.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:S.makeConverter(r.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:h};e.exports.inputs=A;const I={bip32Derivation:w.makeConverter(r.OutputTypes.BIP32_DERIVATION),redeemScript:T.makeConverter(r.OutputTypes.REDEEM_SCRIPT),witnessScript:E.makeConverter(r.OutputTypes.WITNESS_SCRIPT),checkPubkey:m.makeChecker([r.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:b.makeConverter(r.OutputTypes.TAP_BIP32_DERIVATION),tapTree:v,tapInternalKey:S.makeConverter(r.OutputTypes.TAP_INTERNAL_KEY)};e.exports.outputs=I})),i.register("5P6cq",(function(e,t){var r,n,o;Object.defineProperty(e.exports,"__esModule",{value:!0}),(r=e.exports.GlobalTypes||(e.exports.GlobalTypes={}))[r.UNSIGNED_TX=0]="UNSIGNED_TX",r[r.GLOBAL_XPUB=1]="GLOBAL_XPUB",e.exports.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(n=e.exports.InputTypes||(e.exports.InputTypes={}))[n.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",n[n.WITNESS_UTXO=1]="WITNESS_UTXO",n[n.PARTIAL_SIG=2]="PARTIAL_SIG",n[n.SIGHASH_TYPE=3]="SIGHASH_TYPE",n[n.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=6]="BIP32_DERIVATION",n[n.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",n[n.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",n[n.POR_COMMITMENT=9]="POR_COMMITMENT",n[n.TAP_KEY_SIG=19]="TAP_KEY_SIG",n[n.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",n[n.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",n[n.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",n[n.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",n[n.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT",e.exports.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],(o=e.exports.OutputTypes||(e.exports.OutputTypes={}))[o.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",o[o.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",o[o.BIP32_DERIVATION=2]="BIP32_DERIVATION",o[o.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",o[o.TAP_TREE=6]="TAP_TREE",o[o.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION",e.exports.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]})),i.register("aDvaN",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");const o=e=>[...Array(e).keys()];e.exports.decode=function(e){if(e.key[0]!==n.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(const t of o(e.value.length/4-1)){const n=e.value.readUInt32LE(4*t+4),o=!!(2147483648&n),i=2147483647&n;r.path+="/"+i.toString(10)+(o?"'":"")}return r},e.exports.encode=function(e){const t=r.from([n.GlobalTypes.GLOBAL_XPUB]),o=r.concat([t,e.extendedPubkey]),i=e.path.split("/"),s=r.allocUnsafe(4*i.length);e.masterFingerprint.copy(s,0);let a=4;return i.slice(1).forEach((e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,a),a+=4})),{key:o,value:s}},e.exports.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",e.exports.check=function(e){const t=e.extendedPubkey,n=e.masterFingerprint,o=e.path;return r.isBuffer(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&r.isBuffer(n)&&4===n.length&&"string"==typeof o&&!!o.match(/^m(\/\d+'?)*$/)},e.exports.canAddToArray=function(e,t,r){const n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.extendedPubkey.equals(t.extendedPubkey))).length)}})),i.register("d4jou",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.encode=function(e){return{key:r.from([n.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}})),i.register("6jhGu",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.FINAL_SCRIPTSIG]),value:e}},e.exports.expected="Buffer",e.exports.check=function(e){return r.isBuffer(e)},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}})),i.register("lsmPE",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},e.exports.expected="Buffer",e.exports.check=function(e){return r.isBuffer(e)},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}})),i.register("d62HW",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.NON_WITNESS_UTXO]),value:e}},e.exports.expected="Buffer",e.exports.check=function(e){return r.isBuffer(e)},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}})),i.register("1KJo4",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},e.exports.encode=function(e){const t=r.from([n.InputTypes.PARTIAL_SIG]);return{key:r.concat([t,e.pubkey]),value:e.signature}},e.exports.expected="{ pubkey: Buffer; signature: Buffer; }",e.exports.check=function(e){return r.isBuffer(e.pubkey)&&r.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!r.isBuffer(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;const t=e[3];if(t>33||t<1)return!1;if(2!==e[3+t+1])return!1;const n=e[3+t+2];return!(n>33||n<1)&&e.length===3+t+2+n+2}(e.signature)},e.exports.canAddToArray=function(e,t,r){const n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)}})),i.register("aRzJf",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},e.exports.encode=function(e){return{key:r.from([n.InputTypes.POR_COMMITMENT]),value:r.from(e,"utf8")}},e.exports.expected="string",e.exports.check=function(e){return"string"==typeof e},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}})),i.register("is2bO",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},e.exports.encode=function(e){const t=r.from([n.InputTypes.SIGHASH_TYPE]),o=r.allocUnsafe(4);return o.writeUInt32LE(e,0),{key:t,value:o}},e.exports.expected="number",e.exports.check=function(e){return"number"==typeof e},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}})),i.register("dYISO",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");function o(e){return r.isBuffer(e)&&(64===e.length||65===e.length)}e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!o(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.TAP_KEY_SIG]),value:e}},e.exports.expected="Buffer",e.exports.check=o,e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapKeySig}})),i.register("dfF3O",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!=0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));const t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));const r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}},e.exports.encode=function(e){const t=r.from([n.InputTypes.TAP_LEAF_SCRIPT]),o=r.from([e.leafVersion]);return{key:r.concat([t,e.controlBlock]),value:r.concat([e.script,o])}},e.exports.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }",e.exports.check=function(e){return r.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&r.isBuffer(e.script)},e.exports.canAddToArray=function(e,t,r){const n=t.controlBlock.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.controlBlock.equals(t.controlBlock))).length)}})),i.register("cbkAY",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");function o(e){return r.isBuffer(e)&&32===e.length}e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!o(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.TAP_MERKLE_ROOT]),value:e}},e.exports.expected="Buffer",e.exports.check=o,e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot}})),i.register("ioPeD",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(65!==e.key.length)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(64!==e.value.length&&65!==e.value.length)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}},e.exports.encode=function(e){const t=r.from([n.InputTypes.TAP_SCRIPT_SIG]);return{key:r.concat([t,e.pubkey,e.leafHash]),value:e.signature}},e.exports.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }",e.exports.check=function(e){return r.isBuffer(e.pubkey)&&r.isBuffer(e.leafHash)&&r.isBuffer(e.signature)&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)},e.exports.canAddToArray=function(e,t,r){const n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey)&&e.leafHash.equals(t.leafHash))).length)}})),i.register("eRSI3",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq"),o=i("gzQr4"),s=i("hrqOt");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));const t=o.readUInt64LE(e.value,0);let r=8;const i=s.decode(e.value,r);r+=s.encodingLength(i);const a=e.value.slice(r);if(a.length!==i)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:a,value:t}},e.exports.encode=function(e){const{script:t,value:i}=e,a=s.encodingLength(t.length),u=r.allocUnsafe(8+a+t.length);return o.writeUInt64LE(u,i,0),s.encode(t.length,u,8),t.copy(u,8+a),{key:r.from([n.InputTypes.WITNESS_UTXO]),value:u}},e.exports.expected="{ script: Buffer; value: number; }",e.exports.check=function(e){return r.isBuffer(e.script)&&"number"==typeof e.value},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}})),i.register("gzQr4",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("hrqOt");function o(e){const t=e.key.length,o=e.value.length,i=n.encodingLength(t),s=n.encodingLength(o),a=r.allocUnsafe(i+t+s+o);return n.encode(t,a,0),e.key.copy(a,i),n.encode(o,a,i+t),e.value.copy(a,i+t+s),a}function s(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}e.exports.range=e=>[...Array(e).keys()],e.exports.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},e.exports.keyValsToBuffer=function(e){const t=e.map(o);return t.push(r.from([0])),r.concat(t)},e.exports.keyValToBuffer=o,e.exports.readUInt64LE=function(e,t){const r=e.readUInt32LE(t);let n=e.readUInt32LE(t+4);return n*=4294967296,s(n+r,9007199254740991),n+r},e.exports.writeUInt64LE=function(e,t,r){return s(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}})),i.register("hrqOt",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});const n=9007199254740991;function o(e){if(e<0||e>n||e%1!=0)throw new RangeError("value out of range")}function s(e){return o(e),e<253?1:e<=65535?3:e<=4294967295?5:9}e.exports.encode=function e(t,n,i){if(o(t),n||(n=r.allocUnsafe(s(t))),!r.isBuffer(n))throw new TypeError("buffer must be a Buffer instance");return i||(i=0),t<253?(n.writeUInt8(t,i),Object.assign(e,{bytes:1})):t<=65535?(n.writeUInt8(253,i),n.writeUInt16LE(t,i+1),Object.assign(e,{bytes:3})):t<=4294967295?(n.writeUInt8(254,i),n.writeUInt32LE(t,i+1),Object.assign(e,{bytes:5})):(n.writeUInt8(255,i),n.writeUInt32LE(t>>>0,i+1),n.writeUInt32LE(t/4294967296|0,i+5),Object.assign(e,{bytes:9})),n},e.exports.decode=function e(t,n){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");n||(n=0);const i=t.readUInt8(n);if(i<253)return Object.assign(e,{bytes:1}),i;if(253===i)return Object.assign(e,{bytes:3}),t.readUInt16LE(n+1);if(254===i)return Object.assign(e,{bytes:5}),t.readUInt32LE(n+1);{Object.assign(e,{bytes:9});const r=t.readUInt32LE(n+1),i=4294967296*t.readUInt32LE(n+5)+r;return o(i),i}},e.exports.encodingLength=s})),i.register("c7v85",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("5P6cq"),o=i("hrqOt");e.exports.decode=function(e){if(e.key[0]!==n.OutputTypes.TAP_TREE||1!==e.key.length)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0;const r=[];for(;t<e.value.length;){const n=e.value[t++],i=e.value[t++],s=o.decode(e.value,t);t+=o.encodingLength(s),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+s)}),t+=s}return{leaves:r}},e.exports.encode=function(e){const t=r.from([n.OutputTypes.TAP_TREE]),i=[].concat(...e.leaves.map((e=>[r.of(e.depth,e.leafVersion),o.encode(e.script.length),e.script])));return{key:t,value:r.concat(i)}},e.exports.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }",e.exports.check=function(e){return Array.isArray(e.leaves)&&e.leaves.every((e=>e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&r.isBuffer(e.script)))},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapTree}})),i.register("3GmC9",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});const n=e=>[...Array(e).keys()],o=e=>33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0];e.exports.makeConverter=function(e,t=o){return{decode:function(r){if(r.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+r.key.toString("hex"));const o=r.key.slice(1);if(!t(o))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+r.key.toString("hex"));if(r.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const i={masterFingerprint:r.value.slice(0,4),pubkey:o,path:"m"};for(const e of n(r.value.length/4-1)){const t=r.value.readUInt32LE(4*e+4),n=!!(2147483648&t),o=2147483647&t;i.path+="/"+o.toString(10)+(n?"'":"")}return i},encode:function(t){const n=r.from([e]),o=r.concat([n,t.pubkey]),i=t.path.split("/"),s=r.allocUnsafe(4*i.length);t.masterFingerprint.copy(s,0);let a=4;return i.slice(1).forEach((e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,a),a+=4})),{key:o,value:s}},check:function(e){return r.isBuffer(e.pubkey)&&r.isBuffer(e.masterFingerprint)&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){const n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)}}}})),i.register("j4lnL",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeChecker=function(e){return function(t){let r;if(e.includes(t.key[0])&&(r=t.key.slice(1),33!==r.length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}}})),i.register("2VPyI",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:r.from([e]),value:t}},check:function(e){return r.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}})),i.register("8Kh5J",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("hrqOt"),o=i("3GmC9");const s=e=>32===e.length;e.exports.makeConverter=function(e){const t=o.makeConverter(e,s);return{decode:function(e){const r=n.decode(e.value),o=n.encodingLength(r),i=t.decode({key:e.key,value:e.value.slice(o+32*r)}),s=new Array(r);for(let t=0,n=o;t<r;t++,n+=32)s[t]=e.value.slice(n,n+32);return Object.assign({},i,{leafHashes:s})},encode:function(e){const o=t.encode(e),i=n.encodingLength(e.leafHashes.length),s=r.allocUnsafe(i);n.encode(e.leafHashes.length,s);const a=r.concat([s,...e.leafHashes,o.value]);return Object.assign({},o,{value:a})},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every((e=>r.isBuffer(e)&&32===e.length))&&t.check(e)},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }",canAddToArray:t.canAddToArray}}})),i.register("30nqf",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+t.key.toString("hex"));if(32!==t.value.length)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:r.from([e]),value:t}},check:function(e){return r.isBuffer(e)&&32===e.length},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}}})),i.register("bXFDC",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:r.from([e]),value:t}},check:function(e){return r.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}})),i.register("cbQy1",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("1RySn"),o=i("gzQr4");e.exports.psbtToBuffer=function({globalMap:e,inputs:t,outputs:n}){const{globalKeyVals:i,inputKeyVals:s,outputKeyVals:a}=u({globalMap:e,inputs:t,outputs:n}),c=o.keyValsToBuffer(i),p=e=>0===e.length?[r.from([0])]:e.map(o.keyValsToBuffer),f=p(s),d=p(a),l=r.allocUnsafe(5);return l.writeUIntBE(482972169471,0,5),r.concat([l,c].concat(f,d))};const s=(e,t)=>e.key.compare(t.key);function a(e,t){const r=new Set,n=Object.entries(e).reduce(((e,[n,o])=>{if("unknownKeyVals"===n)return e;const i=t[n];if(void 0===i)return e;const s=(Array.isArray(o)?o:[o]).map(i.encode);return s.map((e=>e.key.toString("hex"))).forEach((e=>{if(r.has(e))throw new Error("Serialize Error: Duplicate key: "+e);r.add(e)})),e.concat(s)}),[]),o=e.unknownKeyVals?e.unknownKeyVals.filter((e=>!r.has(e.key.toString("hex")))):[];return n.concat(o).sort(s)}function u({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:a(e,n.globals),inputKeyVals:t.map((e=>a(e,n.inputs))),outputKeyVals:r.map((e=>a(e,n.outputs)))}}e.exports.psbtToKeyVals=u})),i.register("hJBXC",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=i("1RySn");function o(e,t){const r=e[t];if(void 0===r)throw new Error(`No input #${t}`);return r}function s(e,t){const r=e[t];if(void 0===r)throw new Error(`No output #${t}`);return r}function a(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function u(e){return(t,r)=>{for(const o of Object.keys(t)){const i=t[o],{canAdd:s,canAddToArray:u,check:c,expected:p}=n[e+"s"][o]||{};if(c)if(!!u){if(!Array.isArray(i)||r[o]&&!Array.isArray(r[o]))throw new Error(`Key type ${o} must be an array`);i.every(c)||a(e,o,p,i);const t=r[o]||[],n=new Set;if(!i.every((e=>u(t,e,n))))throw new Error("Can not add duplicate data to array");r[o]=t.concat(i)}else{if(c(i)||a(e,o,p,i),!s(r,i))throw new Error(`Can not add duplicate data to ${e}`);r[o]=i}}}}e.exports.checkForInput=o,e.exports.checkForOutput=s,e.exports.checkHasKey=function(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter((t=>t.key.equals(e.key))).length)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)},e.exports.getEnumLength=function(e){let t=0;return Object.keys(e).forEach((e=>{Number(isNaN(Number(e)))&&t++})),t},e.exports.inputCheckUncleanFinalized=function(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){const e=!!t.redeemScript,n=!!t.witnessScript,o=!e||!!t.finalScriptSig,i=!n||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=o&&i&&s}if(!1===r)throw new Error(`Input #${e} has too much or too little data to clean`)},e.exports.updateGlobal=u("global"),e.exports.updateInput=u("input"),e.exports.updateOutput=u("output"),e.exports.addInputAttributes=function(t,r){const n=o(t,t.length-1);e.exports.updateInput(r,n)},e.exports.addOutputAttributes=function(t,r){const n=s(t,t.length-1);e.exports.updateOutput(r,n)},e.exports.defaultVersionSetter=function(e,t){if(!r.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},e.exports.defaultLocktimeSetter=function(e,t){if(!r.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}})),i.register("gg8iN",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.checkTaprootInputForSigs=e.exports.tapTreeFromList=e.exports.tapTreeToList=e.exports.tweakInternalPubKey=e.exports.checkTaprootOutputFields=e.exports.checkTaprootInputFields=e.exports.isTaprootOutput=e.exports.isTaprootInput=e.exports.serializeTaprootSignature=e.exports.tapScriptFinalizer=e.exports.toXOnly=void 0;var n=i("7LSV8"),o=i("cqTLw"),s=i("lBgd9"),a=i("4BE1A"),u=i("2Yfad");s=i("lBgd9");function c(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,s.isP2TR)(e.witnessUtxo.script))}function p(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,s.isP2TR)(t))}function f(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:function(e){let t;for(const r of e)if(t=h(r,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}(e)}function d(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||o.Transaction.SIGHASH_DEFAULT}}function l(e,t=[],r=0){if(r>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,n.isTapleaf)(e)?(t.push({depth:r,leafVersion:e.version||a.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&l(e[0],t,r+1),e[1]&&l(e[1],t,r+1),t):[]}function h(e,t,r=0){if(r>a.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,n.isTapleaf)(t))return;const o=h(e,t&&t[0],r+1);if(o)return[o,t&&t[1]];const i=h(e,t&&t[1],r+1);return i?[t&&t[0],i]:void 0}function y(e,t){if(!t)return!0;const r=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(0,a.rootHashFromPath)(e.controlBlock,r).equals(t)}function g(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}e.exports.toXOnly=e=>32===e.length?e:e.slice(1,33),e.exports.tapScriptFinalizer=function(e,t,r){const n=function(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);const n=(e.tapLeafScript||[]).sort(((e,t)=>e.controlBlock.length-t.controlBlock.length)).find((t=>function(e,t,r){const n=(0,a.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&void 0!==t.find((e=>e.leafHash.equals(n)))}(t,e.tapScriptSig,r)));if(!n)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}(t,e,r);try{const e=function(e,t){const r=(0,a.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter((e=>e.leafHash.equals(r))).map((e=>function(e,t){return Object.assign({positionInScript:(0,s.pubkeyPositionInScript)(t.pubkey,e)},t)}(t.script,e))).sort(((e,t)=>t.positionInScript-e.positionInScript)).map((e=>e.signature))}(t,n),r=e.concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,s.witnessStackToScriptWitness)(r)}}catch(t){throw new Error(`Can not finalize taproot input #${e}: ${t}`)}},e.exports.serializeTaprootSignature=function(e,t){const n=t?r.from([t]):r.from([]);return r.concat([e,n])},e.exports.isTaprootInput=c,e.exports.isTaprootOutput=p,e.exports.checkTaprootInputFields=function(e,t,r){!function(e,t,r){const n=c(e)&&g(t),o=g(e)&&c(t),i=e===t&&c(t)&&g(t);if(n||o||i)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}(e,t,r),function(e,t,r){if(t.tapMerkleRoot){const n=(t.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot))),o=(e.tapLeafScript||[]).every((e=>y(e,t.tapMerkleRoot)));if(!n||!o)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot){if(!(t.tapLeafScript||[]).every((t=>y(t,e.tapMerkleRoot))))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}}(e,t,r)},e.exports.checkTaprootOutputFields=function(e,t,r){!function(e,t,r){const n=p(e)&&g(t),o=g(e)&&p(t),i=e===t&&p(t)&&g(t);if(n||o||i)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}(e,t,r),function(e,t){if(!t.tapTree&&!t.tapInternalKey)return;const r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){const{script:t}=e,o=function(e,t){const r=t&&f(t.leaves),{output:n}=(0,u.p2tr)({internalPubkey:e,scriptTree:r});return n}(r,n);if(t&&!t.equals(o))throw new Error("Error adding output. Script or address missmatch.")}}(e,t)},e.exports.tweakInternalPubKey=function(e,t){const r=t.tapInternalKey,n=r&&(0,a.tweakKey)(r,t.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x},e.exports.tapTreeToList=function(e){if(!(0,n.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return l(e)},e.exports.tapTreeFromList=f,e.exports.checkTaprootInputForSigs=function(e,t){return function(e){const t=[];e.tapKeySig&&t.push(e.tapKeySig);e.tapScriptSig&&t.push(...e.tapScriptSig.map((e=>e.signature)));if(!t.length){const r=function(e){if(!e)return;const t=e.slice(2);if(64===t.length||65===t.length)return t}(e.finalScriptWitness);r&&t.push(r)}return t}(e).some((e=>(0,s.signatureBlocksAction)(e,d,t)))}})),i.register("lBgd9",(function(e,t){var r=i("6rT8n").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.signatureBlocksAction=e.exports.checkInputForSig=e.exports.pubkeyInScript=e.exports.pubkeyPositionInScript=e.exports.witnessStackToScriptWitness=e.exports.isP2TR=e.exports.isP2SHScript=e.exports.isP2WSHScript=e.exports.isP2WPKH=e.exports.isP2PKH=e.exports.isP2PK=e.exports.isP2MS=void 0;var n=i("hrqOt"),o=i("kNEDo"),s=i("cqTLw"),a=i("3ILtZ"),u=i("2Yfad");function c(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function p(e,t){const r=(0,a.hash160)(e),n=e.slice(1,33),i=o.decompile(t);if(null===i)throw new Error("Unknown script error");return i.findIndex((t=>"number"!=typeof t&&(t.equals(e)||t.equals(r)||t.equals(n))))}function f(e,t,r){const{hashType:n}=t(e),o=[];n&s.Transaction.SIGHASH_ANYONECANPAY&&o.push("addInput");switch(31&n){case s.Transaction.SIGHASH_ALL:break;case s.Transaction.SIGHASH_SINGLE:case s.Transaction.SIGHASH_NONE:o.push("addOutput"),o.push("setInputSequence")}return-1===o.indexOf(r)}e.exports.isP2MS=c(u.p2ms),e.exports.isP2PK=c(u.p2pk),e.exports.isP2PKH=c(u.p2pkh),e.exports.isP2WPKH=c(u.p2wpkh),e.exports.isP2WSHScript=c(u.p2wsh),e.exports.isP2SHScript=c(u.p2sh),e.exports.isP2TR=c(u.p2tr),e.exports.witnessStackToScriptWitness=function(e){let t=r.allocUnsafe(0);function o(e){const o=t.length,i=n.encodingLength(e);t=r.concat([t,r.allocUnsafe(i)]),n.encode(e,t,o)}function i(e){o(e.length),function(e){t=r.concat([t,r.from(e)])}(e)}var s;return o((s=e).length),s.forEach(i),t},e.exports.pubkeyPositionInScript=p,e.exports.pubkeyInScript=function(e,t){return-1!==p(e,t)},e.exports.checkInputForSig=function(e,t){return function(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=function(e){const t=e.finalScriptSig&&o.decompile(e.finalScriptSig)||[],n=e.finalScriptWitness&&o.decompile(e.finalScriptWitness)||[];return t.concat(n).filter((e=>r.isBuffer(e)&&o.isCanonicalScriptSignature(e))).map((e=>({signature:e})))}(e)}else t=e.partialSig;return t.map((e=>e.signature))}(e).some((e=>f(e,o.signature.decode,t)))},e.exports.signatureBlocksAction=f})),i.register("a54cU",(function(t,r){e(t.exports,"getAddressTypeFromDerivationPathType",(function(){return s}));var n=i("d0go3"),o=i("gd9Oy");function s(e){switch(e){case n.DerivationPathType.Bip44RootSolana:case n.DerivationPathType.Bip44ChangeSolana:case n.DerivationPathType.Bip44Solana:case n.DerivationPathType.DeprecatedSolana:return o.AddressType.Solana;case n.DerivationPathType.Bip44RootEthereum:case n.DerivationPathType.Bip44Ethereum:case n.DerivationPathType.Bip44EthereumSecondary:case n.DerivationPathType.Bip44EthereumTertiary:return o.AddressType.EVM;case n.DerivationPathType.BitcoinLegacy:return o.AddressType.BitcoinLegacy;case n.DerivationPathType.BitcoinNativeSegwit:return o.AddressType.BitcoinNativeSegwit;case n.DerivationPathType.BitcoinNestedSegwit:return o.AddressType.BitcoinNestedSegwit;case n.DerivationPathType.BitcoinTaproot:return o.AddressType.BitcoinTaproot}}})),i.register("9tNa2",(function(t,r){e(t.exports,"getSolanaLedgerApp",(function(){return o}),(function(e){return o=e})),e(t.exports,"getEthereumLedgerApp",(function(){return s}),(function(e){return s=e})),e(t.exports,"getEthereumLedgerService",(function(){return a}),(function(e){return a=e})),e(t.exports,"getBitcoinLedgerApp",(function(){return u}),(function(e){return u=e}));var n=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};function o(e){return n(this,void 0,void 0,(function*(){const{default:t}=yield i("hWeJs");return new t(e)}))}function s(e){return n(this,void 0,void 0,(function*(){const{default:t}=yield i("j96oi");return new t(e)}))}function a(){return n(this,void 0,void 0,(function*(){const{ledgerService:e}=yield i("j96oi");return e}))}function u(e){return n(this,void 0,void 0,(function*(){const{AppClient:t}=yield i("d7BBz");return new t(e)}))}})),i.register("hWeJs",(function(e,t){e.exports=Promise.all([import("./"+i("5V6iE").resolve("9eTlR")),import("./"+i("5V6iE").resolve("9x3Iv"))]).then((()=>i("k4oSe")))})),i.register("j96oi",(function(e,t){e.exports=Promise.all([import("./"+i("5V6iE").resolve("9eTlR")),import("./"+i("5V6iE").resolve("hFDiN"))]).then((()=>i("QdbMl")))})),i.register("d7BBz",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("3P9Hz")).then((()=>i("2h0yV")))})),i.register("cN3SA",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("98k3u")).then((()=>i("lQedB")))})),i.register("hOTYq",(function(r,n){e(r.exports,"createEthereumChildAddressDeriver",(function(){return d}));var o=i("6rT8n"),s=i("6xolq"),a=i("xtN6v"),u=i("cSgaA"),c=i("4chX7"),p=i("13Nf3");const f=(e,r,n)=>(e=>{const r=(0,a.sha256)((0,a.sha256)(e)).replace("0x","").slice(0,8);return t(p).encode(o.Buffer.concat([o.Buffer.from(e),o.Buffer.from(r,"hex")]))})(o.Buffer.from(`0488b21e04${e.replace("0x","")}00000000${r}${n.replace("0x","").toLowerCase()}`,"hex")),d=(e,t)=>{const r=(n=e.publicKey,(0,a.ripemd160)((0,a.sha256)((0,u.computePublicKey)(`0x${n}`,!0))).replace("0x","").slice(0,8));var n;const o=(0,u.computePublicKey)(`0x${t.publicKey}`,!0),i=f(r,t.chainCode,o),p=s.HDNode.fromExtendedKey(i);return e=>{const t=p.derivePath(`${e}`);if(c.EthAddress.safeParse(t.address).success)return{publicKey:t.publicKey,address:t.address};throw new Error(`Invalid Ethereum Child Address derived: ${t.address}`)}}})),i.register("hgJF4",(function(t,r){e(t.exports,"debugLog",(function(){return n}));const n=(e,t)=>{if(e){const e=new Date;console.log(`[${e.toISOString()}] ${t}`)}}})),i.register("02DDj",(function(t,r){e(t.exports,"useLedgerBLETransportState",(function(){return h}),(function(e){return h=e}));var n=i("4y59b"),o=i("lNRH9"),s=i("lMux6"),a=i("hgJF4"),u=i("de28I"),c=i("7wUYG"),p=i("3MSav"),f=i("4ODJX"),d=i("gw8mx"),l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const h=(e,t,r)=>{const{deviceID:i,enabled:h=!0,enableDebugLogs:y=!1,refetchInterval:g=1e3,pairingTimeout:v=e.defaultTransportTimeout,expectedLedgerApp:w}=r,{data:m=!1}=(0,d.default)(e),T=!!i&&h&&m,b=f.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:T,queryKey:b,queryFn:()=>l(void 0,void 0,void 0,(function*(){if(!T)return s.LEDGER_NOT_CONNECTED_STATE;let r,o=t.getQueryData(b),f=!1,d=0;do{try{r=(yield Promise.all([(0,n.withTimeout)((0,p.fetchLedgerBLETransportState)(e,y,i,w),v),(0,n.delayAsync)(200)]))[0]}catch(e){r=s.LEDGER_NOT_CONNECTED_STATE}f=!!(null==o?void 0:o.isConnected)&&"not-connected"===r.status&&++d<5,f&&((0,c.setLedgerTransportStateOverride)(t,s.LEDGER_RECONNECTING_STATE),(0,a.debugLog)(y,"Attempting to reconnect..."),1===d&&(0,u.debugLogStateChange)(y,o,s.LEDGER_RECONNECTING_STATE),yield(0,n.delayAsync)(1e3))}while(f);return(0,u.debugLogStateChange)(y,o,r),d>0&&(o=s.LEDGER_RECONNECTING_STATE),(0,u.debugLogStateChange)(y,o,r),(null==o?void 0:o.isConnected)&&!r.isConnected&&(0,c.resetLedgerAddresses)(t).then((()=>(0,c.refetchLedgerAddresses)(t))),r})),refetchOnMount:!0,refetchInterval:g,initialData:s.LEDGER_NOT_CONNECTED_STATE})}})),i.register("lMux6",(function(t,r){e(t.exports,"LEDGER_NOT_CONNECTED_STATE",(function(){return n})),e(t.exports,"LEDGER_RECONNECTING_STATE",(function(){return o})),e(t.exports,"LEDGER_WAITING_FOR_APPROVAL_STATE",(function(){return i})),e(t.exports,"DEFAULT_LEDGER_TRANSPORT_STATE",(function(){return s}));const n={status:"not-connected",isConnected:!1},o={status:"reconnecting",isConnected:!1},i={status:"waiting-for-approval",isConnected:!1},s=n})),i.register("de28I",(function(t,r){e(t.exports,"debugLogStateChange",(function(){return s}));var n=i("iG6SM"),o=i("hgJF4");const s=(e=!1,t,r)=>{if((null==t?void 0:t.status)===r.status)return;let i,s="";switch(r.status){case"connected":i="🟢 Connected",s=`, selected app: ${r.selectedApp?(0,n.getLedgerAppDisplayName)(r.selectedApp.app):"None"}`;break;case"needs-permission":i="🟠 Needs Permission";break;case"reconnecting":i="🟠 Reconnecting";break;case"waiting-for-approval":i="🟠 Waiting For Approval";break;case"not-connected":i="⚪️ Not Connected"}(0,o.debugLog)(e,`${i}${s}`)}})),i.register("7wUYG",(function(t,r){e(t.exports,"resetLedgerAddresses",(function(){return s}),(function(e){return s=e})),e(t.exports,"refetchLedgerAddresses",(function(){return a}),(function(e){return a=e})),e(t.exports,"invalidateLedgerTransportState",(function(){return u}),(function(e){return u=e})),e(t.exports,"setLedgerTransportStateOverride",(function(){return c}),(function(e){return c=e}));var n=i("4ODJX"),o=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const s=e=>o(void 0,void 0,void 0,(function*(){yield e.resetQueries([`${n.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),a=e=>o(void 0,void 0,void 0,(function*(){yield e.refetchQueries([`${n.HARDWARE_BASE_QUERY_KEY}:ledger-addresses`])})),u=e=>o(void 0,void 0,void 0,(function*(){yield e.invalidateQueries(n.hardwareQueryKeys.ledgerTransportState())})),c=(e,t)=>e.setQueryData(n.hardwareQueryKeys.ledgerTransportState(),t)})),i.register("3MSav",(function(t,r){e(t.exports,"fetchLedgerBLETransportState",(function(){return u}),(function(e){return u=e}));var n=i("lMux6"),o=i("1Jx7r"),s=i("hgJF4"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const u=(e,t,r,i)=>a(void 0,void 0,void 0,(function*(){if(!r)return(0,s.debugLog)(t,"Attempting to connect to Ledger BLE device, no device ID specified."),n.LEDGER_NOT_CONNECTED_STATE;const a=yield e.open(r);if(!a)return(0,s.debugLog)(t,`Unable to connect to transport with deviceID: ${r}`),n.LEDGER_NOT_CONNECTED_STATE;return{status:"connected",isConnected:!0,transport:a,selectedApp:yield(0,o.getSelectedLedgerApp)(a,e.defaultTransportTimeout,i)}}))})),i.register("1Jx7r",(function(t,r){e(t.exports,"getSelectedLedgerApp",(function(){return c}),(function(e){return c=e}));var n=i("4y59b"),o=i("dPPBv"),s=i("i3h8i"),a=i("9tNa2"),u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const c=(e,t=2e3,r)=>u(void 0,void 0,void 0,(function*(){const i=()=>u(void 0,void 0,void 0,(function*(){const t=r?[r]:Object.values(o.LedgerApp);return((e,t)=>u(void 0,void 0,void 0,(function*(){for(const r of t)switch(r){case o.LedgerApp.Solana:try{const t=yield(0,a.getSolanaLedgerApp)(e),n=yield t.getAppConfiguration();return{app:r,version:n.version,blindSigningEnabled:n.blindSigningEnabled}}catch(e){}break;case o.LedgerApp.EVM:try{const t=yield(0,a.getEthereumLedgerApp)(e),n=yield t.getAppConfiguration();return{app:r,version:n.version,blindSigningEnabled:1===n.arbitraryDataEnabled}}catch(e){}break;case o.LedgerApp.Bitcoin:try{return{app:r,version:(yield(0,s.getBitcoinAppConfiguration)(e)).version}}catch(e){}}return null})))(e,t)}));try{return yield(0,n.withTimeout)(i(),t)}catch(e){return null}}))})),i.register("i3h8i",(function(t,r){e(t.exports,"getBitcoinAppConfiguration",(function(){return o}),(function(e){return o=e}));var n=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const o=e=>n(void 0,void 0,void 0,(function*(){const t=yield e.send(176,1,0,0);let r=0;if(1!==t[r++])throw new Error("getBitcoinAppConfiguration: format not supported");const n=t[r++],o=t.subarray(r,r+=n).toString("ascii");if("Bitcoin"!==o)throw new Error("Ledger Bitcoin app not selected.");const i=t[r++];return{name:o,version:t.subarray(r,r+=i).toString("ascii")}}))})),i.register("3umQi",(function(t,r){e(t.exports,"useLedgerWireTransportState",(function(){return y}),(function(e){return y=e}));var n=i("4y59b"),o=i("lNRH9"),s=i("lDSNw"),a=i("lMux6"),u=i("hgJF4"),c=i("de28I"),p=i("7wUYG"),f=i("1NWaX"),d=i("4ODJX"),l=i("gw8mx"),h=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const y=(e,t,r=!0,i=!1,y=2e3)=>{const[g,v]=(0,s.useState)(y);(0,s.useEffect)((()=>{e.on("disconnect",(()=>{(0,u.debugLog)(i,"disconnect event received from Ledger transport."),(0,p.invalidateLedgerTransportState)(t)}))}),[e,t]);const{data:w=!1}=(0,l.default)(e),m=r&&w,T=d.hardwareQueryKeys.ledgerTransportState();return(0,o.useQuery)({enabled:m,queryKey:T,queryFn:()=>h(void 0,void 0,void 0,(function*(){if(!m)return a.LEDGER_NOT_CONNECTED_STATE;let r,o=t.getQueryData(T),s=!1,d=0;do{try{r=(yield Promise.all([(0,n.withTimeout)((0,f.fetchLedgerWireTransportState)(e,i,d>0?a.LEDGER_RECONNECTING_STATE:o),e.defaultTransportTimeout),(0,n.delayAsync)(200)]))[0]}catch(e){r=a.LEDGER_NOT_CONNECTED_STATE}s=!!(null==o?void 0:o.isConnected)&&"not-connected"===r.status&&++d<5,s&&((0,p.setLedgerTransportStateOverride)(t,a.LEDGER_RECONNECTING_STATE),(0,u.debugLog)(i,"Attempting to reconnect..."),1===d&&(0,c.debugLogStateChange)(i,o,a.LEDGER_RECONNECTING_STATE),yield(0,n.delayAsync)(500))}while(s);return d>0&&(o=a.LEDGER_RECONNECTING_STATE),(0,c.debugLogStateChange)(i,o,r),(null==o?void 0:o.isConnected)&&!r.isConnected&&(0,p.resetLedgerAddresses)(t).then((()=>(0,p.refetchLedgerAddresses)(t))),r})),onSuccess:e=>(e.isConnected?v(3500):v(y),null),refetchOnMount:!0,refetchInterval:g,initialData:a.LEDGER_NOT_CONNECTED_STATE})}})),i.register("1NWaX",(function(t,r){e(t.exports,"fetchLedgerWireTransportState",(function(){return u}),(function(e){return u=e}));var n=i("lMux6"),o=i("1Jx7r"),s=i("hgJF4"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const u=(e,t,r)=>a(void 0,void 0,void 0,(function*(){if(0===(yield e.getNumDevices()))return r!==n.LEDGER_NOT_CONNECTED_STATE&&(0,s.debugLog)(t,"Unable to detect Ledger devices."),n.LEDGER_NOT_CONNECTED_STATE;let i=r?r.transport:void 0;if((null==r?void 0:r.isConnected)&&(null==r?void 0:r.selectedApp)||"waiting-for-approval"===(null==r?void 0:r.status))return r;if(i||(i=yield e.getFirstOpenedTransport(),i&&(0,s.debugLog)(t,"Found previously-opened transport.")),i||(i=yield e.openConnected(),i&&(0,s.debugLog)(t,"Opened a new connection to a previously-opened transport.")),!i)return(0,s.debugLog)(t,"Need permission to use the connected Ledger device."),{status:"needs-permission",isConnected:!1};return{status:"connected",isConnected:!0,transport:i,selectedApp:yield(0,o.getSelectedLedgerApp)(i,e.defaultTransportTimeout)}}))})),i.register("3KU10",(function(t,r){e(t.exports,"default",(function(){return d}),(function(e){return d=e}));var n=i("lNRH9"),o=i("1Jx7r"),s=i("hgJF4"),a=i("de28I"),u=i("7wUYG"),c=i("4ODJX"),p=i("1NWaX"),f=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},d=(e,t,r=!0,i=!1)=>{const d=c.hardwareQueryKeys.requestLedgerPermission();return(0,n.useQuery)({enabled:r,queryKey:d,queryFn:()=>f(void 0,void 0,void 0,(function*(){var r,n,f,d,l,h,y;let g;try{(0,s.debugLog)(i,"Requesting permission to connect to Ledger..."),g=yield e.request()}catch(o){if((0,s.debugLog)(i,`Received error trying to request permission: ${o}`),"string"==typeof o.message&&(null===(r=o.message)||void 0===r?void 0:r.includes("device is already open"))){(0,s.debugLog)(i,"✅ Permission granted, device already open. Connecting to device...");const r=c.hardwareQueryKeys.ledgerTransportState(),o=yield t.getQueryData(r);let h;try{h=yield(0,p.fetchLedgerWireTransportState)(e,i,o)}catch(e){}return(null==h?void 0:h.isConnected)?((0,s.debugLog)(i,`✅ Permission granted. Connected to Ledger device: ${null!==(f=null===(n=h.transport.deviceModel)||void 0===n?void 0:n.productName)&&void 0!==f?f:"Unknown device"}. Selected app: ${null!==(l=null===(d=null==h?void 0:h.selectedApp)||void 0===d?void 0:d.app)&&void 0!==l?l:"none"}`),yield(0,u.setLedgerTransportStateOverride)(t,h),(0,a.debugLogStateChange)(i,void 0,h),{type:"granted",transport:h.transport}):((0,s.debugLog)(i,"❌ Unable to connect. Try again and make sure device is unlocked."),{type:"unable-to-connect"})}return(0,s.debugLog)(i,"❌ Permission denied."),{type:"denied"}}if(!g){const e="Unable to connect to Ledger device. Permission granted, but no Transport received.";return(0,s.debugLog)(i,`❌ ${e}`),{type:"unable-to-connect"}}const v={status:"connected",isConnected:!0,transport:g,selectedApp:yield(0,o.getSelectedLedgerApp)(g,e.defaultTransportTimeout)};return yield(0,u.setLedgerTransportStateOverride)(t,v),(0,a.debugLogStateChange)(i,void 0,v),(0,s.debugLog)(i,`✅ Permission granted. Connected to Ledger device: ${null!==(y=null===(h=g.deviceModel)||void 0===h?void 0:h.productName)&&void 0!==y?y:"Unknown device"}`),{type:"granted",transport:g}})),cacheTime:0,staleTime:0,refetchOnMount:!0})}})),i.register("3R3wS",(function(t,r){e(t.exports,"useNearbyLedgerBLEDevices",(function(){return o}));var n=i("lDSNw");(e=>{const t=[];for(let o=1;o<=e;++o){const e=(r=0,n=3,r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r)+r));let i;i=0===e?0:1===e?-70:-100,t.push({name:`Nano X ${o}`,id:`${o}`,rssi:i})}var r,n;t.sort(((e,t)=>t.rssi-e.rssi))})(100);const o=(e,t)=>{const r=(0,n.useRef)([]),o=(0,n.useRef)(),[i,s]=(0,n.useState)([]);return(0,n.useEffect)((()=>{var n;if(!t)return void(null===(n=o.current)||void 0===n||n.unsubscribe());let i=r.current;const a=e.scan({onDeviceAdded:e=>{i=i.filter((t=>t.id!==e.id)),i.push(e),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];r.current.length!==t.length&&(r.current=t,s(r.current))},onDeviceRemoved:e=>{i=i.filter((t=>t.id!==e.id)),i.sort(((e,t)=>t.rssi-e.rssi));const t=[...i];r.current.length!==t.length&&(r.current=t,s(r.current))},onError:e=>{var t;console.error(e),null===(t=o.current)||void 0===t||t.unsubscribe()}});return o.current=a,()=>{var e;null===(e=o.current)||void 0===e||e.unsubscribe()}}),[e,t]),i}})),i.register("5ARdl",(function(e,t){var r,n,o=i("7wUYG");r=e.exports,n=o,Object.keys(n).forEach((function(e){"default"===e||"__esModule"===e||r.hasOwnProperty(e)||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})}))})),i.register("7as68",(function(t,r){e(t.exports,"getLedgerTransportState",(function(){return a}),(function(e){return a=e}));var n=i("lMux6"),o=i("4ODJX"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a=e=>s(void 0,void 0,void 0,(function*(){const t=yield e.getQueryData(o.hardwareQueryKeys.ledgerTransportState());return null!=t?t:n.LEDGER_NOT_CONNECTED_STATE}))})),i.register("fB0uY",(function(e,t){})),i.register("iqxmM",(function(e,t){i("6rT8n"),i("eE7wc"),i("6Tvfa"),i("d0go3"),i("belzv"),i("gd9Oy"),i("3fvLJ"),i("4yY1D"),i("4y59b"),i("hbTYb"),i("13Nf3"),i("lMux6"),i("1NWaX"),i("iTpzE"),i("dPPBv"),i("keP0C"),i("iG6SM"),i("1ZJGX"),i("fALED"),i("9tNa2"),i("1Jx7r")})),i.register("1ZJGX",(function(t,r){e(t.exports,"convertSignTypedDataToEip712Message",(function(){return n}));const n=e=>{var t;const r={name:e.domain.name,version:e.domain.version,verifyingContract:e.domain.verifyingContract,chainId:null===(t=e.domain)||void 0===t?void 0:t.chainId},n=[],o={};for(const[t,r]of Object.entries(e.types))for(const e of r)"EIP712Domain"===t?n.push(e):t in o?o[t].push(e):o[t]=[e];return{domain:r,types:Object.assign({EIP712Domain:n},o),primaryType:e.primaryType,message:Object.assign({},e.message)}}})),i.register("fbmp8",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("2UKlV")).then((()=>i("3sixR")))})),i.register("dp0CL",(function(e,t){e.exports=Promise.all([import("./"+i("5V6iE").resolve("3P9Hz")),import("./"+i("5V6iE").resolve("vQhtf"))]).then((()=>i("1XnPb")))})),i.register("W0Kfy",(function(t,r){e(t.exports,"createOnboardingHooks",(function(){return i("8We9Q").createOnboardingHooks})),e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return i("a6TvO").BATCH_SIZE_BY_PLATFORM})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return i("a6TvO").useSelectMultichainAccountsProps})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return i("aP4uK").ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT})),e(t.exports,"OnboardingType",(function(){return i("cviTh").OnboardingType})),e(t.exports,"discoverAccounts",(function(){return i("feBHk").discoverAccounts}));i("8We9Q"),i("a6TvO"),i("arV63"),i("bpVLE"),i("aP4uK"),i("cSA8p"),i("cviTh"),i("iXAls"),i("kXIUx"),i("feBHk"),i("5lcT5"),i("9qNQV")})),i.register("8We9Q",(function(t,r){e(t.exports,"createOnboardingHooks",(function(){return d}));var n=i("kXIUx"),o=i("5glVg"),s=i("45FS4"),a=i("ekgVg"),u=i("1TkaT"),c=i("5x4lU"),p=i("b8vJU"),f=i("4Tmjz");function d(e,t,r,i,d){const l=new(0,n.LedgerOnboardingAnalytics)(r);return{useIsFirstTimeOnboarding:()=>(0,a.useIsFirstTimeOnboarding)(e),useSetIsFirstTimeOnboarding:()=>(0,a.useSetIsFirstTimeOnboarding)(e,t),useIsResettingApp:()=>(0,u.useIsResettingApp)(e),useSetIsResettingApp:()=>(0,u.useSetIsResettingApp)(e,t),useSetIsFirstTimeResettingApp:()=>(0,u.useSetIsFirstTimeResettingApp)(e,t),useDeriveLedgerAccounts:e=>(0,o.useDeriveLedgerAccounts)(i,t,l,e),useDiscoverLedgerAccounts:e=>(0,s.useDiscoverLedgerAccounts)(l,e),useTermsAcknowledgement:()=>(0,p.useTermsAcknowledgement)(e,d),useWhatsNewOverlay:()=>(0,f.useWhatsNewOverlay)(e),useSetTermsAcknowledgement:()=>(0,c.useSetTermsAcknowledgement)(e,t),useSetAcknowledgeWhatsNewOverlay:()=>(0,f.useSetAcknowledgeWhatsNewOverlay)(e,t)}}})),i.register("kXIUx",(function(t,r){e(t.exports,"LedgerOnboardingAnalytics",(function(){return p}),(function(e){return p=e}));var n=i("belzv");i("hsoDC");var o,s=i("dPPBv"),a=i("gd9Oy"),u=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},c=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class p{constructor(e){o.set(this,void 0),this.onOpen=()=>c(this,o,"f").capture("connectHardwareOpen"),this.onSelectedChains=e=>{const t=new Set(e),r=[];for(const e of n.Chains.getAllChainIDs())t.has(e)&&r.push(e);const i={numChains:r.length,selectedChains:r.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(", ")};c(this,o,"f").capture("connectHardwareSelectedChains",{data:i})},this.onDerivedAccounts=e=>{const t={};for(const[r,n]of Object.entries(e.derivedAddresses)){if(!f(r))continue;const e={numberOfDerivedAccounts:n.addresses.length};void 0!==n.duration&&(e.derivationDuration=n.duration),t[r]=e}c(this,o,"f").capture("connectHardwareAccountsDerived",{data:Object.assign({},t)})},this.onDiscoveredAccounts=e=>{var t;const{discoveredAccounts:r}=e,n={};for(const e of r){if("undiscovered"===e.status)continue;const r=e.accounts.reduce(((e,{derivationPathType:t,hasAccountActivity:r})=>(e[a.AddressTypes.getAddressType(t)]={derivationPathType:t,hasAccountActivity:r},e)),{});for(const{hasAccountActivity:e,derivationPathType:o}of Object.values(r)){if(!e)continue;const r=null!==(t=n[o])&&void 0!==t?t:0;n[o]=r+1}}c(this,o,"f").capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:n}})},this.onConnectedAccounts=e=>{var t;const r={};for(const n of e.accounts){const e=[...n.addresses,...n.publicKeys].reduce(((e,t)=>(e[a.AddressTypes.getAddressType(t.pathType)]=t.pathType,e)),{});for(const n of Object.values(e)){const e=null!==(t=r[n])&&void 0!==t?t:0;r[n]=e+1}}c(this,o,"f").capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:e.accounts.length,numberOfAccountsImportedByDerivationPath:r}})},u(this,o,e,"f")}}function f(e){return"string"==typeof e&&Object.keys(s.LedgerApp).includes(e)}o=new WeakMap})),i.register("5glVg",(function(t,r){e(t.exports,"useDeriveLedgerAccounts",(function(){return f}),(function(e){return f=e})),i("hsoDC");var n=i("lMux6"),o=i("7as68"),s=i("lNRH9"),a=i("lDSNw"),u=i("4bmfd"),c=i("bpVLE"),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const f=(e,t,r,i)=>{var f;const{selectedChains:d,ledgerTransportState:l=n.LEDGER_NOT_CONNECTED_STATE}=i,h=d.length>0&&l.isConnected,y=c.onboardingQueryKeys.deriveLedgerAccounts,g=l.isConnected?null===(f=l.selectedApp)||void 0===f?void 0:f.app:void 0;(0,a.useEffect)((()=>{g&&t.invalidateQueries(y)}),[g,t,y]);return(0,s.useQuery)({enabled:h,queryKey:y,queryFn:()=>p(void 0,void 0,void 0,(function*(){const n=yield t.getQueryData(y);return(0,u.deriveLedgerAccounts)(Object.assign(Object.assign({ledgerDeps:e,queryClient:t,ledgerOnboardingAnalytics:r,queryKey:y},i),{ledgerTransportState:yield(0,o.getLedgerTransportState)(t),previousResponse:n}))})),retry:!1})}})),i.register("4bmfd",(function(t,r){e(t.exports,"deriveLedgerAccounts",(function(){return l}),(function(e){return l=e}));var n=i("d0go3"),o=i("belzv");i("hsoDC");var s=i("iG6SM"),a=i("kr4Fg"),u=i("aP4uK"),c=i("9VYtE"),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const f={ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:{}},d=(e,t)=>e.map((e=>({ledgerApp:e,status:t[e]?"complete":"incomplete"}))),l=e=>p(void 0,void 0,void 0,(function*(){var t;const{ledgerDeps:r,queryClient:i,ledgerOnboardingAnalytics:p,queryKey:l,selectedChains:h,enableDebugLogs:y=!0,enableLedgerXPubDerivation:g=!0,ledgerTransportState:v,previousResponse:w=f}=e;if(!(({selectedChains:e,ledgerTransportState:t})=>e.length>0&&t.isConnected)(e))return{ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:{}};const m=w.derivedAddresses,T=new Set(h),b=o.Chains.getAllNetworkIDs({mainnetOnly:!0}).filter((e=>{const t=o.Chains.getChainID(e);return T.has(t)})),S=Array.from(b.map((e=>(0,s.getLedgerAppForNetworkID)(e))).reduce(((e,t)=>(e.add(t),e)),new Set)),E=d(S,m),x=E.find((e=>"incomplete"===e.status));if(!x)return{ledgerAppsToDerive:[],currentlyDerivingNetworkIDs:[],derivedAddresses:m};const{ledgerApp:A}=x,I=E.filter((e=>"incomplete"===e.status)).map((e=>e.ledgerApp)),O=b.filter((e=>(0,s.getLedgerAppForNetworkID)(e)===A));if(i.setQueryData(l,{ledgerAppsToDerive:I,currentlyDerivingNetworkIDs:O,derivedAddresses:m}),!v.isConnected||(null===(t=v.selectedApp)||void 0===t?void 0:t.app)!==A)return{ledgerAppsToDerive:I,currentlyDerivingNetworkIDs:O,derivedAddresses:m};const P=(0,c.createLedgerOnboardingParams)(A,u.LEDGER_ONBOARDING_INDICES_TO_DERIVE);let k;const _=yield(0,a.deriveLedgerAddresses)({transportTimeout:r.defaultTransportTimeout,state:v,derivationPathParams:P,enableDebugLogs:y,enableLedgerXPubDerivation:g,onSuccess:e=>{k=e}}),N=P.map((e=>{const t=(0,n.getDerivationPath)(e),r=_[t];return{paramsUsed:e,address:r.address,publicKey:r.publicKey}})),C=Object.assign(Object.assign({},m),{[A]:{addresses:N,duration:k}}),D=d(S,C).filter((e=>"incomplete"===e.status)).map((e=>e.ledgerApp)),L=0===D.length?[]:b.filter((e=>(0,s.getLedgerAppForNetworkID)(e)===D[0])),B={ledgerAppsToDerive:D,currentlyDerivingNetworkIDs:L,derivedAddresses:C};return 0===D.length&&p.onDerivedAccounts(B),B}))})),i.register("aP4uK",(function(t,r){e(t.exports,"LEDGER_ONBOARDING_INDICES_TO_DERIVE",(function(){return o})),e(t.exports,"ALLOWED_ONBOARDING_STORAGE_KEYS_FOR_EXPORT",(function(){return s}));var n=i("cSA8p");const o=19,s=[n.OnboardingStorageKeys.FirstTimeOnboarding,n.OnboardingStorageKeys.IsResettingApp]})),i.register("cSA8p",(function(t,r){var n,o;e(t.exports,"OnboardingStorageKeys",(function(){return n})),(o=n||(n={})).FirstTimeOnboarding="firstTimeOnboarding",o.IsResettingApp="isResettingApp"})),i.register("9VYtE",(function(t,r){e(t.exports,"createLedgerOnboardingParams",(function(){return s}));var n=i("d0go3");i("hsoDC");var o=i("dPPBv");const s=(e,t)=>{const r=[];e===o.LedgerApp.Solana?r.push({pathType:n.DerivationPathType.Bip44RootSolana}):e===o.LedgerApp.EVM&&r.push({pathType:n.DerivationPathType.Bip44RootEthereum});for(let i=0;i<t;++i)switch(e){case o.LedgerApp.Solana:r.push({index:i,pathType:n.DerivationPathType.Bip44ChangeSolana}),r.push({index:i,pathType:n.DerivationPathType.Bip44Solana});break;case o.LedgerApp.EVM:r.push({index:i,pathType:n.DerivationPathType.Bip44Ethereum}),r.push({index:i,pathType:n.DerivationPathType.Bip44EthereumSecondary});break;case o.LedgerApp.Bitcoin:r.push({index:i,pathType:n.DerivationPathType.BitcoinTaproot}),r.push({index:i,pathType:n.DerivationPathType.BitcoinNativeSegwit})}return r}})),i.register("bpVLE",(function(t,r){e(t.exports,"onboardingQueryKeys",(function(){return o}));const n="@phantom/onboarding",o={firstTimeOnboarding:[`${n}:first-time-onboarding`],isResettingApp:[`${n}:is-resetting-app`],deriveLedgerAccounts:[`${n}:derive-ledger-accounts`],discoverLedgerAccounts:[`${n}:discover-ledger-accounts`]}})),i.register("45FS4",(function(t,r){e(t.exports,"useDiscoverLedgerAccounts",(function(){return u}),(function(e){return u=e}));var n=i("lNRH9"),o=i("gejWP"),s=i("bpVLE"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const u=(e,t)=>{const r=(0,o.isDiscoverLedgerAccountsEnabled)(t),i=s.onboardingQueryKeys.discoverLedgerAccounts;return(0,n.useQuery)({enabled:r,queryKey:i,queryFn:()=>a(void 0,void 0,void 0,(function*(){return(0,o.discoverLedgerAccounts)(Object.assign({ledgerOnboardingAnalytics:e},t))}))})}})),i.register("gejWP",(function(t,r){e(t.exports,"isDiscoverLedgerAccountsEnabled",(function(){return d}),(function(e){return d=e})),e(t.exports,"discoverLedgerAccounts",(function(){return l}),(function(e){return l=e}));var n=i("6Tvfa"),o=i("belzv");i("hsoDC");var s=i("iG6SM"),a=i("a54cU"),u=i("8PPME"),c=i("feBHk"),p=i("9qNQV"),f=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const d=({existingAccountsFetched:e,selectedChains:t,deriveLedgerAccountsResponse:r})=>e&&t.length>0&&!!r&&0===r.ledgerAppsToDerive.length,l=e=>f(void 0,void 0,void 0,(function*(){var t,r,i,f,l;const{ledgerOnboardingAnalytics:h,existingAccounts:y,discoveryBatchSize:g,selectedChains:v,deriveLedgerAccountsResponse:w,retryDiscoverAccountsOnFail:m=!0}=e;if(!d(e))throw new Error("Query disabled.");const T={},b=new Set(v);for(const e of o.Chains.getAllNetworkIDs({mainnetOnly:!0})){if(!b.has(o.Chains.getChainID(e)))continue;const u=(0,s.getLedgerAppForNetworkID)(e),c=null!==(i=null===(r=(null!==(t=null==w?void 0:w.derivedAddresses)&&void 0!==t?t:{})[u])||void 0===r?void 0:r.addresses)&&void 0!==i?i:[];for(const{address:t,publicKey:r,paramsUsed:o}of c){const i=(0,n.getDerivationPathGroupKey)(o),s=null!==(f=T[i])&&void 0!==f?f:{accounts:{},derivationIndex:null!==(l=o.index)&&void 0!==l?l:-1};s.accounts[`${e}-${t}`]={chainType:(0,a.getAddressTypeFromDerivationPathType)(o.pathType),chainId:e,address:t,publicKey:r,pathParams:o},T[i]=s}}const S=Object.entries(T).sort((([e,t],[r,o])=>(0,n.compareDerivationPathGroup)(e,r))).map((([e,t])=>t)),E=(0,p.getExistingAddressesSet)(y),x=S.reduce(((e,t)=>{let r=!1;for(const{address:e}of Object.values(t.accounts))r=r||E.has(e);return r||e.push(t),e}),[]),A=[],I=[];for(let e=0;e<x.length;e+=g){const t=x.slice(e,e+g).map((e=>Object.entries(e.accounts).reduce(((e,[t,r])=>(e[t]={account:r},e)),{})));I.push(t)}for(const e of I)A.push((0,c.discoverAccounts)(e,m));const O=(yield Promise.all(A)).flat().map((e=>{switch(e.status){case"discovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity||(0,n.isRecommendedDerivationPathType)(e.derivationPathType)))});case"undiscovered":return Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>(0,n.isRecommendedDerivationPathType)(e.derivationPathType)))})}})).filter((e=>e.accounts.length>0)).map((e=>{const t=(0,u.default)();return Object.assign(Object.assign({},e),{discoveryIdentifier:t})})),P=O.filter((e=>"undiscovered"===e.status||e.isSelectedByDefault)),k=O.filter((e=>!("undiscovered"===e.status||e.isSelectedByDefault))).slice(0,2),_=P.length>0,N=y.filter((e=>e.type===n.AccountType.Ledger)).length,C=(_?[...P,...k]:O.slice(0,3)).map(((e,t)=>Object.assign(Object.assign({},e),{accountIndex:N+t}))),D={};C.forEach(((e,t)=>{("discovered"===e.status&&e.isSelectedByDefault||0===t)&&(D[e.discoveryIdentifier]=!0)}));const L={discoveredAccounts:C,activeAccountsFound:_,defaultSelectedAccounts:D};return h.onDiscoveredAccounts(L),L}))})),i.register("feBHk",(function(t,r){e(t.exports,"discoverAccounts",(function(){return w}),(function(e){return w=e})),e(t.exports,"useDiscoverMultiChainAccounts",(function(){return T}),(function(e){return T=e}));var n=i("6Tvfa"),o=i("d0go3"),s=i("belzv"),a=i("gd9Oy"),u=i("4yY1D"),c=i("4y59b"),p=i("tv9Be"),f=i("5lcT5"),d=i("6rT8n").Buffer,l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const h="fetch-multi-chain-accounts-by-seed",y=(e,t)=>[o.DerivationPathType.BitcoinTaproot,o.DerivationPathType.BitcoinNativeSegwit].map((r=>{const n={pathType:r,index:e},{publicKey:o}=t.derivePathType(r,e),i=a.AddressTypes.getAddressType(r),u=(0,a.publicKeyToAddress)({publicKey:o,addressType:i});return{chainType:i,chainId:s.NetworkIDs.Bitcoin.Mainnet,address:u,publicKey:d.from(o).toString("hex"),pathParams:n}})),g=(e,t)=>[o.DerivationPathType.Bip44Ethereum,o.DerivationPathType.Bip44EthereumSecondary,o.DerivationPathType.Bip44EthereumTertiary].map((r=>{const n={pathType:r,index:e},{publicKey:o}=t.derivePathType(r,e);return{chainType:a.AddressTypes.getAddressType(r),pathType:r,address:(0,a.publicKeyToAddress)({publicKey:o,addressType:a.AddressType.EVM}),publicKey:d.from(o).toString("hex"),pathParams:n}})),v=(e,t)=>[o.DerivationPathType.Bip44ChangeSolana,o.DerivationPathType.Bip44Solana,o.DerivationPathType.DeprecatedSolana].map((r=>{const n={pathType:r,index:e},{publicKey:o}=t.derivePathType(r,e),i=(0,a.publicKeyToAddress)({publicKey:o,addressType:a.AddressType.Solana});return{chainType:a.AddressType.Solana,chainId:s.NetworkIDs.Solana.Mainnet,address:i,publicKey:d.from(o).toString("hex"),pathParams:n}})),w=(e,t=!0)=>l(void 0,void 0,void 0,(function*(){const r=Object.assign({},...e);try{const e=Object.values(r).map((({account:e})=>({address:e.address,chainId:e.chainId})));let o;o=t?(yield(0,c.withRetry)((()=>l(void 0,void 0,void 0,(function*(){return(0,c.withTimeout)((0,f.fetchDiscoverAccounts)({accounts:e}),1e4)}))),(()=>!0),2)).accounts:(yield(0,f.fetchDiscoverAccounts)({accounts:e})).accounts;const i={};for(const e of o){const{account:t}=r[`${e.chain.id}-${e.address}`],o=t.publicKey,s=t.chainType,a=(0,n.getDerivationPathGroupKey)(t.pathParams),u=Object.assign(Object.assign({},e),{publicKey:o,chainType:s,derivationPathType:t.pathParams.pathType,hasAccountActivity:!!e.lastActivityTimestamp||parseFloat(e.amount)>0});i[a]=[...i[a]||[],u]}Object.keys(i).forEach((e=>{i[e]=i[e].sort(((e,t)=>s.Chains.compareNetworkID(e.chain.id,t.chain.id)))}));const a=Object.values(i),u=a.filter((e=>e.some((e=>e.hasAccountActivity)))),p=!!u.length;return(p?u:a).map((e=>{var t;const n=e[0];return{status:"discovered",seedIndex:null!==(t=r[`${n.chain.id}-${n.address}`].account.pathParams.index)&&void 0!==t?t:-1,isSelectedByDefault:p,accounts:e}}))}catch(e){const t=Object.values(r).map((({account:e})=>e)),o={};for(const e of t){const{account:t}=r[`${e.chainId}-${e.address}`],i=(0,n.getDerivationPathGroupKey)(t.pathParams),u=Object.assign(Object.assign({},e),{chain:{id:e.chainId,name:s.Chains.getNetworkName(e.chainId),symbol:s.Chains.getTokenSymbol(e.chainId)},chainType:a.AddressTypes.getAddressType(t.pathParams.pathType),derivationPathType:t.pathParams.pathType,hasAccountActivity:!1});o[i]=[...o[i]||[],u]}Object.keys(o).forEach((e=>{o[e]=o[e].sort(((e,t)=>s.Chains.compareNetworkID(e.chain.id,t.chain.id)))}));const i=Object.values(o).map((e=>{var t;const n=e[0];return{status:"undiscovered",seedIndex:null!==(t=r[`${n.chain.id}-${n.address}`].account.pathParams.index)&&void 0!==t?t:-1,accounts:e,isSelectedByDefault:!1}}));return i}})),m=({hdWallet:e,startIndex:t,endIndex:r,enabledAddressTypes:n})=>l(void 0,void 0,void 0,(function*(){const o=[];for(let i=t;i<=r;++i){const t={};if(n.includes(a.AddressType.BitcoinNativeSegwit))for(const r of y(i,e))t[`${s.NetworkIDs.Bitcoin.Mainnet}-${r.address}`]={account:r};if(n.includes(a.AddressType.EVM)){const r=g(i,e),n=s.Chains.getChainIDs(a.AddressType.EVM);for(const e of n){const n=s.Chains[e];for(const{address:e,publicKey:o,chainType:i,pathParams:s}of r)t[`${n.mainnetID}-${e}`]={account:{chainType:i,chainId:n.mainnetID,address:e,publicKey:o,pathParams:s}}}}if(n.includes(a.AddressType.Solana))for(const r of v(i,e))t[`${r.chainId}-${r.address}`]={account:r};o.push(t)}return w(o)}));function T({batchSize:e,hdWallet:t,enabledAddressTypes:r}){const n=!!t&&0!=r.length,o=[h,e];return(0,p.useInfiniteQuery)({enabled:n,queryKey:o,queryFn:({pageParam:n=0})=>l(this,void 0,void 0,(function*(){if(e<1)throw new Error(`Need positive batchSize: ${e}`);if(!t)throw new Error("Missing HDWallet");const o=[],i=[],s=0===n;let a=n,u=!0;for(;u;){const n=a,c=a+e-1,p=(yield m({hdWallet:t,startIndex:n,endIndex:c,enabledAddressTypes:r})).flat(1);a+=e,u=!1;for(const e of p)o.push(e),("undiscovered"===e.status||e.isSelectedByDefault)&&i.push(e),s&&"discovered"===e.status&&e.isSelectedByDefault&&(u=!0)}if(s&&0===i.length&&o.length>1){const e=o[0],t=e.accounts.map((e=>Object.assign(Object.assign({},e),{hasAccountActivity:!1}))),r={status:"undiscovered",seedIndex:e.seedIndex,accounts:t,isSelectedByDefault:!1};i.push(r)}return i})),getNextPageParam:(t,r)=>{const n=r.length,o=n?r[0]:[],i=o.length?b(o[o.length-1].seedIndex,e):0;return 1===n?i:i+e*(n-1)},cacheTime:0,staleTime:0,onError:e=>u.telemetry.captureError(e,u.FeatureTag.Account)})}const b=(e,t)=>Math.ceil(e/t)*t+t})),i.register("5lcT5",(function(t,r){e(t.exports,"fetchDiscoverAccounts",(function(){return c}),(function(e){return c=e}));var n=i("belzv"),o=i("6Nxml"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a=`${(0,o.getAPIEnvironment)()}/discover/v1`,u={Accept:"application/json","Content-Type":"application/json"},c=e=>s(void 0,void 0,void 0,(function*(){if(!e.accounts.length)throw new Error("Must send at least 1 account for discovery");const t=yield fetch(a,{method:"POST",headers:u,body:JSON.stringify(e)}),r=yield t.json();if(200!==t.status){if((o=r)&&"string"==typeof o.message)throw new Error(r.message);throw new Error(`Unable to discover accounts with args: ${JSON.stringify(e)}`)}var o;if((e=>{if(!e||!Array.isArray(e.accounts))return!1;for(const t of e.accounts)if("string"!=typeof t.address||"string"!=typeof t.amount||t.lastActivityTimestamp&&"number"!=typeof t.lastActivityTimestamp||!t.chain||"string"!=typeof t.chain.id||!new Set(n.Chains.getAllNetworkIDs()).has(t.chain.id)||"string"!=typeof t.chain.name||"string"!=typeof t.chain.symbol||"string"!=typeof t.chain.imageUrl)return!1;return!0})(r))return r;throw new Error(`Invalid discover accounts response: ${JSON.stringify(r)}`)}))})),i.register("9qNQV",(function(t,r){e(t.exports,"getExistingAddressesSet",(function(){return n}));const n=e=>{const t=new Set;for(const r of e)for(const{address:e}of r.addresses)t.add(e);return t}})),i.register("ekgVg",(function(t,r){e(t.exports,"useIsFirstTimeOnboarding",(function(){return c}),(function(e){return c=e})),e(t.exports,"useSetIsFirstTimeOnboarding",(function(){return p}),(function(e){return p=e}));var n=i("fG04A"),o=i("lNRH9"),s=i("cSA8p"),a=i("bpVLE"),u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const c=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.firstTimeOnboarding,queryFn:()=>u(void 0,void 0,void 0,(function*(){const t=yield e.get(s.OnboardingStorageKeys.FirstTimeOnboarding);return null===t||t.isFirstTimeOnboarding}))});return t},p=(e,t)=>(0,n.useMutation)({mutationFn:r=>u(void 0,void 0,void 0,(function*(){yield e.set(s.OnboardingStorageKeys.FirstTimeOnboarding,{isFirstTimeOnboarding:r}),t.setQueryData(a.onboardingQueryKeys.firstTimeOnboarding,r)}))})})),i.register("1TkaT",(function(t,r){e(t.exports,"useIsResettingApp",(function(){return c}),(function(e){return c=e})),e(t.exports,"useSetIsResettingApp",(function(){return p}),(function(e){return p=e})),e(t.exports,"useSetIsFirstTimeResettingApp",(function(){return f}),(function(e){return f=e}));var n=i("fG04A"),o=i("lNRH9"),s=i("cSA8p"),a=i("bpVLE"),u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const c=e=>{const{data:t}=(0,o.useQuery)({queryKey:a.onboardingQueryKeys.isResettingApp,queryFn:()=>u(void 0,void 0,void 0,(function*(){const t=yield e.get(s.OnboardingStorageKeys.IsResettingApp);return null===t?{isResettingApp:!1,isFirstTimeResettingApp:!1}:t}))});return t},p=(e,t)=>(0,n.useMutation)({mutationFn:r=>u(void 0,void 0,void 0,(function*(){var n;const o=yield e.get(s.OnboardingStorageKeys.IsResettingApp),i=null!==(n=null==o?void 0:o.isFirstTimeResettingApp)&&void 0!==n&&n;yield e.set(s.OnboardingStorageKeys.IsResettingApp,{isResettingApp:r,isFirstTimeResettingApp:i}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:r,isFirstTimeResettingApp:i})}))}),f=(e,t)=>(0,n.useMutation)({mutationFn:r=>u(void 0,void 0,void 0,(function*(){var n;const o=yield e.get(s.OnboardingStorageKeys.IsResettingApp),i=null!==(n=null==o?void 0:o.isResettingApp)&&void 0!==n&&n;yield e.set(s.OnboardingStorageKeys.IsResettingApp,{isResettingApp:i,isFirstTimeResettingApp:r}),t.setQueryData(a.onboardingQueryKeys.isResettingApp,{isResettingApp:i,isFirstTimeResettingApp:r})}))})})),i.register("5x4lU",(function(t,r){e(t.exports,"useSetTermsAcknowledgement",(function(){return a}),(function(e){return a=e}));var n=i("6Tvfa"),o=i("fG04A"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a=(e,t)=>(0,o.useMutation)({mutationFn:r=>s(void 0,void 0,void 0,(function*(){yield e.set(n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2,r),t.setQueryData([n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2],r)}))})})),i.register("b8vJU",(function(t,r){e(t.exports,"useTermsAcknowledgement",(function(){return a}),(function(e){return a=e}));var n=i("6Tvfa"),o=i("lNRH9"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a=(e,t)=>(0,o.useQuery)({queryKey:[n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2],queryFn:()=>s(void 0,void 0,void 0,(function*(){const r=yield e.get(n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2),o=yield((e,t,r)=>s(void 0,void 0,void 0,(function*(){if(e)return e;try{const e=yield r.get(n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2);return e&&(yield t.set(n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2,e),yield r.remove(n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2)),t.get(n.StorageKeyAccounts.TermsHaveBeenAcknowledgedV2)}catch(e){return null}})))(r,e,t);return!!o}))})})),i.register("4Tmjz",(function(t,r){e(t.exports,"useWhatsNewOverlay",(function(){return u}),(function(e){return u=e})),e(t.exports,"useSetAcknowledgeWhatsNewOverlay",(function(){return c}),(function(e){return c=e}));var n=i("1uUV4"),o=i("fG04A"),s=i("lNRH9"),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const u=e=>(0,s.useQuery)({queryKey:[n.StorageKeys.LastSeenWhatsNewId],queryFn:()=>a(void 0,void 0,void 0,(function*(){var t;return 37>(null!==(t=yield e.get(n.StorageKeys.LastSeenWhatsNewId))&&void 0!==t?t:0)}))}),c=(e,t)=>(0,o.useMutation)({mutationFn:()=>a(void 0,void 0,void 0,(function*(){yield e.set(n.StorageKeys.LastSeenWhatsNewId,37)})),onSuccess:()=>{t.setQueryData([n.StorageKeys.LastSeenWhatsNewId],!1)}})})),i.register("a6TvO",(function(t,r){e(t.exports,"BATCH_SIZE_BY_PLATFORM",(function(){return f}),(function(e){return f=e})),e(t.exports,"useSelectMultichainAccountsProps",(function(){return d}),(function(e){return d=e}));var n=i("lMzyG"),o=i("4y59b"),s=i("lDSNw"),a=i("8yJNR"),u=i("feBHk"),c=i("arV63"),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const f={extension:7,ios:7,android:7},d=({platform:e,seed:t,navigationCallback:r,storageCallback:i,enabledAddressTypes:d})=>{var l;const{t:h}=(0,n.useTranslation)(),y=h("onboardingSelectAccountsFindMoreAccounts"),[g,v]=(0,s.useState)({}),[w,m]=(0,s.useState)(!1),[T,b]=(0,s.useState)(!1),[S,E]=(0,s.useState)(y),x=(0,c.useCachedHDWallet)(t),{data:A,status:I,fetchNextPage:O,isFetchingNextPage:P}=(0,u.useDiscoverMultiChainAccounts)({batchSize:f[e],hdWallet:x,enabledAddressTypes:d}),k=(0,s.useMemo)((()=>{var e;return null!==(e=null==A?void 0:A.pages.flat())&&void 0!==e?e:[]}),[A]),_=(N=k,(0,s.useMemo)((()=>N?N.map((e=>"undiscovered"===e.status?e:Object.assign(Object.assign({},e),{accounts:e.accounts.filter((e=>e.hasAccountActivity))}))):[]),[N]));var N;const C=(D=_,(0,s.useMemo)((()=>D.reduce(((e,t,r)=>(e[r]=0===r||t.isSelectedByDefault,e)),{})),[D]));var D;const L=((e,t)=>(0,s.useMemo)((()=>{var r;return null!==(r=null==e?void 0:e.reduce(((e,r,n)=>t[n]?[...e,r]:e),[]))&&void 0!==r?r:[]}),[e,t]))(k,g),B=(({activeAccountsNumber:e,allAccountsNumber:t,hasDiscoveryFailed:r})=>{const{t:o}=(0,n.useTranslation)(),i=e>0&&!r;return(0,s.useMemo)((()=>0===t?o("onboardingImportImportingFindingAccounts"):0===e?o("onboardingImportAccountsEmptyResult"):1===t?i?o("onboardingImportAccountsFoundAccounts_one",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_one",{numberOfWallets:t}):t>1?i?o("onboardingImportAccountsFoundAccounts_other",{numberOfWallets:e}):o("onboardingImportAccountsFoundAccountsNoActivity_other",{numberOfWallets:t}):""),[e,t,i,o])})({activeAccountsNumber:_.length,allAccountsNumber:k.length,hasDiscoveryFailed:"undiscovered"===(null===(l=k[0])||void 0===l?void 0:l.status)});((e,t)=>{const{t:r}=(0,n.useTranslation)();(0,s.useEffect)((()=>{let n;if(e){const{pages:o}=e,i=o.length>1,s=0===o[o.length-1].length;i&&s&&(t(r("onboardingSelectAccountsFindMoreNoneFound")),n=setTimeout((()=>{t(r("onboardingSelectAccountsFindMoreAccounts"))}),3e3))}return()=>{n&&clearTimeout(n)}}),[e])})(A,E),((e,t)=>{(0,s.useEffect)((()=>{t((t=>{const{length:r}=Object.keys(e),n={};for(let o=0;o<r;o++)n[o]=void 0===t[o]?e[o]:t[o];return n}))}),[e,t])})(C,v);const R=(0,s.useCallback)((()=>b(!0)),[]),H=(0,s.useCallback)((e=>{if("success"!==I)return;const t=Object.assign({},g);t[e]=!t[e],v(t)}),[I,g,v]),U=(0,s.useCallback)((()=>p(void 0,void 0,void 0,(function*(){w||(m(!0),yield(0,o.delayAsync)(0),yield i(L,(0,a.generateImportedAccountChainAnalytics)(L)),r((0,a.generateImportedAccountChainAnalytics)(L)))}))),[w,L,r,i]),M={expanded:T,findMoreAccountsButtonText:S,isFetchingMoreAccounts:P,isImporting:w,renderedPages:_,selectedAccounts:g,subtitle:B,findMoreAccounts:O,onExpand:R,onImport:U,onSelect:H};return"success"!==I?Object.assign({status:"loading",isImportButtonDisabled:!0},M):Object.assign({status:"success",isImportButtonDisabled:0===L.length},M)}})),i.register("8yJNR",(function(t,r){e(t.exports,"generateImportedAccountChainAnalytics",(function(){return n}));const n=e=>e.reduce(((e,t)=>{var r,n,o,i;let s=e;for(const a of t.accounts){const t=a.chain.name.toLowerCase();if((null===(r=e[t])||void 0===r?void 0:r.balance)&&(null===(n=e[t])||void 0===n?void 0:n.history))continue;const u="amount"in a&&parseFloat(a.amount)>0,c=a.hasAccountActivity;e[t]?s=Object.assign(Object.assign({},s),{[t]:Object.assign(Object.assign({},s[t]),{balance:u||(null===(o=s[t])||void 0===o?void 0:o.balance),history:c||(null===(i=s[t])||void 0===i?void 0:i.history)})}):s=Object.assign(Object.assign({},s),{[t]:{balance:u,history:c}})}return s}),{})})),i.register("arV63",(function(t,r){e(t.exports,"useCachedHDWallet",(function(){return s}));var n=i("d0go3"),o=i("lDSNw");const s=e=>{const[t,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(e.length){const t=new(0,n.CachedHDWallet)(e);return r(t),()=>{r(null),t.cleanup()}}}),[e]),t}})),i.register("cviTh",(function(t,r){e(t.exports,"OnboardingType",(function(){return n}));var n,o,s=i("7pPsM");(o=n||(n={})).Initial="initial",o.Create="create",o.Import="import",o.Restore="restore",o.Append="append",o.SeedVault="seedVault";const a=s.z.object({balance:s.z.boolean(),history:s.z.boolean()});s.z.record(s.z.string(),a)})),i.register("iXAls",(function(e,t){i("bpVLE")})),i.register("fOc77",(function(t,r){e(t.exports,"prefetchShortcuts",(function(){return i("c1xlr").prefetchShortcuts})),e(t.exports,"trackLinkOpen",(function(){return i("vH2es").trackLinkOpen})),e(t.exports,"trackModalOpen",(function(){return i("vH2es").trackModalOpen})),e(t.exports,"createShortcutHooks",(function(){return i("jXZgH").createShortcutHooks})),e(t.exports,"DEFAULT_ICON",(function(){return i("fxzB8").DEFAULT_ICON})),e(t.exports,"getIcon",(function(){return i("2lhm1").getIcon})),e(t.exports,"WALLET_SHORTCUTS_QUERY_KEY",(function(){return i("81b1l").WALLET_SHORTCUTS_QUERY_KEY}));i("c1xlr"),i("vH2es"),i("jXZgH"),i("hKbhf"),i("fxzB8"),i("2lhm1"),i("81b1l")})),i.register("c1xlr",(function(t,r){e(t.exports,"prefetchShortcuts",(function(){return a}));var n=i("81b1l"),o=i("9IAca");const s=10;function a(e,t,r,i){if(!r)return;const{externalUrl:a,isSpam:u,items:c}=r;if(u||!i)return;const p=(null!=c?c:[]).map((e=>e.externalUrl));Array.from(new Set([a,...p])).reduce(((e,t)=>{const r=(0,o.ensureExternalUrl)(t);return(0,o.isValidUrl)(r)&&e.length<s?[...e,r]:e}),[]).forEach((r=>{const i=(0,o.ensureExternalUrl)(r);(0,o.isValidUrl)(i)&&t.prefetchQuery((0,n.getShortcutsQuery)(new URL(i),e)).catch((e=>{console.error(`Failed to prefetch ${i}`,e)}))}))}})),i.register("81b1l",(function(t,r){e(t.exports,"WALLET_SHORTCUTS_QUERY_KEY",(function(){return a}),(function(e){return a=e})),e(t.exports,"getShortcutsQuery",(function(){return u}),(function(e){return u=e}));var n=i("fxzB8"),o=i("9IAca"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a="wallet-shortcuts",u=(e,t)=>({queryKey:[a,null==e?void 0:e.toString()],queryFn(){return s(this,void 0,void 0,(function*(){if(!e)throw new Error("URL is null");const r=(0,o.appendShortcut)(e),i=yield p(t,r);if(!1===n.SchemaType.safeParse(i).success)throw new Error(`Invalid shortcut response from URL ${r.toString()}`);return n.SchemaType.parse(i).shortcuts}))}}),c=new Error("Failed to fetch shortcuts for collection"),p=(e,t)=>s(void 0,void 0,void 0,(function*(){const r=`${e}/collectibles/v1/shortcuts`;let n;try{n=yield fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uri:t.toString()})})}catch(e){throw c}if(!n.ok)throw c;return n.json()}))})),i.register("fxzB8",(function(t,r){e(t.exports,"DEFAULT_ICON",(function(){return o})),e(t.exports,"SchemaType",(function(){return d}));var n=i("7pPsM");const o="default",s=n.z.union([n.z.literal("vote"),n.z.literal("vote-2"),n.z.literal("stake"),n.z.literal("stake-2"),n.z.literal("view"),n.z.literal("chat"),n.z.literal("tip"),n.z.literal("mint"),n.z.literal("mint-2"),n.z.literal("discord"),n.z.literal("twitter"),n.z.literal("twitter-2"),n.z.literal("x"),n.z.literal("instagram"),n.z.literal("telegram"),n.z.literal("leaderboard"),n.z.literal("gaming"),n.z.literal("gaming-2"),n.z.literal("generic-link"),n.z.literal("generic-add"),n.z.literal(o)]).optional().default(o).catch(o),a=n.z.object({label:n.z.string(),uri:n.z.string().url().refine((e=>e.startsWith("https://")||e.startsWith("solana:")),(e=>({message:`${e} is not a valid protocol`}))),prefersExternalTarget:n.z.boolean().optional().default(!1),preferredPresentation:n.z.union([n.z.literal("default"),n.z.literal("immerse")]).optional().default("immerse"),platform:n.z.union([n.z.literal("mobile"),n.z.literal("desktop"),n.z.literal("all")]).optional().default("all"),icon:s}),u=a.extend({limitToCollections:n.z.string().array().optional().default([]).refine((e=>0===e.length||e.every((e=>e.length))),(e=>({message:`${e} is not a valid array of collection ids`})))}),c=a.extend({type:n.z.literal("fungible"),limitToTokenAddresses:n.z.string().array().optional().default([]).refine((e=>0===e.length||e.every((e=>e.length))),(e=>({message:`${e} is not a valid array of token addresses`})))}),p=u.extend({type:n.z.literal("collectible").optional().default("collectible")}),f=n.z.union([p,c]),d=n.z.union([n.z.object({version:n.z.literal(1),shortcuts:n.z.array(u).optional().default([])}),n.z.object({version:n.z.literal(2),shortcuts:n.z.array(f).optional().default([])})]);n.z.object({collectionId:n.z.string().optional(),tokenId:n.z.string().optional(),ownerAddress:n.z.string().optional()})})),i.register("9IAca",(function(t,r){e(t.exports,"appendShortcut",(function(){return n})),e(t.exports,"ensureExternalUrl",(function(){return o})),e(t.exports,"isValidUrl",(function(){return i}));const n=e=>{const t=e.pathname.split("/").filter((e=>""!==e)).join("/"),r=new URL(`https://${e.hostname}`);return r.pathname=t+"/shortcuts.json",r.search=e.search,r},o=e=>{if(!e||!e.trim())return"";const t=e.trim();return/^https?:\/\//.test(t)?t:`https://${t}`},i=e=>{if(!e)return!1;try{return new URL(e),!0}catch(e){return!1}}})),i.register("vH2es",(function(t,r){e(t.exports,"trackLinkOpen",(function(){return o}),(function(e){return o=e})),e(t.exports,"trackModalOpen",(function(){return i}),(function(e){return i=e}));var n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};function o(e,t){var{hostname:r,platform:o}=e,i=n(e,["hostname","platform"]);const s=r.includes("//")?new URL(r).hostname:r;return{data:"collectible"===i.type?{platform:o,hostname:s,collectionName:i.collectionName,label:t.label,uri:t.uri}:{hostname:s,platform:o,fungible:i.caip19,label:t.label,uri:t.uri}}}function i(e){var{hostname:t,platform:r}=e,o=n(e,["hostname","platform"]);const i=t.includes("//")?new URL(t).hostname:t;return{data:"collectible"===o.type?{platform:r,hostname:i,collectionName:o.collectionName}:{platform:r,hostname:i,fungible:o.caip19}}}})),i.register("jXZgH",(function(t,r){e(t.exports,"createShortcutHooks",(function(){return s}));var n=i("hKbhf"),o=i("hhSeR");function s(e,t){return{useShortcuts:(t,r,n)=>(0,o.useShortcuts)(e(),t,r,n),usePrefetchShortcuts:(r,o)=>(0,n.usePrefetchShortcuts)(e(),t,r,o)}}})),i.register("hKbhf",(function(t,r){e(t.exports,"usePrefetchShortcuts",(function(){return c})),e(t.exports,"useFetchShortcuts",(function(){return f}));var n=i("4y59b"),o=i("lNRH9"),s=i("lDSNw"),a=i("c1xlr"),u=i("81b1l");const c=(e,t,r,n)=>{(0,s.useEffect)((()=>{(0,a.prefetchShortcuts)(e,t,r,n)}),[r,n,e,t])},p=(0,n.toMilliseconds)({minutes:5}),f=(e,t,r)=>{const n=null!==t&&r;return(0,o.useQuery)(Object.assign({enabled:n,cacheTime:p,staleTime:p,refetchInterval:!1,refetchOnMount:!1},(0,u.getShortcutsQuery)(t,e)))}})),i.register("hhSeR",(function(t,r){e(t.exports,"useShortcuts",(function(){return c}));var n=i("cR6w7"),o=i("9IAca"),s=i("hKbhf"),a=i("cCvgZ");function u(e){return Boolean(e&&"object"==typeof e&&"type"in e&&"fungible"===e.type)}function c(e,t,r,n){var i,c;const f=function(e){return u(e)?(0,o.ensureExternalUrl)(e.externalUrl):(0,o.ensureExternalUrl)(null==e?void 0:e.externalUrl)}(t),d=(0,o.isValidUrl)(f)&&Boolean(f)&&!function(e){var t;return!u(e)&&(null===(t=null==e?void 0:e.collection.isSpam)||void 0===t||t)}(t)&&n,{data:l,isLoading:h}=(0,s.useFetchShortcuts)(e,d&&f?new URL(f):null,n),y=u(t)?"":null!==(i=p(t))&&void 0!==i?i:"",g=u(t)?t.tokenAddress:null!==(c=null==t?void 0:t.id)&&void 0!==c?c:"",v=u(t)?{platform:r,tokenAddress:g,type:"fungible"}:{platform:r,collectionId:y,type:"collectible"},w=(0,a.useMappedShortcuts)(null!=l?l:[],{collectionId:y,tokenId:g,ownerAddress:null==t?void 0:t.owner},v);return{isLoading:!t||h&&d,shortcuts:d?w:[]}}const p=e=>{if(null==e?void 0:e.chainData)return(0,n.isEthereumCollectibleChainData)(e.chainData)?e.chainData.contract:(0,n.isSolanaCollectibleChainData)(e.chainData)?e.collection.id:(0,n.isBitcoinCollectibleChainData)(e.chainData)?e.chainData.firstCreatedInscriptionId:void 0}})),i.register("cCvgZ",(function(t,r){e(t.exports,"useMappedShortcuts",(function(){return a}));var n=i("lDSNw"),o=i("92XKC"),s=i("2Snx5");const a=(e,t,r)=>(0,n.useMemo)((()=>{const n=(0,s.parse)({input:t,shortcuts:e});return(0,o.filter)(n,r)}),[e,t,r])})),i.register("92XKC",(function(t,r){e(t.exports,"filter",(function(){return n}));const n=(e,t)=>e?e.filter((e=>"fungible"===t.type?function(e,t){const r="type"in e&&"fungible"===e.type?e:null;if(!r)return!1;const n="all"===r.platform||r.platform===t.platform,o=r.limitToTokenAddresses&&r.limitToTokenAddresses.length>0;return!(!n||o)||!(!n||!o)&&r.limitToTokenAddresses.some((e=>e===t.tokenAddress))}(e,t):function(e,t){const r="type"in e&&"collectible"!==e.type?null:e;if(!r)return!1;const n="all"===r.platform||r.platform===t.platform,o=r.limitToCollections&&r.limitToCollections.length>0;return!(!n||o)||!(!n||!o)&&r.limitToCollections.some((e=>e===t.collectionId))}(e,t))).slice(0,8):[]})),i.register("2Snx5",(function(t,r){e(t.exports,"parse",(function(){return n}));const n=({input:e,shortcuts:t})=>{if(0===t.length)return[];let r=JSON.stringify(t);return e.collectionId&&(r=r.replaceAll("{{collectionId}}",e.collectionId)),e.tokenId&&(r=r.replaceAll("{{tokenId}}",e.tokenId)),e.ownerAddress&&(r=r.replaceAll("{{ownerAddress}}",e.ownerAddress)),JSON.parse(r)}})),i.register("2lhm1",(function(t,r){e(t.exports,"getIcon",(function(){return a}));var n=i("4y59b"),o=i("fxzB8");const s=[["twitter",[/twitter.com/i]],["x",[/x.com/i]],["discord",[/discord.com/i,/discord.gg/i]],["telegram",[/t.me/i]],["instagram",[/instagram.com/i]]];function a(e,t){const r=(0,n.getHostname)(e.toString());return t===o.DEFAULT_ICON&&r?function(e){for(const[t,r]of s)if(r.some((t=>t.test(e))))return t;return o.DEFAULT_ICON}(r):t}})),i.register("5ZL0s",(function(r,n){e(r.exports,"getVaultProxy",(function(){return h}),(function(e){return h=e})),e(r.exports,"importSeedAccount",(function(){return g}),(function(e){return g=e})),e(r.exports,"isExistingSeed",(function(){return v}),(function(e){return v=e})),e(r.exports,"exportPrivateKey",(function(){return b}),(function(e){return b=e})),e(r.exports,"exportEntropy",(function(){return S}),(function(e){return S=e}));var o=i("6Tvfa"),s=i("aQIUM"),a=i("gd9Oy"),u=i("c9gT2"),c=i("13Nf3"),p=i("f44BS"),f=i("fXsMl"),d=i("6rT8n").Buffer,l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const h=()=>({addAccountForSeed:w,addReadonlyAccount:T,importPrivateKeyAccount:y,connectLedgerAccounts:m,fetchAllAccounts:I,fetchAllSeedMetas:O,connectSolanaSeedVaultAccounts:()=>{throw new Error("Solana Seed Vault is not supported on browser extension.")},deriveAddresses:E,removeAccount:e=>l(void 0,void 0,void 0,(function*(){if(!(yield x(e)))throw new Error("Error while removing account")})),reorderAccount:(e,t)=>l(void 0,void 0,void 0,(function*(){if(!(yield A(e,t)))throw new Error("Error while reordering account")})),sign:P}),y=(e,t,r)=>l(void 0,void 0,void 0,(function*(){const n=t.fold((e=>d.from(e.buffer).toString("base64"))),o=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ImportPrivateKeyAccount,[e,n,r]),i=yield u.sendMessage(p.browser.runtime,o);if("error"in i)throw new Error(i.error.message);if("string"==typeof i.result)return JSON.parse(i.result);throw new Error("Invalid response")})),g=(e,r,n)=>l(void 0,void 0,void 0,(function*(){const o=e.getEntropy(),i=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ImportSeedAccount,[t(c).encode(o),r,n]);o.fill(0);const s=yield u.sendMessage(p.browser.runtime,i);if("error"in s)throw new Error(s.error.message);if("string"==typeof s.result)return JSON.parse(s.result);throw new Error("Invalid response")})),v=e=>l(void 0,void 0,void 0,(function*(){const r=e.getEntropy(),n=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.IsExistingSeed,t(c).encode(r));r.fill(0);const o=yield u.sendMessage(p.browser.runtime,n);if("error"in o)throw new Error(o.error.message);if("boolean"==typeof o.result||null===o.result)return o.result;throw new Error("Invalid response")})),w=e=>l(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.AddAccountForSeed,[e]),r=u.parse(yield p.browser.runtime.sendMessage(u.stringify(t)));if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return JSON.parse(r.result);throw new Error("Invalid response")})),m=(e,t)=>l(void 0,void 0,void 0,(function*(){const r=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.AddLedgerAccounts,[e,t]),n=u.parse(yield p.browser.runtime.sendMessage(u.stringify(r)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return JSON.parse(n.result);throw new Error("Invalid response")})),T=e=>l(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ImportReadOnlyAccount,e),r=u.parse(yield p.browser.runtime.sendMessage(u.stringify(t)));if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return JSON.parse(r.result);throw new Error("Invalid response")})),b=(e,t)=>l(void 0,void 0,void 0,(function*(){const r=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ExportPrivateKey,[e,t]),n=u.parse(yield p.browser.runtime.sendMessage(u.stringify(r)));if("error"in n)throw new Error(n.error.message);if("string"==typeof n.result)return s.ObfuscatedBytes.from(d.from(n.result,"hex"));throw new Error("Invalid response")})),S=e=>l(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ExportEntropy,[e]),r=u.parse(yield p.browser.runtime.sendMessage(u.stringify(t)));if("error"in r)throw new Error(r.error.message);if("string"==typeof r.result)return s.ObfuscatedBytes.from(d.from(r.result,"hex"));throw new Error("Invalid response")})),E=()=>l(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.DeriveAddresses),t=yield u.sendMessage(p.browser.runtime,e);if("error"in t)throw new Error(t.error.message);return t.result})),x=e=>l(void 0,void 0,void 0,(function*(){const t=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.RemoveAccount,e),r=yield u.sendMessage(p.browser.runtime,t);if("error"in r)throw new Error(r.error.message);return r.result})),A=(e,t)=>l(void 0,void 0,void 0,(function*(){const r=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.ReorderAccount,{identifier:e,toIndex:t}),n=yield u.sendMessage(p.browser.runtime,r);if("error"in n)throw new Error(n.error.message);return n.result})),I=()=>l(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.GetAllAccounts),t=u.parse(yield p.browser.runtime.sendMessage(u.stringify(e)));if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result){const e=JSON.parse(t.result);return(0,o.deserializeUint8Arrays)({accounts:e}).accounts}throw new Error("Invalid response")})),O=()=>l(void 0,void 0,void 0,(function*(){const e=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.GetAllSeeds),t=u.parse(yield p.browser.runtime.sendMessage(u.stringify(e)));if("error"in t)throw new Error(t.error.message);if("string"==typeof t.result)return JSON.parse(t.result);throw new Error("Invalid response")})),P=(e,r)=>l(void 0,void 0,void 0,(function*(){const n=o.VaultSignerParams.parse(r);n.chainType===a.AddressType.Solana&&"transaction"===n.signingType&&"string"!=typeof n.message&&(n.message=t(c).encode(n.message));const i=(0,f.createJsonRpcRequest)(f.WalletToBackgroundRequestMethods.Sign,{accountIdentifier:e,params:n}),s=u.parse(yield p.browser.runtime.sendMessage(u.stringify(i)));if("error"in s)throw new Error(s.error.message);if("string"==typeof s.result)return JSON.parse(s.result);throw new Error("Invalid response")}))})),i.register("5cqUH",(function(t,r){e(t.exports,"getLegacyMnemonicFetcher",(function(){return a}),(function(e){return a=e}));var n=i("aQIUM"),o=i("1hThF"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a=()=>({fetch:()=>s(void 0,void 0,void 0,(function*(){const e=yield(0,o.getLegacyMnemonic)();if(!e)return null;switch(e.type){case"bip39":{const t=yield e.value.getMnemonic(),r=n.ObfuscatedBytes.from(t);return t.fill(0),r}case"deprecated":{const t=n.ObfuscatedBytes.from(e.value);return e.value.fill(0),t}}}))})})),i.register("1hThF",(function(r,n){e(r.exports,"getLegacyMnemonic",(function(){return f}),(function(e){return f=e}));var o=i("c9gT2"),s=i("13Nf3"),a=i("f44BS"),u=i("fXsMl"),c=i("9F7Hg"),p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const f=()=>p(void 0,void 0,void 0,(function*(){const e=(0,u.createJsonRpcRequest)(u.WalletToBackgroundRequestMethods.GetLegacyMnemonic),r=o.parse(yield a.browser.runtime.sendMessage(o.stringify(e)));if("error"in r)throw new Error(r.error.message);if(!r.result)return null;const[n,i]=r.result;switch(n){case 0:{const e=new Uint8Array(t(s).decode(i).buffer),r=(yield(0,c.getBip39)()).fromEntropy(e);return e.fill(0),{type:"bip39",value:r}}case 1:return{type:"deprecated",value:new Uint8Array(t(s).decode(i).buffer)}}}))})),i.register("9F7Hg",(function(t,r){e(t.exports,"getBip39",(function(){return s}),(function(e){return s=e})),i("dvKEl");var n=i("2EjNO");i("8WRrL");var o=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const s=(()=>{let e=null;return()=>o(void 0,void 0,void 0,(function*(){e||(e=yield n.Bip39Factory.webCrypto("english"));return e}))})()})),i.register("dvKEl",(function(t,r){e(t.exports,"Bip39Factory",(function(){return i("2EjNO").Bip39Factory}));i("88Yw1"),i("2EjNO")})),i.register("88Yw1",(function(t,r){e(t.exports,"ERR_UNKNOWN",(function(){return o}),(function(e){return o=e})),e(t.exports,"ERR_INVALID_CHECKSUM",(function(){return a}),(function(e){return a=e})),e(t.exports,"assertEntropyLengthIsValid",(function(){return d}),(function(e){return d=e})),e(t.exports,"assertWordlistIsValid",(function(){return h}),(function(e){return h=e})),e(t.exports,"generateEntropy",(function(){return y}),(function(e){return y=e})),e(t.exports,"deriveBits",(function(){return g}),(function(e){return g=e})),e(t.exports,"mapBitsToIndexes",(function(){return v}),(function(e){return v=e})),e(t.exports,"indexesToEntropy",(function(){return w}),(function(e){return w=e})),e(t.exports,"entropyToIndexes",(function(){return m}),(function(e){return m=e})),e(t.exports,"mnemonicToIndexes",(function(){return T}),(function(e){return T=e})),e(t.exports,"entropyToMnemonic",(function(){return b}),(function(e){return b=e})),e(t.exports,"entropyToSeed",(function(){return E}),(function(e){return E=e}));var n=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const o=new Error("Unknown error"),i=new Error("Invalid entropy length"),s=new Error("Invalid mn*monic sentence length"),a=new Error("Invalid checksum"),u=new RangeError("Invalid mn*monic word"),c=new RangeError("Invalid wordlist"),p=new RangeError("Invalid wordlist index"),f=(e,t)=>{if(!e)throw t};function d(e){f(e>=128,i),f(e<=256,i),f(e%32==0,i)}function l(e){f(e>=12,s),f(e<=24,s),f(e%3==0,s)}function h(e){f(2048===e.length,c),f(e.every((e=>"string"==typeof e)),c)}function y(e,t){return l(e),t(4*e/3)}function g(e,t){return n(this,void 0,void 0,(function*(){const r=8*e.length;d(r);const n=r/32,o=yield t(e),[i]=o,s=8-n,a=i>>>s<<s>>>0,u=new Uint8Array(e.length+1);return u.set(e,0),u[u.length-1]=a,u}))}function v(e){const t=8*(e.length-1);d(t);const r=(t+t/32)/11,n=new ArrayBuffer(4*r),o=new DataView(n);let i=0,a=0,u=0;for(const t of e)if(u+=8,a|=t<<32-u,a>>>=0,u>=11){const e=a>>>21;f(e>=0&&e<=2047,p),o.setUint32(4*i,e,!0),i++,a<<=11,a>>>=0,u-=11}return f(i===r,s),new Uint32Array(n)}function w(e){l(e.length);const t=function(e){l(e.length);const t=11*e.length,r=new ArrayBuffer(Math.ceil(t/8)),n=new DataView(r),o=new DataView(e.buffer),i=e.length;let s=0,a=0,u=0,c=8;for(let e=0;e<i;e++){const t=o.getUint32(4*e,!0);f(t<2048,p);let r=11;for(;r>0;){const e=r>=c?c:r;s|=t>>32-(32-r)-e&(1<<e)-1,a+=e,s<<=c-e,s>>>=0,r-=e,c-=e,c<=0&&(c=8),a%8==0&&(n.setUint8(u,s),u++,s=0)}}return i%8!=0&&n.setUint8(u,s),new Uint8Array(r)}(e),r=t.slice(0,t.length-1);return t.fill(0),r}function m(e,t){return n(this,void 0,void 0,(function*(){d(8*e.length);const r=yield g(e,t),n=v(r);return r.fill(0),n}))}function T(e,t){h(t);const r=new Set(t),n=new Uint32Array(24);let o=0,i="";for(let s=0;s<e.length;s++){const a=e[s],c=32===a,p=s===e.length-1;if(p&&(i+=String.fromCharCode(a)),c||p){f(r.has(i),u);let e=0;for(const r of t){if(i===r)break;e++}n[o++]=e,i=""}else i+=String.fromCharCode(a)}l(o);const s=n.slice(0,o);return n.fill(0),s}function b(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield m(e,r),o=new Uint8Array(n.reduce(((e,r)=>e+t[r].length+1),-1));let i=0;for(const e of n){i>0&&(o[i++]=32);const r=t[e];for(const e of r)o[i++]=e.charCodeAt(0)}return n.fill(0),o}))}const S=Uint8Array.of(109,110,101,109,111,110,105,99);function E(e,t,r,o,i){return n(this,void 0,void 0,(function*(){const n=yield b(e,r,o),s=new Uint8Array(S.length+t.length);s.set(S,0),s.set(t,S.length);const a=yield i(n,s,2048,64,"sha512");return s.fill(0),n.fill(0),a}))}})),i.register("2EjNO",(function(t,r){e(t.exports,"Bip39Factory",(function(){return l}),(function(e){return l=e}));var n=i("88Yw1"),o=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},s=function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},a=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function u(e){return o(this,void 0,void 0,(function*(){if("english"===e)return(yield i("dCUvq")).default}))}function c(e){return t=>new e(t)}function p(e,t){return r=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null,a=null,u=null;try{i=(0,n.indexesToEntropy)(r),s=yield(0,n.deriveBits)(i,t),a=(0,n.mapBitsToIndexes)(s);const o=r[r.length-1];if(o!==a[a.length-1])throw n.ERR_INVALID_CHECKSUM;u=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=n.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),null==s||s.fill(0),null==a||a.fill(0),o)throw o;return u}}))}function f(e,t){return r=>o(this,void 0,void 0,(function*(){let o=null,i=null,s=null;try{i=(0,n.mnemonicToIndexes)(r,t),s=yield e.fromIndexes(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=n.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}))}function d(e,t){return r=>{let o=null,i=null,s=null;try{i=(0,n.generateEntropy)(r,t),s=e.fromEntropy(i)}catch(e){e instanceof Error?o=e:(console.error(e),o=n.ERR_UNKNOWN)}finally{if(null==i||i.fill(0),o)throw o;return s}}}class l{static webCrypto(e){var t,r;return o(this,void 0,void 0,(function*(){const i="string"==typeof e?yield u(e):e;(0,n.assertWordlistIsValid)(i);const l=e=>o(this,void 0,void 0,(function*(){return new Uint8Array(yield crypto.subtle.digest("SHA-256",e))})),h=(e,t,r,n,i)=>o(this,void 0,void 0,(function*(){const o="SHA-"+i.substring(3),s=yield crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]),a=yield crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:o},s,8*n);return new Uint8Array(a)}));return r=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,n.entropyToSeed)(a(this,t,"f"),e,i,l,h),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,n.entropyToIndexes)(a(this,t,"f"),l),this.getMnemonic=()=>(0,n.entropyToMnemonic)(a(this,t,"f"),i,l),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,n.assertEntropyLengthIsValid)(8*e.length),s(this,t,e.slice(),"f")}},t=new WeakMap,r.fromEntropy=c(r),r.fromIndexes=p(r,l),r.fromMnemonic=f(r,i),r.fromSentenceLength=d(r,(e=>crypto.getRandomValues(new Uint8Array(e)))),r.wordlist=i,r}))}static nodeCrypto(e){var t,r;return o(this,void 0,void 0,(function*(){const o="string"==typeof e?yield u(e):e;(0,n.assertWordlistIsValid)(o);const{randomBytes:l,createHash:h,pbkdf2:y}=yield i("f5plE"),g=e=>new Uint8Array(h("sha256").update(e).digest().buffer),v=(...e)=>new Promise(((t,r)=>{y(...e,((e,n)=>{if(e)return r(e);t(new Uint8Array(n.buffer))}))}));return r=class{constructor(e){t.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,n.entropyToSeed)(a(this,t,"f"),e,o,g,v),this.getEntropy=()=>a(this,t,"f").slice(),this.getIndexes=()=>(0,n.entropyToIndexes)(a(this,t,"f"),g),this.getMnemonic=()=>(0,n.entropyToMnemonic)(a(this,t,"f"),o,g),this.getSentenceLength=()=>{const e=8*a(this,t,"f").length;return(e+e/32)/11},(0,n.assertEntropyLengthIsValid)(8*e.length),s(this,t,e.slice(),"f")}},t=new WeakMap,r.fromEntropy=c(r),r.fromIndexes=p(r,g),r.fromMnemonic=f(r,o),r.fromSentenceLength=d(r,(e=>new Uint8Array(l(e).buffer))),r.wordlist=o,r}))}static customCrypto(e,t){var r,i;return o(this,void 0,void 0,(function*(){const o="string"==typeof e?yield u(e):e;(0,n.assertWordlistIsValid)(o);const{random:l,sha256:h,pbkdf2:y}=t;return i=class{constructor(e){r.set(this,void 0),this.deriveSeed=(e=new Uint8Array)=>(0,n.entropyToSeed)(a(this,r,"f"),e,o,h,y),this.getEntropy=()=>a(this,r,"f").slice(),this.getIndexes=()=>(0,n.entropyToIndexes)(a(this,r,"f"),h),this.getMnemonic=()=>(0,n.entropyToMnemonic)(a(this,r,"f"),o,h),this.getSentenceLength=()=>{const e=8*a(this,r,"f").length;return(e+e/32)/11},(0,n.assertEntropyLengthIsValid)(8*e.length),s(this,r,e.slice(),"f")}},r=new WeakMap,i.fromEntropy=c(i),i.fromIndexes=p(i,h),i.fromMnemonic=f(i,o),i.fromSentenceLength=d(i,l),i.wordlist=o,i}))}}})),i.register("dCUvq",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("8ydDW")).then((()=>i("ggpRk")))})),i.register("f5plE",(function(e,t){e.exports=import("./"+i("5V6iE").resolve("esIsT")).then((()=>i("c5KV4")))})),i.register("9hiP6",(function(t,r){e(t.exports,"getLedgerWebHIDDependencies",(function(){return u}),(function(e){return u=e}));var n=i("8Hh7g"),o=i("ibYAx"),s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const a=()=>s(void 0,void 0,void 0,(function*(){const{default:e}=yield i("UpAFA");return e})),u=()=>({defaultTransportTimeout:2e3,isSupported:()=>s(void 0,void 0,void 0,(function*(){if(o.BROWSER_ENV.browser.name===n.BROWSER_MAP.firefox||o.BROWSER_ENV.browser.name===n.BROWSER_MAP.safari)return!1;return(yield a()).isSupported()})),getNumDevices:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return(yield e.list()).length})),getFirstOpenedTransport:()=>s(void 0,void 0,void 0,(function*(){const e=yield a(),t=(yield e.list()).find((e=>e.opened));return t?new e(t):void 0})),create:()=>s(void 0,void 0,void 0,(function*(){return(yield a()).create()})),openConnected:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.openConnected()})),request:()=>s(void 0,void 0,void 0,(function*(){const e=yield a();return yield e.request()})),on:(e,t)=>{"hid"in window.navigator&&window.navigator.hid.addEventListener(e,(()=>{t()}))}})})),i.register("UpAFA",(function(e,t){e.exports=Promise.all([import("./"+i("5V6iE").resolve("2UKlV")),import("./"+i("5V6iE").resolve("9eTlR")),import("./"+i("5V6iE").resolve("h3t8x"))]).then((()=>i("2Vsq5")))})),i.register("miiws",(function(t,r){e(t.exports,"Circle",(function(){return o}));var n=i("4y59b");const o=i("cZIbv").default.div`
  height: ${e=>e.diameter}px;
  width: ${e=>e.diameter}px;
  margin: ${e=>e.margin};
  background-color: ${e=>e.alpha&&e.color?(0,n.hexToRGB)(e.color,e.alpha):e.color};
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  opacity: ${e=>e.opacity};
  overflow: hidden;
  ${e=>e.includeDarkBoxShadow?"box-shadow: inset 0px 0px 4px rgba(0, 0, 0, 0.25);":""}
`;o.defaultProps={color:"#333333",diameter:24,opacity:1}})),i.register("2KczM",(function(t,r){e(t.exports,"useIsomorphicLayoutEffect",(function(){return o}));var n=i("lDSNw"),o=(0,i("8UVR7").canUseDOM)()?n.useLayoutEffect:n.useEffect})),i.register("8UVR7",(function(t,r){function n(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}e(t.exports,"canUseDOM",(function(){return n}))})),i.register("3Uon5",(function(t,r){function n(e){}function o(e,t,r){}e(t.exports,"useCheckStyles",(function(){return n})),e(t.exports,"useControlledSwitchWarning",(function(){return o})),i("lDSNw")})),i.register("9PqFM",(function(t,r){e(t.exports,"useComposedRefs",(function(){return c}));var n=i("lDSNw"),o=i("l4vvo");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function u(e,t){if(null!=e)if((0,o.isFunction)(e))e(t);else try{e.current=t}catch(r){throw new Error('Cannot assign value "'+t+'" to ref "'+e+'"')}}function c(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.useCallback)((function(e){for(var r,n=a(t);!(r=n()).done;){u(r.value,e)}}),t)}})),i.register("l4vvo",(function(t,r){function n(e){return"boolean"==typeof e}function o(e){return!(!e||"[object Function]"!={}.toString.call(e))}function i(e){return"string"==typeof e}e(t.exports,"isBoolean",(function(){return n})),e(t.exports,"isFunction",(function(){return o})),e(t.exports,"isString",(function(){return i}))})),i.register("a9mJX",(function(t,r){function n(e,t){return function(r){if(e&&e(r),!r.defaultPrevented)return t(r)}}e(t.exports,"composeEventHandlers",(function(){return n}))})),i.register("90BMT",(function(t,r){function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[W]}function i(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===G}(e)||Array.isArray(e)||!!e[V]||!!e.constructor[V]||d(e)||l(e))}function s(e,t,r){void 0===r&&(r=!1),0===a(e)?(r?Object.keys:q)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function a(e){var t=e[W];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d(e)?2:l(e)?3:0}function u(e,t){return 2===a(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===a(e)?e.get(t):e[t]}function p(e,t,r){var n=a(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function f(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){return M&&e instanceof Map}function l(e){return F&&e instanceof Set}function h(e){return e.o||e.t}function y(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[W];for(var r=q(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),w(e)||o(e)||!i(e)||(a(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&s(e,(function(e,t){return g(t,!0)}),!0)),e}function v(){n(2)}function w(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function m(e){var t=z[e];return t||n(18,e),t}function T(){return H}function b(e,t){t&&(m("Patches"),e.u=[],e.s=[],e.v=t)}function S(e){E(e),e.p.forEach(A),e.p=null}function E(e){e===H&&(H=e.l)}function x(e){return H={p:[],l:H,h:e,m:!0,_:0}}function A(e){var t=e[W];0===t.i||1===t.i?t.j():t.O=!0}function I(e,t){t._=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.g||m("ES5").S(t,e,o),o?(r[W].P&&(S(t),n(4)),i(e)&&(e=O(t,e),t.l||k(t,e)),t.u&&m("Patches").M(r[W].t,e,t.u,t.s)):e=O(t,r,[]),S(t),t.u&&t.v(t.u,t.s),e!==j?e:void 0}function O(e,t,r){if(w(t))return t;var n=t[W];if(!n)return s(t,(function(o,i){return P(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return k(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=y(n.k):n.o;s(3===n.i?new Set(o):o,(function(t,i){return P(e,n,o,t,i,r)})),k(e,o,!1),r&&e.u&&m("Patches").R(n,r,e.u,e.s)}return n.o}function P(e,t,r,n,s,a){if(o(s)){var c=O(e,s,a&&t&&3!==t.i&&!u(t.D,n)?a.concat(n):void 0);if(p(r,n,c),!o(c))return;e.m=!1}if(i(s)&&!w(s)){if(!e.h.F&&e._<1)return;O(e,s),t&&t.A.l||k(e,s)}}function k(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&g(t,r)}function _(e,t){var r=e[W];return(r?h(r):e)[t]}function N(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function C(e){e.P||(e.P=!0,e.l&&C(e.l))}function D(e){e.o||(e.o=y(e.t))}function L(e,t,r){var n=d(t)?m("MapSet").N(t,r):l(t)?m("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:T(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,i=$;r&&(o=[n],i=Y);var s=Proxy.revocable(o,i),a=s.revoke,u=s.proxy;return n.k=u,n.j=a,u}(t,r):m("ES5").J(t,r);return(r?r.A:T()).p.push(n),n}function B(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return y(e)}e(t.exports,"default",(function(){return ee}));var R,H,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),M="undefined"!=typeof Map,F="undefined"!=typeof Set,K="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,j=U?Symbol.for("immer-nothing"):((R={})["immer-nothing"]=!0,R),V=U?Symbol.for("immer-draftable"):"__$immer_draftable",W=U?Symbol.for("immer-state"):"__$immer_state",G=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return q(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},z={},$={get:function(e,t){if(t===W)return e;var r=h(e);if(!u(r,t))return function(e,t,r){var n,o=N(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!i(n)?n:n===_(e.t,t)?(D(e),e.o[t]=L(e.A.h,n,e)):n},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,r){var n=N(h(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=_(h(e),t),i=null==o?void 0:o[W];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(f(r,o)&&(void 0!==r||u(e.t,t)))return!0;D(e),C(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==_(e.t,t)||t in e.t?(e.D[t]=!1,D(e),C(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=h(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},Y={};s($,(function(e,t){Y[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Y.deleteProperty=function(e,t){return Y.set.call(this,e,t,void 0)},Y.set=function(e,t,r){return $.set.call(this,e[0],t,r,e[0])};var Q=function(){function e(e){var t=this;this.g=K,this.F=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var s=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var u;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(e)){var c=x(t),p=L(t,e,void 0),f=!0;try{u=r(p),f=!1}finally{f?S(c):E(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(e){return b(c,o),I(e,c)}),(function(e){throw S(c),e})):(b(c,o),I(u,c))}if(!e||"object"!=typeof e){if(void 0===(u=r(e))&&(u=e),u===j&&(u=void 0),t.F&&g(u,!0),o){var d=[],l=[];m("Patches").M(e,u,d,l),o(d,l)}return u}n(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))};var n,o,i=t.produce(e,r,(function(e,t){n=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,n,o]})):[i,n,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||n(8),o(e)&&(e=function(e){return o(e)||n(22,e),function e(t){if(!i(t))return t;var r,n=t[W],o=a(t);if(n){if(!n.P&&(n.i<4||!m("ES5").K(n)))return n.t;n.I=!0,r=B(t,o),n.I=!1}else r=B(t,o);return s(r,(function(t,o){n&&c(n.t,t)===o||p(r,t,e(o))})),3===o?new Set(r):r}(e)}(e));var t=x(this),r=L(this,e,void 0);return r[W].C=!0,E(t),r},t.finishDraft=function(e,t){var r=(e&&e[W]).A;return b(r,t),I(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!K&&n(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var i=m("Patches").$;return o(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),J=new Q,Z=J.produce,ee=(J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseProxies.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J),Z)})),i.register("LqQFk",(function(t,r){e(t.exports,"default",(function(){return a}));var n=i("lDSNw"),o=i("lPSQ1"),s=function(e,t){return e===t};function a(e,t){void 0===t&&(t=s);var r=(0,n.useRef)(),i=(0,n.useRef)(e);return(0,o.useFirstMountState)()||t(i.current,e)||(r.current=i.current,i.current=e),r.current}})),i.register("lPSQ1",(function(t,r){e(t.exports,"useFirstMountState",(function(){return o}));var n=i("lDSNw");function o(){var e=(0,n.useRef)(!0);return e.current?(e.current=!1,!0):e.current}})),i.register("g1ck2",(function(t,r){e(t.exports,"createNamedContext",(function(){return o}));var n=i("lDSNw");function o(e,t){return(0,n.createContext)(t)}})),i.register("6l2nq",(function(t,r){e(t.exports,"Row",(function(){return n}));const n=i("cZIbv").default.div`
  display: flex;
  flex-direction: row;
  width: ${e=>e.width};
  margin: ${e=>e.margin};
  padding: ${e=>e.padding};
  align-items: ${e=>e.align};
  justify-content: ${e=>e.justify};
`;n.defaultProps={width:"100%",align:"center",justify:"flex-start"}})),i.register("e4sKe",(function(r,n){e(r.exports,"TokenNameBadge",(function(){return c})),e(r.exports,"AddressTypeBadge",(function(){return p}));var o=i("gYh0e"),s=i("lDSNw"),a=i("gMNJN"),u=i("csTfi");const c=({children:e,networkID:r,walletAddress:n})=>t(s).createElement(u.TitleBadgeWrapper,null,e,n?t(s).createElement(p,{networkID:r,address:n}):null),p=({networkID:e,address:r})=>{const n=a.hooks.useEnabledAddressTypes();if(!(0,o.showAddressTypeBadge)(n,e))return null;const i=(0,o.getAddressBadge)(e,r);return i?t(s).createElement(u.TitleBadge,{text:i}):null}})),i.register("csTfi",(function(r,n){e(r.exports,"TitleBadge",(function(){return c})),e(r.exports,"TitleBadgeContainer",(function(){return f})),e(r.exports,"TitleBadgeWrapper",(function(){return p}));var o=i("4y59b"),s=i("lDSNw"),a=i("cZIbv"),u=i("kn91D");const c=({text:e})=>t(s).createElement(f,null,t(s).createElement(d,null,e)),p=a.default.div`
  display: flex;
  align-items: center;
`,f=a.default.div`
  background: ${(0,o.hexToRGB)("#FFFFFF",.1)};
  border-radius: 3px;
  padding: 0px 4px;
  color: white;
  display: inline-block;
  margin-left: 5px;
`,d=(0,a.default)(u.StyledText).attrs({size:12,lineHeight:17,weight:600,noWrap:!0})``})),i.register("houiY",(function(e,t){e.exports=i("jAiiq")()})),i.register("jAiiq",(function(e,t){var r=i("kXOqC");function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return i.PropTypes=i,i}})),i.register("kXOqC",(function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})),i.register("KqC1b",(function(t,r){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n,o;e(t.exports,"assign",(function(){return a})),e(t.exports,"createMachine",(function(){return d})),e(t.exports,"interpret",(function(){return h})),(o=n||(n={}))[o.NotStarted=0]="NotStarted",o[o.Running=1]="Running",o[o.Stopped=2]="Stopped";var i={type:"xstate.init"};function s(e){return void 0===e?[]:[].concat(e)}function a(e){return{type:"xstate.assign",assignment:e}}function u(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function c(e){return function(t){return e===t}}function p(e){return"string"==typeof e?{type:e}:e}function f(e,t){return{value:e,context:t,actions:[],changed:!1,matches:c(e)}}function d(e,t){void 0===t&&(t={});var r={config:e,_options:t,initialState:{value:e.initial,actions:s(e.states[e.initial].entry).map((function(e){return u(e,t.actions)})),context:e.context,matches:c(e.initial)},transition:function(t,n){var o,i,a="string"==typeof t?{value:t,context:e.context}:t,d=a.value,l=a.context,h=p(n),y=e.states[d];if(y.on){var g=s(y.on[h.type]),v=function(t){if(void 0===t)return{value:f(d,l)};var n="string"==typeof t?{target:t}:t,o=n.target,i=void 0===o?d:o,s=n.actions,a=void 0===s?[]:s,p=n.cond,g=l;if((void 0===p?function(){return!0}:p)(l,h)){var v=e.states[i],w=!1,m=[].concat(y.exit,a,v.entry).filter((function(e){return e})).map((function(e){return u(e,r._options.actions)})).filter((function(e){if("xstate.assign"===e.type){w=!0;var t=Object.assign({},g);return"function"==typeof e.assignment?t=e.assignment(g,h):Object.keys(e.assignment).forEach((function(r){t[r]="function"==typeof e.assignment[r]?e.assignment[r](g,h):e.assignment[r]})),g=t,!1}return!0}));return{value:{value:i,context:g,actions:m,changed:i!==d||m.length>0||w,matches:c(i)}}}};try{for(var w=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(g),m=w.next();!m.done;m=w.next()){var T=v(m.value);if("object"==typeof T)return T.value}}catch(e){o={error:e}}finally{try{m&&!m.done&&(i=w.return)&&i.call(w)}finally{if(o)throw o.error}}}return f(d,l)}};return r}var l=function(e,t){return e.actions.forEach((function(r){var n=r.exec;return n&&n(e.context,t)}))};function h(e){var t=e.initialState,r=n.NotStarted,o=new Set,s={_machine:e,send:function(i){r===n.Running&&(t=e.transition(t,i),l(t,p(i)),o.forEach((function(e){return e(t)})))},subscribe:function(e){return o.add(e),e(t),{unsubscribe:function(){return o.delete(e)}}},start:function(){return r=n.Running,l(t,i),s},stop:function(){return r=n.Stopped,o.clear(),s},get state(){return t},get status(){return r}};return s}})),i.register("3C4EA",(function(t,r){e(t.exports,"useMachine",(function(){return p})),e(t.exports,"useCreateMachine",(function(){return f}));var n=i("lDSNw"),o=i("KqC1b"),s=(o=i("KqC1b"),i("l4vvo")),a=i("8KJ9S");function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}var c=function(e){var t;return e.subscribe((function(e){t=e})).unsubscribe(),t};function p(e,t,r){var i=(0,n.useRef)(e),p=(0,a.useConstant)((function(){return(0,o.interpret)(i.current).start()})),f=(0,n.useRef)(null),d=(0,n.useState)((function(){return c(p)})),l=d[0],h=d[1],y=(0,n.useCallback)((function(e){var r=(0,s.isString)(e)?{type:e}:e,n=function(e){return Object.entries(e).reduce((function(e,t){var r=t[0],n=t[1];return e[r]=n.current,e}),{})}(t);p.send(u({},r,{lastEventType:f.current,refs:n})),f.current=r.type}),[r]);return(0,n.useEffect)((function(){return p.subscribe((function(e){e.changed&&h(e)})),function(){p.stop()}}),[p]),(0,n.useEffect)((function(){}),[r,l]),[(0,n.useMemo)((function(){return u({},l,{matches:function(e){return e===l.value}})}),[l.changed,l.context,l.value]),y,p]}function f(e,t){return(0,a.useConstant)((function(){return(0,o.createMachine)(e,t)}))}})),i.register("8KJ9S",(function(t,r){e(t.exports,"useConstant",(function(){return o}));var n=i("lDSNw");function o(e){var t=(0,n.useRef)();return t.current||(t.current={v:e()}),t.current.v}})),i.register("03QiC",(function(r,n){e(r.exports,"ChainLogo",(function(){return c}));var o=i("belzv"),s=i("4y59b"),a=i("lDSNw"),u=i("aanFI");const c=t(a).memo((({networkID:e,height:r,width:n,stroke:i,strokeWidth:c,spacing:p="medium"})=>{if(!e)return null;const f={height:r,width:n,stroke:i,strokeWidth:c};return o.Chains.isBitcoinNetworkID(e)?"medium"===p?t(a).createElement(u.IconChainBitcoin,Object.assign({},f)):t(a).createElement(u.IconChainBitcoinLarge,Object.assign({},f)):o.Chains.isSolanaNetworkID(e)?"medium"===p?t(a).createElement(u.IconChainSolana,Object.assign({},f)):t(a).createElement(u.IconChainSolanaLarge,Object.assign({},f)):o.Chains.isEthereumNetworkID(e)?"medium"===p?t(a).createElement(u.IconChainEthereum,Object.assign({},f)):t(a).createElement(u.IconChainEthereumLarge,Object.assign({},f)):o.Chains.isPolygonNetworkID(e)?"medium"===p?t(a).createElement(u.IconChainPolygon,Object.assign({},f)):t(a).createElement(u.IconChainPolygonLarge,Object.assign({},f)):(0,s.assertNever)(e)}))})),i.register("7E6dj",(function(r,n){e(r.exports,"CheckboxGroup",(function(){return d}),(function(e){return d=e})),e(r.exports,"Checkbox",(function(){return l}),(function(e){return l=e}));var o=i("fkSoA"),s=i("lDSNw"),a=i("cZIbv"),u=i("aanFI"),c=i("6l2nq"),p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const f=22;const d=(0,a.default)(c.Row)`
  margin: ${e=>{var t;return null!==(t=e.margin)&&void 0!==t?t:0}};
  > * {
    margin-right: 10px;
  }

  label {
    color: #ab9ff2;
    cursor: pointer;

    &:hover {
      color: #e2dffe;
    }
  }
`,l=e=>{const{checked:r,onChange:n,color:i,checkColor:a}=e,c=p(e,["checked","onChange","color","checkColor"]),d=function(e,t="#AB9FF2"){return(0,s.useMemo)((()=>({background:"#282828",border:`1px solid ${e?t:"#4d4d4d"}`,borderRadius:"6px",height:`${f}px`,minHeight:`${f}px`,width:`${f}px`,minWidth:`${f}px`,cursor:"pointer",userSelect:"none",position:"relative",outlineColor:"transparent",outlineStyle:"none",boxShadow:"none"})),[e,t])}(r,i),l=function(e,t="#AB9FF2"){return(0,s.useMemo)((()=>({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%",height:"100%",userSelect:"none",pointerEvents:"none",borderRadius:"4px",opacity:""+(e?1:0),zIndex:1,background:e?t:"transparent"})),[e,t])}(r,i);return t(s).createElement(o.CustomCheckboxContainer,{checked:r,onChange:n,style:d},t(s).createElement(o.CustomCheckboxInput,Object.assign({},c)),t(s).createElement("span",{"aria-hidden":!0,style:l},t(s).createElement(u.IconCheckmark,{width:"0.9em",fill:a||"#222"})))}})),i.register("fkSoA",(function(t,r){e(t.exports,"CustomCheckboxContainer",(function(){return D})),e(t.exports,"CustomCheckboxInput",(function(){return L}));var n=i("lDSNw"),o=i("g1ck2"),s=i("l4vvo"),a=i("3Uon5"),u=i("9PqFM"),c=i("a9mJX"),p=i("2KczM"),f=i("KqC1b"),d=i("3C4EA");function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var y,g,v,w,m,T=!1;function b(e){return!(!e||e.isControlled||e.disabled)}function S(e){return function(t,r){return t&&t.isControlled&&r.state===e}}(v=g||(g={})).Checked="checked",v.Mixed="mixed",v.Unchecked="unchecked",(m=w||(w={})).GetDerivedData="GET_DERIVED_DATA",m.Mount="MOUNT",m.Set="SET",m.Toggle="TOGGLE",m.Unmount="UNMOUNT";var E=(0,f.assign)((function(e,t){return l({},e,{refs:t.refs})})),x=((y={})[w.Mount]={actions:E},y[w.GetDerivedData]={actions:[E,(0,f.assign)((function(e,t){return l({},e,t.data)}))]},y[w.Set]=[{target:g.Checked,cond:S(g.Checked)},{target:g.Unchecked,cond:S(g.Unchecked)},{target:g.Mixed,cond:S(g.Mixed)}],y),A=function(e,t){var r,n,o,i;return{id:"mixed-checkbox",initial:e,context:{disabled:t.disabled,isControlled:t.isControlled,refs:{input:null}},states:(i={},i[g.Unchecked]={entry:E,on:l((r={},r[w.Toggle]={target:g.Checked,cond:b},r),x)},i[g.Checked]={entry:E,on:l((n={},n[w.Toggle]={target:g.Unchecked,cond:b},n),x)},i[g.Mixed]={entry:E,on:l((o={},o[w.Toggle]={target:g.Checked,cond:b},o),x)},i)}};function I(e,t,r){void 0===r&&(r="useMixedCheckbox");var o,i=t||{},s=i.checked,a=i.defaultChecked,u=i.disabled,f=i.onChange,l=i.onClick,h=null!=s,y=(0,d.useCreateMachine)(A(O(h?s:a),{disabled:!!u,isControlled:h})),v=(0,d.useMachine)(y,{input:e},T),m=v[0],b=v[1],S={"aria-checked":P(m.value),checked:(o=m.value,o===g.Checked),disabled:!!u,onChange:(0,c.composeEventHandlers)(f,(function(){h||b(w.Toggle)})),onClick:(0,c.composeEventHandlers)(l,(function(){x()})),type:"checkbox"},E={checked:P(m.value)};function x(){e.current&&(e.current.indeterminate=m.value===g.Mixed)}return(0,n.useEffect)((function(){h&&b({type:w.Set,state:O(s)})}),[h,s,b]),(0,p.useIsomorphicLayoutEffect)(x),(0,n.useEffect)((function(){b({type:w.GetDerivedData,data:{disabled:u,isControlled:h}})}),[u,h,b]),[S,E]}function O(e){return!0===e?g.Checked:"mixed"===e?g.Mixed:g.Unchecked}function P(e){return e===g.Checked||e===g.Mixed&&"mixed"}function k(e,t,r){var o=null!=e,i=(0,n.useRef)(o).current;(0,n.useEffect)((function(){}),[r,t,o,i])}var _=["as","checked","children","defaultChecked","disabled","onClick","onChange","__componentName"],N=["as","onBlur","onFocus"],C=(0,o.createNamedContext)("CustomCheckboxContext",{});var D=(0,n.forwardRef)((function(e,t){var r=e.as,o=void 0===r?"span":r,i=e.checked,u=e.children,p=e.defaultChecked,f=e.disabled,d=e.onClick,y=e.onChange,g=e.__componentName,v=void 0===g?"CustomCheckboxContainer":g,w=h(e,_),m=(0,n.useRef)(null),T=I(m,{defaultChecked:p,checked:i,disabled:f,onChange:y},v),b=T[0],S=T[1],E=(0,n.useState)(!1),x=E[0],A=E[1];var P={defaultChecked:p,disabled:f,focused:x,inputProps:b,inputRef:m,setFocused:A};return k(i,"checked",v),(0,a.useCheckStyles)("checkbox"),(0,n.createElement)(C.Provider,{value:P},(0,n.createElement)(o,l({},w,{ref:t,"data-reach-custom-checkbox-container":"","data-focused":x?"":void 0,"data-state":O(S.checked),onClick:(0,c.composeEventHandlers)(d,(function(){window.requestAnimationFrame((function(){m.current&&m.current.focus()}))}))}),(0,s.isFunction)(u)?u({checked:b["aria-checked"],inputRef:m,focused:x}):u))})),L=(0,n.forwardRef)((function(e,t){var r=e.as,o=void 0===r?"input":r,i=e.onBlur,s=e.onFocus,a=h(e,N),p=(0,n.useContext)(C),f=p.focused,d=p.inputProps,y=p.inputRef,g=p.setFocused,v=(0,u.useComposedRefs)(t,y),w=(0,n.useRef)(!0);return(0,n.useEffect)((function(){return function(){w.current=!1}}),[]),(0,n.createElement)(o,l({},a,d,{ref:v,type:"checkbox","data-reach-custom-checkbox-input":"","data-focused":f?"":void 0,onBlur:(0,c.composeEventHandlers)(i,(function(){window.requestAnimationFrame((function(){w.current&&g(!1)}))})),onFocus:(0,c.composeEventHandlers)(s,(function(){window.requestAnimationFrame((function(){w.current&&g(!0)}))}))}))}))})),i("ifysB");
//# sourceMappingURL=ConnectHardwareMultichainFlow.ed98e413.js.map
define=__define;})(window.define);